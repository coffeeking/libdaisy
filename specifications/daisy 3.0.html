<?xml version='1.0' encoding='utf-8'?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"

  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns='http://www.w3.org/1999/xhtml' lang='en' xml:lang='en'>

<!-- Editorial revision April 20, 2007 by George Kerscher

   fixed validation errors from meta and br missing end tags

   references to Appendix 1 cleaned up

   Appendix 2 changed to refer to the Contact Us form, rather than daisy-staff email address which is discontinued

-->

<head>

<title>Specifications for the Digital Talking Book</title>

<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />

<meta name="subject" content="Digital Audio-based Information Systems, DAISY Consortium, digital talking book, DTB, talking book, dtbook, dtbook DTD, NISO, National Information Standards Organization, XML application, DTB package file, audio file formats, image file formats, digital rights management, DRM, time-scale modification, distribution information DTD, SMIL application, DTB-specific SMIL DTD, navigation control file, NCX, NCX DTD, portable bookmarks, portable bookmarks DTD, highlights, resource file, resource file DTD, packaging files for distribution, presentation styles, style sheets for DTBs, conformance" />

<meta name="dc.Creator" content="NISO Committee AQ on Digital Talking Books" />

<meta name="dc.Subject" content="digital talking books" />

<meta name="dc.Subject" content="Specifications for the Digital Talking Book" />

<meta name="dc.Description" content="This standard defines the format and content of the electronic file set that comprises a digital talking book (DTB) and establishes a limited set of requirements for DTB playback devices.  It uses established and new specifications to delineate the structure of DTBs whose content can range from XML text only, to text with corresponding spoken audio, to audio with little or no text.  DTBs are designed to make print material accessible and navigable for blind or otherwise print-disabled persons." />

<meta name="dc.Publisher" content="National Information Standards Organization, Bethesda, Maryland NISO Press, Bethesda, Maryland, U.S.A." />

<meta name="dc.Contributor" content="Draft American National Standard Developed by the National Information Standards Organization" />

<meta name="dc.Contributor" content="ANSI/NISO Z39.86 Advisory Committee" />

<meta name="dc.Contributor" content="DAISY Consortium XML-Techniques Working Group" />

<meta name="dc.Date" content="2005-04-21" />

<meta name="dc.Type" content="interactive" />

<meta name="dc.Format" content="text/html" />

<meta name="dc.Identifier" content="ANSI/NISO Z39.86-2005" />

<meta name="dc.Identifier" content="1041-5653 National Information Standard Series" />

<meta name="dc.Identifier" content="1-880124-63-7" />

<meta name="dc.Language" content="en-US" />

<meta name="dc.Rights" content="American National Standards Institute" />

<meta name="dc.Rights" content="Copyright &copy; 2005 by National Information Standards Organization" />

<style type="text/css">

  ul.pl li {list-style-type: none;}

  h1 span.identifier {display: block; font-size: 50%;}

  h1 span.title {display: block; margin-top: 5em; margin-bottom: 3em; text-align: center; letter-spacing: 0.1em; font-size:80%;}

  .sstatus {font-weight: bold; font-size: 100%;}

  /* below added mg 20050427 */

  body {margin-left:8em; margin-right:13em; font-family: arial, verdana, sans-serif;}

  dt {font-weight:bold;}

</style>

</head>

<body>

<h1 id="h1_a">

  <span class="identifier">

    ANSI/NISO Z39.86-2005 (R2012)<br />

    Revision of ANSI/NISO Z39.86-2002<br />

    ISSN: 1041-5653<br />

  </span>

  <span class="title">

    Specifications for the Digital Talking Book

  </span>

</h1>



<p id="para_1">Abstract:  This standard defines the format and content of the electronic file set that comprises a digital talking book (DTB) and establishes a limited set of requirements for DTB playback devices.  It uses established and new specifications to delineate the structure of DTBs whose content can range from XML text only, to text with corresponding spoken audio, to audio with little or no text.  DTBs are designed to make print material accessible and navigable for blind or otherwise print-disabled persons.</p>

<p id="para_2">An American National Standard Developed by the National Information Standards Organization<br />Approved April 21, 2005 by the American National Standards Institute</p>

<p id="para_2b">Published by<br />NISO Press<br />4733 Bethesda Avenue, Suite 300<br />Bethesda, MD 20814<br />www.niso.org</p>

<p id="para_2c">Copyright &copy;2005 by the National Information Standards Organization.<br />All rights reserved under international and Pan-American Copyright Conventions. For noncommercial purposes only this publication may be reproduced or transmitted in any form or by any means without prior permission in writing from the publisher.  All inquiries regarding commercial reproduction or distribution should be addressed to NISO Press, 4733 Bethesda Avenue, Suite 300, Bethesda, MD 20814 USA.</p>

<p id="para_2d">ISSN: 1041-5653 National Information Standards Series<br />ISBN: 1-880124-63-7</p>



<h1 id="h1_2"><a name="toc">Contents</a></h1>



<ul class="pl" id="ul_1">

<li id="li_0"><a href="#Preface">Preface to 2005 Edition</a></li>

  <li id="li_1"><a href="#Foreword">Foreword</a>

    <ul id="ul_2">

      <li id="li_2"><a href="#Vote">NISO Voting Members</a></li>

      <li id="li_3"><a href="#BoD">NISO Board of Directors</a></li>

      <li id="li_4"><a href="#AC">Advisory Committee for ANSI/NISO Z39.86</a></li>

      <li id="li_5"><a href="#Ack">Acknowledgments</a></li>

    </ul>

  </li>

</ul>



<ul id="ol_1" class="pl">

  <li id="li_6">1. <a href="#GenInfo">General Information</a>

    <ul id="ul_3">

      <li id="li_7">1.1 <a href="#Purpose">Purpose and Scope of Standard</a></li>

      <li id="li_8">1.2 <a href="#Def">Definitions</a></li>

      <li id="li_9">1.3 <a href="#Strategy">Strategy</a></li>

      <li id="li_10">1.4 <a href="#Access">Accessibility Issues</a></li>

      <li id="li_11">1.5 <a href="#Rel">Relationship to Other Specifications</a>

        <ul id="ul_4">

          <li id="li_12">1.5.1 <a href="#Uni">Relationship to Unicode</a></li>

        </ul>

      </li>

      <li id="li_13">1.6 <a href="#Patents">Patent Rights</a></li>

      <li id="li_14">1.7 <a href="#Maint">Maintenance Agency</a></li>

    </ul>

  </li>

  <li id="li_15">2. <a href="#Over">Overview</a></li>

  <li id="li_16">3. <a href="#OPF">The DTB Package File</a>

    <ul id="ul_5">

      <li id="li_17">3.1 <a href="#PkgId">Package Identity</a></li>

      <li id="li_18">3.2 <a href="#PubMed">Publication Metadata</a>

        <ul id="ul_6">

          <li id="li_19">3.2.1 <a href="#DCM">Dublin Core Metadata</a></li>

          <li id="li_20">3.2.2 <a href="#DTBID">DTB ID Scheme</a></li>

          <li id="li_21">3.2.3 <a href="#XMeta">X-Metadata</a></li>

        </ul></li>

      <li id="li_22">3.3 <a href="#Manifest">Manifest</a>

      <ul id="ul_6a">

      <li id="li_22a">3.3.1 <a href="#Allowed-Char">Allowed Characters in Filenames</a></li>

      <li id="li_22b">3.3.2 <a href="#Case">Case Sensitivity of URIs</a></li>

      </ul></li>

      <li id="li_23">3.4 <a href="#Spine">Spine</a></li>

      <li id="li_24">3.5 <a href="#Tours">Tours</a></li>

      <li id="li_25">3.6 <a href="#Guide">Guide</a></li>

    </ul>

  </li>

  <li id="li_26">4. <a href="#Text">Content Format for Text</a>

    <ul id="ul_7">

      <li id="li_27">4.1 <a href="#TextIntro">Introduction</a></li>

      <li id="li_28">4.2 <a href="#Using">Using the DTBook Element Set</a>

        <ul id="ul_8">

          <li id="li_29">4.2.1 <a href="#SMILMark">DTBook Markup Related to SMIL</a></li>

          <li id="li_30">4.2.2 <a href="#ModExt">Modular Extension of the DTD</a></li>

        </ul></li>

    </ul>

  </li>

  <li id="li_32">5. <a href="#Audio">Audio File Formats</a>

    <ul id="ul_9">

      <li id="li_33">5.1 <a href="#AudFormats">Distribution Formats</a></li>

      <li id="li_34">5.2 <a href="#AudNotes">Formats for Audio Notes</a></li>

    </ul>

  </li>

  <li id="li_35">6. <a href="#Image">Image File Formats</a></li>

  <li id="li_36">7. <a href="#SMIL">Synchronization of Media Files</a>

    <ul id="ul_10">

      <li id="li_37">7.1 <a href="#SMILIntro">Introduction</a>

        <ul id="ul_11">

          <li id="li_38">7.1.1 <a href="#SMILBack">Background</a></li>

          <li id="li_39">7.1.2 <a href="#SMILMods">SMIL Modules</a></li>

        </ul>

      </li>

      <li id="li_40">7.2 <a href="#SMILApp">Application of SMIL to DTBs</a></li>

      <li id="li_41">7.3 <a href="#SMILElem">SMIL Elements</a>

        <ul id="ul_12">

      <li id="li_42">7.3.1 <a href="#CommAtt">Core Attributes</a></li>

      <li id="li_42a">7.3.2 <a href="#xmllang">xml:lang Attribute</a></li>

        </ul></li>

<li id="li_43">7.4 <a href="#SMILProd">SMIL Requirements for DTBs</a>

<ul id="ul_13">

<li id="li_44">7.4.1 <a href="#Escape">"Escapable" Structures</a></li>

<li id="li_45">7.4.2 <a href="#AutoInv">Automatic Invocation of Special Navigation Modes</a></li>

<li id="li_46">7.4.3 <a href="#Skip">"Skippable" Structures</a></li>

<li id="li_47">7.4.4 <a href="#SMILDist">Packaging Files across Several Media Units</a></li>

<li id="li_48">7.4.5 <a href="#SMILLinks">Links</a></li>

<li id="li_49">7.4.6 <a href="#Layout">Layout Syntax</a></li>

<li id="li_50">7.4.7 <a href="#Par">Content of &lt;par&gt;s</a></li>

<li id="li_52">7.4.8 <a href="#Notes">Notes and Annotations in SMIL</a></li>

<li id="li_53">7.4.9 <a href="#Images">Images in SMIL</a></li>

<li id="li_54">7.4.10 <a href="#T-O">Text Only DTBs</a></li>

<li id="li_54a">7.4.11 <a href="#P-P">Producer Pauses</a></li>

</ul></li>

<li id="li_55">7.5 <a href="#SMILMeta">SMIL Metadata</a></li>

<li id="li_56">7.6 <a href="#SMILEx">Examples</a></li>

<li id="li_57">7.7 <a href="#Clock">Media Clipping and Clock Values</a></li>

<li id="li_57a">7.8 <a href="#End-Vals">End Attribute Values</a>

      <ul id="ul_12a">

      <li id="li_57b">7.8.1 <a href="#A-End-Vals">Allowed End Values</a></li>

      <li id="li_57c">7.8.2 <a href="#Active-Dur">Computing the Active Duration</a></li>

      <li id="li_57d">7.8.3 <a href="#Nest">Processing Nested Structures</a></li>

        </ul></li>

    </ul></li>

<li id="li_58">8. <a href="#NCX">Navigation Control File (NCX)</a>

<ul id="ul_14">

<li id="li_59">8.1 <a href="#NCXIntro">Introduction</a></li>

<li id="li_60">8.2 <a href="#NCXReq">Key NCX Requirements</a></li>

<li id="li_61">8.3 <a href="#NCXElem">NCX Elements</a></li>

<li id="li_62">8.4 <a href="#FileReq">Other File Requirements</a>

<ul id="ul_15">

<li id="li_63">8.4.1 <a href="#NavMeta">Navigation Metadata</a></li>

<li id="li_64">8.4.2 <a href="#NCXSpan">DTBs Spanning Multiple Media Units</a></li>

          <li id="li_65">8.4.3 <a href="#NCXplay">playOrder Attribute</a></li>

<li id="li_66">8.4.4 <a href="#NCXCustom">smilCustomTest Element</a></li>

<li id="li_66a">8.4.5 <a href="#NCXPage">Enabling Page Navigation</a></li>

</ul></li>

<li id="li_67">8.5 <a href="#NCXWorks">How the NCX Works</a></li>

<li id="li_68">8.6 <a href="#NCXEx">Example</a></li>

</ul></li>

<li id="li_69">9. <a href="#Bkmk">Portable Bookmarks and Highlights</a>

<ul id="ul_16">

<li id="li_70">9.1 <a href="#BkmkIntro">Introduction</a></li>

<li id="li_71">9.2 <a href="#BkmkElem">Bookmark/Highlight Elements</a></li>

<li id="li_72">9.3 <a href="#BkmkEx">Examples</a></li>

</ul></li>

<li id="li_73">10. <a href="#Resource">Resource File</a>

<ul id="ul_17">

<li id="li_74">10.1 <a href="#ResIntro">Introduction</a></li>

<li id="li_75">10.2 <a href="#ResElem">Resource Elements</a></li>

<li id="li_76">10.3 <a href="#ResReq">Resource File Requirements</a></li>

<li id="li_77">10.4 <a href="#ResEx">Examples</a></li>

</ul></li>

<li id="li_78">11. <a href="#Dist">Packaging Files for Distribution</a>

<ul id="ul_18">

<li id="li_79">11.1 <a href="#DistIntro">Introduction</a></li>

<li id="li_80">11.2 <a href="#DistReq">Distribution Requirements</a></li>

<li id="li_81">11.3 <a href="#DistElem">Distinfo Elements</a></li>

<li id="li_82">11.4 <a href="#DistEx">Examples</a></li>

</ul></li>

<li id="li_83">12. <a href="#Style">Presentation Styles</a>

<ul id="ul_19">

<li id="li_84">12.1 <a href="#StyleIntro">Introduction</a></li>

<li id="li_85">12.2 <a href="#ImpStyles">Implementing Style Sheets for DTBs</a></li>

</ul></li>

<li id="li_86">13. <a href="#Render">Content Rendering</a></li>

<li id="li_90">14. <a href="#DRM">Digital Rights Management</a></li>

<li id="li_91">15. <a href="#TSM">Time-Scale Modification</a></li>

<li id="li_92">16. <a href="#Conform">Conformance</a>

<ul id="ul_19a">

<li id="li_92a">16.1 <a href="#FileConform">General File Conformance Requirements</a></li></ul></li>

<li id="li_93">17. <a href="#Ref">References to Other Specifications/Documents</a>

<ul id="ul_20a">

<li id="li_93a">17.1 <a href="#Norm-Ref">Normative References</a></li>

<li id="li_93b">17.2 <a href="#Inform-Ref">Informative References</a></li>

</ul>

</li>

</ul>



<ul id="ul_21">

<li id="li_94"><a href="#DTBookDTD">Appendix 1 - Document Type Definitions (DTDs)</a></li>

<li id="li_100"><a href="#MaintDes">Appendix 2 - Designation of Maintenance Agency</a></li>

</ul>



<h1 id="h1_2a"><a name="Preface">Preface to 2005 Edition</a></h1>



<p id="para_2d1"> (This preface is not a part of ANSI/

 Z39.86-2005, Specifications for the Digital Talking Book. It is included for information only.)</p>



<p id="para_2e">ANSI/NISO Z39.86 was first released in 2002.  Preparation of this version of the standard was prompted by several factors: first, a desire to stay abreast of current practices in related standards and specifications; second, a need to clarify a few ambiguities present in the first release; and third, the wish to add enhancements requested by those using, or planning to use, the standard.</p>



<p id="para_2f">A variety of changes stemming from all of the above reasons were made.  Some of the more significant enhancements are listed below:</p>



<ul id="ul_21a">

<li id="li_100a">Producer-controlled pauses.  These allow a DTB author to cause the presentation to pause at specified points and wait for a user action.  This function could be used in workbooks when the user needs to, for example, explore a model before continuing.</li>



<li id="li_100b">A more robust method of ensuring that players can maintain their location when navigation methods are mixed</li>



<li id="li_100c">A cleaner mechanism for enabling direct access to pages</li>



<li id="li_100d">New elements for marking up a textual content file</li>



<li id="li_100e">A more efficient method of identifying individual books when more than one is present on a single piece of media</li>

</ul>



<p id="para_2g">Individual changes made to the standard are described in comments that can be viewed by reading the HTML version in an HTML authoring tool or with a text editor.</p>





<h1 id="h1_3"><a name="Foreword">Foreword</a></h1>



<p id="para_3"> (This foreword is not a part of ANSI/

 Z39.86-2005, Specifications for the Digital Talking Book. It is included for information only.)</p>



<p id="para_4"> This standard presents specifications for digital talking books (DTBs) for blind, visually

impaired, physically handicapped, learning-disabled, or otherwise print-disabled readers.  For many years, "talking

books" have been made available to print-disabled readers on analog media such as phonograph

records and audiocassettes.  These media serve their users well in providing human-speech

recordings of a wide array of print material in increasingly robust and cost-effective formats.

However, analog media are limited in several respects when compared to a print book.  First,

they are by their nature linear presentations, which leave much to be

desired when reading reference works, textbooks, magazines, and other materials that are often

accessed randomly.  In contrast, digital media offer readers the ability to move around in a book or magazine as

freely as (and more efficiently than) a sighted reader flips through a print book.  Second, analog

recordings do not allow users to interact with the book by placing bookmarks or highlighting

material.  A DTB offers this capability, storing the bookmarks and highlights

separate from, but associated with,  the DTB itself.  Third, talking book users have long

complained that they do not have access to the spelling of the words they hear.  As will be

explained below, some DTBs will include a file containing the full text of the work,

synchronized with the audio presentation, thereby allowing readers to locate specific words and

hear them spelled.   Finally, analog audio offers readers only one version of the document.  If, for

example, a book contains footnotes, they are either read where referenced, which burdens the

casual reader with unwanted interruptions, or grouped at a location out of the flow of the text,

making them difficult for interested readers to access.  A DTB allows the user to easily skip

over or read footnotes.  The Digital Talking Book offers the print-disabled user a significantly

enhanced reading experience -- one that is much closer to that of the sighted reader using a print

book.</p>





<p id="para_5"><!-- MM 2004-04-05 Added mention of text-only DTBs -->The DTB goes far beyond the limits imposed on analog audio books because it can include not just the audio rendition of the work, but the full textual content

  and images as well. Because the textual content file is synchronized with the

  audio file, a DTB offers multiple sensory inputs to readers, a great benefit

  to, for example, learning-disabled readers. Some visually impaired readers may

  choose to listen to most of the book, but find that inspecting the images provides

  information not available in the narrative flow. Others may opt to skip the

  audio presentation altogether and instead view the text file via screen-enlarging

  software. Braille readers may prefer to read some or all of the document via

  a refreshable Braille display device connected to their DTB player and accessing

  the textual content file.  DTBs containing a textual content file but no audio material might be accessed via synthetic speech, screen-enlarging software, or a Braille device.</p>





<p id="para_6"> Digital Talking Books are not tied to a single distribution medium.  CD-ROMs will be used first

but DTBs will be portable to any digital distribution medium capable of handling the large files

associated with digital audio recordings. Regardless of how a DTB is distributed, however, it

will normally be in the context of an intellectual property protection system.</p>





<p id="para_7">Suggestions for improving this standard are welcome. They should be sent to the National Information Standards Organization, 4733 Bethesda Avenue, Suite 300, Bethesda, MD 20814 USA, telephone (301) 654&#8209;2512.</p>



<p id="para_8">This Standard was processed and approved for submittal to ANSI by the National Information Standards

Organization. NISO approval of this Standard does not necessarily imply that all Voting Members voted for its approval. At the time it approved this Standard, NISO had the following members:</p>



<h3 id="Vote">NISO Voting Members</h3>



<p>3M



<br />&nbsp;&nbsp;&nbsp;Susan

Boettcher



<br />&nbsp;&nbsp;&nbsp;Roger

D. Larson, Alt</p>



<p>American

Association of Law Libraries



<br />&nbsp;&nbsp;&nbsp;Robert

L. Oakley



<br />&nbsp;&nbsp;&nbsp;Mary

Alice Baish, Alt</p>



<p>American

Chemical Society



<br />&nbsp;&nbsp;&nbsp;Matthew

Toussant</p>



<p>American

Library Association



<br />&nbsp;&nbsp;&nbsp;Betty

Landesman</p>



<p>American

Society for Information Science and Technology (ASIS&amp;T)



<br />&nbsp;&nbsp;&nbsp;Gail

Thornburg



</p><p>American

Society of Indexers



<br />&nbsp;&nbsp;&nbsp;Judith

Gibbs



</p><p>American

Theological Library Association



<br />&nbsp;&nbsp;&nbsp;Myron

Chace



</p><p>ARMA

International



<br />&nbsp;&nbsp;&nbsp;Diane

Carlisle



</p><p>Armed

Forces Medical Library



<br />&nbsp;&nbsp;&nbsp;Diane

Zehnpfennig



<br />&nbsp;&nbsp;&nbsp;Emily

Court, Alt



</p><p>Art

Libraries Society of North America (ARLIS/NA)



<br />&nbsp;&nbsp;&nbsp;Mark

Bresnan



</p><p>Association

for Information and Image Management (AIIM)



<br />&nbsp;&nbsp;&nbsp;Betsy

A. Fanning



</p><p>Association

of Information and Dissemination Centers (ASIDIC)



<br />&nbsp;&nbsp;&nbsp;Margie

Hlava



</p><p>Association

of Jewish Libraries



<br />&nbsp;&nbsp;&nbsp;Caroline

R. Miller



<br />&nbsp;&nbsp;&nbsp;Elizabeth

Vernon, Alt



</p><p>Association

of Research Libraries



<br />&nbsp;&nbsp;&nbsp;Duane

E. Webster



<br />&nbsp;&nbsp;&nbsp;Julia

Blixrud, Alt



</p><p>Auto-Graphics,

Inc.



<br />&nbsp;&nbsp;&nbsp;Paul

Cope



</p><p>Barnes

&amp; Noble, Inc.



<br />&nbsp;&nbsp;&nbsp;Douglas

Cheney



</p><p>Book

Industry Communication



<br />&nbsp;&nbsp;&nbsp;Brian

Green



</p><p>California

Digital Library



<br />&nbsp;&nbsp;&nbsp;Daniel

Greenstein



<br />&nbsp;&nbsp;&nbsp;John

Kunze, Alt



</p><p>Cambridge

Information Group



<br />&nbsp;&nbsp;&nbsp;Michael

Cairns



<br />&nbsp;&nbsp;&nbsp;Matthew

Dunie, Alt



</p><p>College

Center for Library Automation (CCLA)



<br />&nbsp;&nbsp;&nbsp;Richard

Madaus



<br />&nbsp;&nbsp;&nbsp;Ann

Armbrister, Alt



</p><p>Colorado

State Library



<br />&nbsp;&nbsp;&nbsp;Brenda

Bailey-Hainer



<br />&nbsp;&nbsp;&nbsp;Steve

Wrede, Alt



</p><p>CrossRef



<br />&nbsp;&nbsp;&nbsp;Edward

Pentz



<br />&nbsp;&nbsp;&nbsp;Amy

Brand, Alt



</p><p>Davandy,

L.L.C.



<br />&nbsp;&nbsp;&nbsp;Michael

J. Mellinger



</p><p>DYNIX

Corporation



<br />&nbsp;&nbsp;&nbsp;Ed

Riding



<br />&nbsp;&nbsp;&nbsp;Gail

Wanner, Alt



</p><p>EBSCO

Information Services



<br />&nbsp;&nbsp;&nbsp;Gary

Coker



<br />&nbsp;&nbsp;&nbsp;Oliver

Pesch, Alt



</p><p>Elsevier



<br />&nbsp;&nbsp;&nbsp;Paul

Mostert



</p><p>Endeavor

Information Systems, Inc.



<br />&nbsp;&nbsp;&nbsp;Sara

Randall



<br />&nbsp;&nbsp;&nbsp;Shelley

Hostetler, Alt



</p><p>Entopia,

Inc.



<br />&nbsp;&nbsp;&nbsp;Igor

Perisic



</p><p>Ex

Libris, Inc



<br />&nbsp;&nbsp;&nbsp;James

Steenbergen



</p><p>Fretwell-Downing

Informatics



<br />&nbsp;&nbsp;&nbsp;Robin

Murray



</p><p>Gale

Group



<br />&nbsp;&nbsp;&nbsp;Katherine

Gruber



<br />&nbsp;&nbsp;&nbsp;Justine

Carson, Alt



</p><p>Geac

Library Solutions



<br />&nbsp;&nbsp;&nbsp;Eric

Conderaerts



<br />&nbsp;&nbsp;&nbsp;Eloise

Sullivan, Alt



</p><p>GIS

Information Systems, Inc.



<br />&nbsp;&nbsp;&nbsp;Candy

Zemon



<br />&nbsp;&nbsp;&nbsp;Paul

Huf, Alt



</p><p>H.W.

Wilson Company



<br />&nbsp;&nbsp;&nbsp;Ann

Case



<br />&nbsp;&nbsp;&nbsp;Patricia

Kuhr, Alt



</p><p>Helsinki

University Library



<br />&nbsp;&nbsp;&nbsp;Juha

Hakala



</p><p>Index

Data



<br />&nbsp;&nbsp;&nbsp;Sebastian

Hammer



<br />&nbsp;&nbsp;&nbsp;David

Dorman, Alt



</p><p>INFLIBNET

Centre



<br />&nbsp;&nbsp;&nbsp;T A

V Murthy



<br />&nbsp;&nbsp;&nbsp;Rajesh

Chandrakar, Alt



</p><p>Infotrieve





<br />&nbsp;&nbsp;&nbsp;Jan

Peterson



</p><p>Innovative

Interfaces, Inc.



<br />&nbsp;&nbsp;&nbsp;Gerald

M. Kline



<br />&nbsp;&nbsp;&nbsp;Betsy

Graham, Alt



</p><p>International

DOI Foundation, The



<br />&nbsp;&nbsp;&nbsp;Norman

Paskin



</p><p>Ithaka/JSTOR/ARTstor



<br />&nbsp;&nbsp;&nbsp;David

Yakimischak



<br />&nbsp;&nbsp;&nbsp;Bruce

Heterick, Alt



</p><p>John

Wiley &amp; Sons, Inc.



<br />&nbsp;&nbsp;&nbsp;Eric

Swanson



</p><p>Library

Binding Institute



<br />&nbsp;&nbsp;&nbsp;Debra

Nolan



</p><p>Library

Corporation, The



<br />&nbsp;&nbsp;&nbsp;Mark

Wilson



<br />&nbsp;&nbsp;&nbsp;Ted

Koppel, Alt



</p><p>Library

of Congress



<br />&nbsp;&nbsp;&nbsp;Sally

H. McCallum, Alt



</p><p>Los

Alamos National Laboratory



<br />&nbsp;&nbsp;&nbsp;Richard

E. Luce



</p><p>Lucent

Technologies



<br />&nbsp;&nbsp;&nbsp;M.E.

Brennan



</p><p>Medical

Library Association



<br />&nbsp;&nbsp;&nbsp;Nadine

P. Ellero



<br />&nbsp;&nbsp;&nbsp;Carla

J. Funk, Alt



</p><p>MINITEX



<br />&nbsp;&nbsp;&nbsp;Cecelia

Boone



<br />&nbsp;&nbsp;&nbsp;William

DeJohn, Alt



</p><p>Modern

Language Association



<br />&nbsp;&nbsp;&nbsp;Daniel

Bokser



<br />&nbsp;&nbsp;&nbsp;B.

Chen, Alt



</p><p>MuseGlobal,

Inc.



<br />&nbsp;&nbsp;&nbsp;Kate

Noerr



<br />&nbsp;&nbsp;&nbsp;Clifford

Hammond, Alt



</p><p>Music

Library Association



<br />&nbsp;&nbsp;&nbsp;Mark

McKnight



<br />&nbsp;&nbsp;&nbsp;David

Sommerfield, Alt



</p><p>National

Agricultural Library



<br />&nbsp;&nbsp;&nbsp;Eleanor

G. Frierson



<br />&nbsp;&nbsp;&nbsp;Gary

K. McCone, Alt



</p><p>National

Archives and Records Administration



<br />&nbsp;&nbsp;&nbsp;Nancy

Allard



</p><p>National

Library of Medicine



<br />&nbsp;&nbsp;&nbsp;Betsy

L. Humphreys



</p><p>National

Security Agency



<br />&nbsp;&nbsp;&nbsp;Kathleen

Dolan



</p><p>NFAIS



<br />&nbsp;&nbsp;&nbsp;Marjorie

Hlava



</p><p>Nylink



<br />&nbsp;&nbsp;&nbsp;Mary-Alice

Lynch



<br />&nbsp;&nbsp;&nbsp;Jane

Neale, Alt



</p><p>OCLC

Online Computer Library Center



<br />&nbsp;&nbsp;&nbsp;Thomas

Hickey



</p><p>Openly

Informatics, Inc.



<br />&nbsp;&nbsp;&nbsp;Eric

Hellman



</p><p>ProQuest

Information and Learning



<br />&nbsp;&nbsp;&nbsp;Thomas

Hamilton



<br />&nbsp;&nbsp;&nbsp;Carol

Brent, Alt



</p><p>Random

House, Inc.



<br />&nbsp;&nbsp;&nbsp;Laurie

Stark



</p><p>Recording

Industry Association of America



<br />&nbsp;&nbsp;&nbsp;Bruce

Block



<br />&nbsp;&nbsp;&nbsp;Carlos

Garza, Alt



</p><p>RLG



<br />&nbsp;&nbsp;&nbsp;Lennie

Stovel



<br />&nbsp;&nbsp;&nbsp;Joan

Aliprand, Alt



</p><p>Sage

Publications



<br />&nbsp;&nbsp;&nbsp;Carol

Richman



<br />&nbsp;&nbsp;&nbsp;Richard

Fidczuk, Alt



</p><p>Serials

Solutions, Inc.



<br />&nbsp;&nbsp;&nbsp;Mike

McCracken



</p><p>SIRSI

Corporation



<br />&nbsp;&nbsp;&nbsp;Greg

Hathorn



<br />&nbsp;&nbsp;&nbsp;Slavko

Manojlovich, Alt



</p><p>Society

for Technical Communication (STC)



<br />&nbsp;&nbsp;&nbsp;Frederick

O'Hara



<br />&nbsp;&nbsp;&nbsp;Annette

D. Reilly, Alt



</p><p>Society

of American Archivists



<br />&nbsp;&nbsp;&nbsp;Lisa

Weber



</p><p>Special

Libraries Association (SLA)



<br />&nbsp;&nbsp;&nbsp;Foster

J. Zhang



</p><p>Synapse

Corporation



<br />&nbsp;&nbsp;&nbsp;Trish

Yancey



<br />&nbsp;&nbsp;&nbsp;Dave

Clarke, Alt



</p><p>TAGSYS,

Inc.



<br />&nbsp;&nbsp;&nbsp;John

Jordon



<br />&nbsp;&nbsp;&nbsp;Anne

Salado, Alt



</p><p>Talis

Information Ltd



<br />&nbsp;&nbsp;&nbsp;Terry

Willan



<br />&nbsp;&nbsp;&nbsp;Katie

Anstock, Alt



</p><p>The

Cherry Hill Company



<br />&nbsp;&nbsp;&nbsp;Cary

Gordon



</p><p>Thomson

ISI



<br />&nbsp;&nbsp;&nbsp;Carolyn

Finn



</p><p>Triangle

Research Libraries Network



<br />&nbsp;&nbsp;&nbsp;Mona

C. Couts, Alt



</p><p>U.S.

Department of Commerce, NIST, Office of Information Services



<br />&nbsp;&nbsp;&nbsp;Mary-Deirdre

Coraggio



</p><p>U.S.

Department of Defense, DTIC (Defense Technical Information Center)



<br />&nbsp;&nbsp;&nbsp;Richard

Evans



<br />&nbsp;&nbsp;&nbsp;Jane

L. Cohen, Alt



</p><p>U.S.

DOE, Office of Scientific &amp; Technical Information



<br />&nbsp;&nbsp;&nbsp;Ralph

Scott



<br />&nbsp;&nbsp;&nbsp;Karen

Spence, Alt



</p><p>U.S.

Government Printing Office



<br />&nbsp;&nbsp;&nbsp;Judith

Russell



<br />&nbsp;&nbsp;&nbsp;T.C.

Evans, Alt



</p><p>U.S.

National Commission on Libraries and Information Science (NCLIS)



<br />&nbsp;&nbsp;&nbsp;Robert

Molyneux



</p><p>VTLS,

Inc.



<br />&nbsp;&nbsp;&nbsp;Carl

Grant, Alt



</p><p>WebFeat



<br />&nbsp;&nbsp;&nbsp;Todd

Miller



<br />&nbsp;&nbsp;&nbsp;Paul

Duncan, Alt</p>



<h3 id="BoD">NISO Board of Directors</h3>



<p>At the time NISO approved this standard, the following individuals served on its Board of Directors:</p>



<p>Jan Peterson, Chair



<br />&nbsp;&nbsp;&nbsp;Infotrieve



</p><p>Carl Grant, Vice Chair/Chair-Elect



<br />&nbsp;&nbsp;&nbsp;VTLS, Inc.



</p><p>Beverly C. Lynch, Immediate Past

Chair



<br />&nbsp;&nbsp;&nbsp;UCLA Graduate School of Education &amp; Information

Studies



</p><p>Michael J. Mellinger, Treasurer



<br />&nbsp;&nbsp;&nbsp;Davandy, L.L.C.



</p><p>Patricia R. Harris, Executive

Director/Secretary



<br />&nbsp;&nbsp;&nbsp;National Information Standards Organization



</p><p>Douglas Cheney



<br />&nbsp;&nbsp;&nbsp;Barnes &amp; Noble, Inc.



</p><p>Brian Green



<br />&nbsp;&nbsp;&nbsp;BIC/EDItEUR



</p><p>Daniel Greenstein



<br />&nbsp;&nbsp;&nbsp;California Digital Library



</p><p>Deborah Loeding



<br />&nbsp;&nbsp;&nbsp;The H.W. Wilson Company



</p><p>Richard E. Luce



<br />&nbsp;&nbsp;&nbsp;Los Alamos National Laboratory



</p><p>Robin Murray



<br />&nbsp;&nbsp;&nbsp;Fretwell- Downing Informatics



</p><p>James Neal



<br />&nbsp;&nbsp;&nbsp;Columbia University



</p><p>Oliver Pesch



<br />&nbsp;&nbsp;&nbsp;EBSCO Information Services



</p><p>Patricia Stevens (SDC Chair)



<br />&nbsp;&nbsp;&nbsp;OCLC, Inc.



</p><p>Eric Swanson



<br />&nbsp;&nbsp;&nbsp;John Wiley &amp; Sons, Inc.</p>





<h3 id="h2_5"><a name="AC">Advisory Committee for ANSI/NISO Z39.86</a></h3>

<p>Following approval of this standard in 2002, an advisory committee was formed to oversee the maintenance and enhancement of the document.  The following individuals comprised the committee during the preparation of this version of the standard.</p>



<ul>

<li>Thomas Kjellberg Christensen &ndash; The Danish National Library for the Blind</li>

<li>Markus Gylling &ndash; the DAISY Consortium and the Swedish Library of Talking Books and Braille</li>

<li>Markku Hakkinen &ndash; the DAISY for All Project&#47;, DAISY Consortium</li>

<li>George Kerscher, co-Chair &ndash; the DAISY Consortium and Recording for the Blind &amp; Dyslexic</li>

<li>Tom McLaughlin &ndash; National Library Service for the Blind and Physically Handicapped</li>

<li>Michael Moodie, co-Chair &ndash; National Library Service for the Blind and Physically Handicapped</li>

<li>David Pawson &ndash; the Royal National Institute of the Blind</li>

<li>James Pritchett &ndash; Recording for the Blind &amp; Dyslexic</li>

<li>Lloyd Rasmussen &ndash; National Library Service for the Blind and Physically Handicapped</li>

<li>Jennifer Sutton, scribe</li>

</ul>



<h2 id="h2_5a"><a name="Ack">Acknowledgements</a></h2>



<p>The Advisory Committee gratefully acknowledges the substantial contributions made by the following individuals to the continuing development of the standard.  In particular, Ole Holst Andersen gave greatly of his time and expertise to the effort.  The DAISY Consortium's XML-Techniques working group also provided excellent feedback on the use of the DTBook DTD and identified aspects needing improvement.</p>



<p>Ole Holst Andersen, Danish National Library for the Blind; Jon Beatty, Minnetonka Software, Inc.; Harvey Bingham; Don Breda, American Council of the Blind; Sean Brooks, Canadian National institute for the Blind; John Bryant, National Library Service for the Blind and Physically Handicapped; Curtis Chong, National Federation of the Blind; John Cookson, National Library Service for the Blind and Physically Handicapped; Keith Creasy, American Printing House for the Blind; Tim Curtin, gh; Marisa de Meglio, the DAISY for All Project;, DAISY Consortium; Guillaume du Bourguet, BrailleNet Association; Jim Dust, Telex Communications Corporation; Daniel Farrington, Dolphin Audio Publishing; Dan Germann, LR Sound; Al Gilman; Luis Gutierrez, American Foundation for the Blind; Diana Hiorth Persson, Dolphin Audio Publishing; John Kibitlewski, gh; Jesper Klein, Swedish Library of Talking Books and Braille; Johan Knol, IDUNA Electronics BV; Brad Kormann, National Library Service for the Blind and Physically Handicapped; Kathy Korpolinski, Recording for the Blind &amp; Dyslexic; Dominic Labb&#233;, VisuAide, Inc.; Chris Lehn, Telex Communications Corporation; Lynn Leith, Canadian National Institute for the Blind; Olaf Mittelstaedt, Swiss Library for the Blind and Visually Handicapped; Brandon Nelson, Canadian National Institute for the Blind; Laust Skat Nielsen, Danish National Library for the Blind; Tatsuo Nishizawa, Plextor; Joe Said, gh; Janina Sajka, American Foundation for the Blind; Gregg Savage, Talking Book Publishers, Inc.; Dave Schleppenbach, gh; Per Sennels, National Resource Center for Special Education of the Visually Impaired (Norway); Sheela Sethuraman, CAST; Charles Steaderman; Jeff Suttor, SUN Microsystems; Niels Th&ouml;gersen, Danish Institute for the Blind; Chris von See, TechAdapt; Christian Wallin, Danish National Library for the Blind; Chris Wilder-Smith, CAST.</p>



<p><a href="#toc">Contents</a></p>



<h1 id="h1_4"><a name="GenInfo">1. General Information</a></h1>



<h2 id="h2_6"><a name="Purpose">1.1 Purpose and Scope of Standard</a></h2>

<p class="sstatus">(This section is <a href="#d-inform">informative</a>.)</p>

<p id="para_13">This standard establishes specifications for digital talking books (<a href="#d-dtb">DTB</a>s)

  for blind, visually impaired, physically handicapped, learning-disabled, or

  otherwise print-disabled <a href="#d-reader">reader</a>s. Its purpose is to

  ensure interoperability across service organizations and vendors providing content

  and <a href="#d-playsys">playback systems</a> to the <a href="#d-targetpop">target

  population</a>.</p>

<p id="para_14">This standard provides specifications primarily for DTB files and their interrelationships. It also includes specifications for DTB <a href="#d-playback">playback</a> devices in two areas: player performance related to file requirements and player behavior in areas defined in user requirements.</p>

<p><a href="#toc">Contents</a></p>



<h2 id="h2_7"><a name="Def">1.2 Definitions</a></h2>

<p class="sstatus">(This section is <a href="#d-norm">normative</a>.)</p>



<p id="para_15">The following abbreviations, acronyms, phrases, and terms are used

in this standard as defined below.  In the following definitions and throughout the standard, bracketed items correspond to entries in section 17, "<a href="#Ref">References to Other Specifications/Documents</a>," where the full URL is provided for each reference.</p>



<dl id="dl_1">

<dt id="dt_1"><a name="d-access">Accessible</a></dt>

  <dd id="dd_1">Fully usable by the target population.</dd>

<dt id="dt_2"><a name="d-css">CSS</a></dt>

  <dd id="dd_2"><a href="#CSS">Cascading Style Sheets</a> <a href="#CSS">[CSS]</a> is a

    mechanism for adding style (e.g. fonts, colors, spacing, formatting) to HTML

    or <a href="#d-xml">XML</a> documents.</dd>

<dt id="dt_3"><a name="d-drm">DRM</a></dt>

  <dd id="dd_3"><em>Digital Rights Management</em> is a system of tools and processes that protect intellectual property when it is encoded and distributed in digital form.</dd>

<dt id="dt_4"><a name="d-dtb">DTB</a></dt>

  <dd id="dd_4">The <em>Digital Talking Book</em> content data set that

  complies with the specifications in this standard.</dd>

<dt id="dt_5"><a name="d-dtbook">DTBook</a></dt>

  <dd id="dd_5">An <a href="#d-xml">XML</a> element set (dtbook.dtd) that defines the markup

    for the textual content of a <a href="#d-dtb">DTB</a>.</dd>

<dt id="dt_6"><a name="d-dtd">DTD</a></dt>

  <dd id="dd_6">The <em>Document Type Definition</em> file contains machine- and human-readable

    rules that define allowable <a href="#d-xml">XML</a> markup for a particular

    application.</dd>

<dt id="dt_7"><a name="d-fixed">FIXED</a></dt>

  <dd id="dd_7">When used in definitions of XML element attributes, means that the attribute has a single,

    fixed value specified in the <a href="#d-dtd">DTD</a>.

    See <a href="#d-implied">IMPLIED</a> and <a href="#d-required">REQUIRED.</a></dd>

<dt id="dt_8"><a name="d-fragid">Fragment Identifier</a></dt>

  <dd id="dd_8">A means to address a named place in a document. For reference within the

    current document, the reference part is to a named target and begins with

    "#". See <a href="#d-uri">URI</a> for addressing into another document.</dd>

<dt id="dt_9"><a name="d-globalnav">Global navigation</a></dt>

  <dd id="dd_9">Movement to user-selected portions of a document, with that movement enabled

    by the <a href="#d-ncx">NCX</a>. Navigation targets <a href="#d-may">may</a>

    be headings representing the hierarchical structure of the document or specific

    points such as pages, notes, sidebars, etc.</dd>

<dt id="dt_11"><a name="d-implied">IMPLIED</a></dt>

  <dd id="dd_11">When used in definitions of XML element attributes, means that the attribute is optional and that no default value is supplied.  See <a href="#d-fixed">FIXED</a> and <a href="#d-required">REQUIRED</a>.</dd>

<dt id="dt_12"><a name="d-inform">Informative</a></dt>

  <dd id="dd_12">Supplying background or explanation. Contrast with <em><a href="#d-norm">Normative</a></em>.</dd>

<dt id="dt_13"><a name="d-locnav">Local navigation</a></dt>

  <dd id="dd_13"><!-- 2004-04-06 MM Added mention of time jumps -->Movement within a document at a granularity finer than that provided by

    the <a href="#d-ncx">NCX</a>. For example, navigation by paragraph or sentence,

    or within a table or nested list. Precise local navigation can be controlled

    by the <a href="#d-tcf">textual content file</a> or the <a href="#d-smil">SMIL</a>

    file(s); the granularity is limited by the degree to which the textual content

    file has been marked up or the level to which synchronization has been applied

    in the <a href="#d-smil">SMIL</a> file(s). Time-based movement through a document

    (e.g., fast-forward and rewind as on an analog cassette, or time jumps by specified intervals) may also be implemented.</dd>

<dt id="dt_14"><a name="d-manifest">Manifest</a></dt>

  <dd id="dd_14">A component of the Package File, the <em>Manifest</em> lists all files included

    in the <a href="#d-dtb">DTB</a>.</dd>

<dt id="dt_15"><a name="d-may">May</a></dt>

  <dd id="dd_15">In normative sections, the word <em>may</em> means that a course of action is optional.</dd>

<dt id="dt_16"><a name="d-medunit">Media Unit</a></dt>

  <dd id="dd_16">A single object on which a <a href="#d-dtb">DTB</a> is stored for distribution

    to the <a href="#d-reader">reader</a>. For example, a single CD-ROM disk.</dd>

  <dt id="dt_17"><a name="d-must">Must</a></dt>

  <dd id="dd_17">In normative sections, the word <em>must</em> is to be interpreted as a mandatory

    requirement on the content or implementation. The term <em><a href="#d-shall">shall</a></em>

    has the same definition as <em>must</em>.</dd>  <dt id="dt_18"><a name="d-ncx">NCX</a></dt>

  <dd id="dd_18">The <em>Navigation Control file for <a href="#d-xml">XML</a> applications</em>

    (<em>NCX</em>) provides the reader efficient and flexible access to the hierarchical

    structure of a <a href="#d-dtb">DTB</a> as well as direct access to selected

    elements such as page numbers, notes, figures, etc.</dd>

<dt id="dt_19"><a name="d-norm">Normative</a></dt>

  <dd id="dd_19">Setting forth requirements that must be met to establish conformance with this standard; or providing recommendations or optional courses of action.  For recommended or optional features, conformance is not dependent on the fact of implementation, but, if implemented, that implementation is as prescribed in this standard. Contrast with <em><a href="#d-inform">Informative</a></em>.

    Notes within a normative section may be informative.</dd>

<dt id="dt_20"><a name="d-oebf">OEBF</a></dt>

  <dd id="dd_20">The Open eBook Forum&#8482; <a href="#OEBF">[OEBF]</a> is an organization formed

    to create and maintain standards and promote the successful adoption of electronic

    books. The <em>Open eBook Publication Structure Version 1.2</em> provides

    a specification for representing the content of a book when it is converted

    from print to electronic form. This <a href="#d-dtb">DTB</a> standard uses

    a subset (the Package File) of that specification.</dd>

<dt id="dt_21"><a name="d-opf">OPF</a></dt>

  <dd id="dd_21">Open eBook Forum Package File. See <em><a href="#d-pacfile">Package File</a></em>.</dd>

<dt id="dt_22"><a name="d-pacfile">Package File</a></dt>

  <dd id="dd_22">The <em>Open eBook Forum Package File</em> (OPF) is an <a href="#d-xml">XML</a>

    file conforming to the oebpkg12.dtd that contains administrative information

    about the <a href="#d-dtb">DTB</a>, the files that comprise it, and how these

    files interrelate.</dd>

<dt id="dt_23"><a name="d-playback">Playback</a></dt>

  <dd id="dd_23">With regard to implementations, <em>playback</em> refers to the methods

    used to render the <a href="#d-dtb">DTB</a> content. <em>Playback</em> may

    include audio, Braille, large print, and synthetic speech as appropriate for

    the content and as supported by the playback system.</dd>

  <dt id="dt_24"><a name="d-playsys">Playback System</a></dt>

  <dd id="dd_24">The hardware/software platform that renders the contents of a <a href="#d-dtb">DTB</a>

    to a <a href="#d-reader">reader</a>. Synonymous with <em>Player</em>.</dd>

<dt id="dt_25"><a name="d-player">Player</a></dt>

  <dd id="dd_25">See <em><a href="#d-playsys">Playback System</a></em>.</dd>

<dt id="dt_26"><a name="d-reader">Reader</a></dt>

<dd id="dd_26">The person reading the digital talking book.  Synonymous with <em>User</em>.</dd>

<dt id="dt_27"><a name="d-required">REQUIRED</a></dt>

  <dd id="dd_27">When used in definitions of XML element attributes, means that the attribute must always be provided. See <a href="#d-fixed">FIXED</a> and <a href="#d-implied">IMPLIED</a>.</dd>

<dt id="dt_28"><a name="d-shall">Shall</a></dt>

  <dd id="dd_28">See <em><a href="#d-must">Must</a></em></dd>

<dt id="dt_29"><a name="d-should">Should</a></dt>

  <dd id="dd_29">In normative sections, the word <em>should</em> means that a course of action is recommended but not required.</dd>

  <dt id="dt_30"><a name="d-smil">SMIL</a></dt>

  <dd id="dd_30">The Synchronized Multimedia Integration Language <a href="#ref-SMIL">

[SMIL]</a> is a  W3C recommendation (SMIL 2.0) used in this standard to control the synchronized presentation of content in multiple media.</dd>

<dt id="dt_31"><a name="d-spine">Spine</a></dt>

  <dd id="dd_31">A component of the Package File, the <em>Spine</em> lists in default reading

    order the <a href="#d-smil">SMIL</a> files included in the <a href="#d-dtb">DTB</a>.</dd>

<dt id="dt_32"><a name="d-targetpop">Target population</a></dt>

  <dd id="dd_32">The <em>target population</em> consists of blind, visually impaired, physically handicapped, learning-disabled, and otherwise print-disabled readers.</dd>

  <dt id="dt_33"><a name="d-tcf">Textual Content File</a></dt>

  <dd id="dd_33">The content of the subject document in a character set specified by ISO/IEC

    10646 <a href="#ISO10646">[ISO 10646]</a> to which <a href="#d-xml">XML</a>

    markup valid to the <a href="#d-dtbook">DTBook</a> <a href="#d-dtd">DTD</a>

    has been applied.</dd>

<dt id="dt_34"><a name="d-tsm">TSM</a></dt>

  <dd id="dd_34">Time-scale modification varies playback rate (both slower and faster than real time) while maintaining constant pitch.</dd>

<dt id="dt_35"><a name="d-uri">URI</a></dt>

  <dd id="dd_35">A <em>Uniform Resource Identifier</em> is a compact string of characters

for identifying resources:  documents, images, audio files, etc.  Within

a DTB, URIs are most likely to appear as attribute values for various

XML elements, used as a way of identifying other documents or files

either in whole or part.  For the purposes of this specification, URIs

must adhere to the syntax defined in RFC 2396 <a href="#RFC2396">[RFC 2396]</a>.  A <em><a href="#d-uri">URI</a></em> may include a <a href="#d-fragid">fragment

    identifier</a> suffix beginning with "#" that matches some named

    anchor in the target document. See <em><a href="#d-fragid">Fragment Identifier</a></em>.</dd>

<dt id="dt_36"><a name="d-user">User</a></dt>

  <dd id="dd_36">See <em><a href="#d-reader">Reader</a></em>.</dd>

<dt id="dt_37"><a name="d-xml">XML</a></dt>

  <dd id="dd_37">The Extensible Markup Language <a href="#XML">[XML]</a> is a standardized language for marking up files containing structured information.</dd>

  <dt id="dt_38"><a name="d-xsl">XSL</a></dt>



  <dd id="dd_38">The Extensible Stylesheet Language is a series of recommendations by the Worldwide

    Web Consortium that describes how <a href="#d-xml">XML</a> documents can

    be transformed and rearranged [<a href="#d-xslt">XSLT</a>], then formatted

    <a href="#XSL">[XSL]</a> for screen, handheld device, paper, or audio presentation.</dd>

<dt id="dt_39"><a name="d-xslt">XSLT</a></dt>

  <dd id="dd_39">A language for transforming <a href="#d-xml">XML</a> documents into other XML documents. <a href="#XSLT">[XSLT]</a>

    is designed for use as part of XSL. See <em><a href="#d-xsl">XSL</a></em>.</dd>

</dl>



<p id="para_15n"><a href="#toc">Contents</a></p>



<h2 id="h2_8"><a name="Strategy">1.3 Strategy</a></h2>

<p class="sstatus">(This section is informative.)</p>



<p id="para_16">This standard is based primarily on a variety of widely used standards and specifications, including several from the World Wide Web Consortium and the Open eBook Forum&#8482;.  Wherever applicable and appropriate standards or specifications existed

they were used.  The use of these specifications and technologies is intended to promote a fast and consistent adoption of this standard for the target population, while encouraging its extension into mainstream use.</p>



<p id="para_16n"><a href="#toc">Contents</a></p>



<h2 id="h2_9">1.4 <a name="Access">Accessibility Issues</a></h2>

<p class="sstatus">(This section is informative.)</p>

<p id="para_17">Digital Talking Book files, streams, transformation processes, and <a href="#d-player">player</a>s

  have been designed to present their content to people with a wide range of abilities

  and disabilities. They are designed to allow presentation in forms other than

  conventional print, due to the inaccessibility of printed documents to these

  <a href="#d-user">users</a>. It is in the best interest of users that, to the greatest extent possible, files, streams, transformation processes, and players make information

  available in as many presentation modes as practical, including human-narrated

  audio, Braille, synthesized speech, large

  print with <a href="#d-user">user</a>-specifiable size and text re-wrapping for players with visual display,

  and text and audio synchronization and other enhancements for persons

  with learning disabilities. Users will also be greatly benefited if controls on players are readily usable by people with a wide range of manual dexterity.</p>

<p id="para_18">During the development of this standard, an advisory document, <a href="#Playfeat">DTB

  Playback Device Features List,</a> was created. Although it is not a <a href="#d-norm">normative</a>

  part of this standard, player developers will find useful

  accessibility concepts embodied in it.</p>

<p id="para_19">In addition to the provisions of this standard, valuable supplemental information

  is available from the guidelines and techniques produced

  by the Worldwide Web Consortium's Web Accessibility Initiative. At this time,

  these documents include:</p>

<ul id="ul_23">

<li id="li_135"><a href="#WCAG">Web Content Accessibility Guidelines</a>,</li>

<li id="li_136"><a href="#ATAG">Authoring Tool Accessibility Guidelines</a>, and</li>

<li id="li_137"><a href="#UAAG">User Agent Accessibility Guidelines</a>.</li>

</ul>

<p class="sstatus">(This section is normative.)</p>

<p id="para_20"> Not all modes of presentation will be available in all

  players and documents, but it is strongly recommended that multiple equivalent

  presentations be made available to users whenever possible. Historically, products

  marketed to specific user groups with disabilities have sometimes proven unusable.

  Not all players need to be <a href="#d-access">accessible</a> to all target

  groups, but any device compliant with this standard <a href="#d-must">must</a>

  be accessible to the target group for which it is advertised. It is also strongly

  recommended that DTB production tools and processes be made accessible to persons

  with disabilities.</p>



<p id="para_20n"><a href="#toc">Contents</a></p>



<h2 id="h2_10"><a name="Rel">1.5 Relationship to Other Specifications</a></h2>

<p class="sstatus">(This section is normative.)</p>

<p id="para_21">This standard is based on the specific versions of the standards and specifications referenced herein, which are used as defined except as noted by this document. Any refinement or replacement of a referenced specification by a newer or different version is not directly applicable to this standard. Conformance to this standard is based on the versions of the standards and specifications in effect at the time of this writing.

</p>

<h3 id="h3_8"><a name="Uni">1.5.1 Relationship to Unicode</a></h3>

<p class="sstatus">(This section is normative.)</p>

<p id="para_22">Playback systems must support at least UTF-8 and UTF-16 encodings. See section 2.2 of the XML specification <a href="#XML">[XML]</a>.

</p>



<p id="para_22n"><a href="#toc">Contents</a></p>



<h2 id="h2_11">1.6 <a name="Patents">Patent Rights</a></h2>

<p class="sstatus">(This section is informative.)</p>



<p id="para_23">Implementation of this standard may involve the use of one or more inventions covered by patent rights. It is believed that all companies claiming such rights have agreed to grant a license under such rights as they hold on reasonable and nondiscriminatory terms and conditions to any applicant.

</p>

    <p id="para_24">Producers of DTB systems or any component thereof are responsible for obtaining the appropriate licenses for any and all technology they use that is defined by the relevant standards and specifications referenced by this standard. There may be applicable patents of which this standards committee is unaware; it is the responsibility of the implementer to ensure that the implementation is non-infringing.

    </p>	

<!-- Editorial revision April 21, 2007 by KK

   removed "section 14," from link text, moved period into link text for consistency

-->

    <p id="para_25">Issues surrounding the protection of intellectual property embodied in the works distributed as digital talking books are discussed in section 14, "<a href="#DRM">Digital Rights Management.</a>"

</p>

<p id="para_25n"><a href="#toc">Contents</a></p>



<h2 id="h2_12">1.7 <a name="Maint">Maintenance Agency</a></h2>

<p class="sstatus">(This section is informative.)</p>

<p id="para_26">The maintenance agency designated in <a href="#MaintDes">Appendix

2</a> will be responsible for reviewing and acting upon suggestions for modifications to this standard.  Questions concerning the implementation of this standard and requests for information should be sent to the maintenance agency.</p>



<!--

<p id="para_27">A list of errata, proposed changes, and maintenance activities related to this standard will be maintained at http://www.loc.gov/nls/z3986/2005/errata.html.</p>

-->

<p id="para_27">A list of errata, proposed changes, and maintenance activities related to this standard will be maintained at <a href="http://www.daisy.org/z3986/2005/errata.html">http://www.daisy.org/z3986/2005/errata.html</a>.</p>



<p id="para_27n"><a href="#toc">Contents</a></p>



<h1 id="h1_5"><a name="Over">2. Overview</a></h1>

<p class="sstatus">(This section is informative.)</p>

<p id="para_28"><!-- jp 2004-03-10[Removed last sentence of paragraph id=para_28]-->A digital talking book (DTB) is a collection of electronic files

arranged to present information to the target population via alternative media,

namely, human or synthetic speech, refreshable Braille, or visual display, e.g.,

large print. When these files are created and assembled into a DTB in accordance

with this standard, they make possible a wide range of features such as rapid,

flexible navigation; bookmarking and highlighting; keyword searching; spelling

of words on demand; and user control over the presentation of selected items

(e.g., footnotes, page numbers, etc.). Such features enable readers with visual

and physical disabilities to access the information in DTBs flexibly and

efficiently, and allow sighted users with learning or reading disabilities to

receive the information through multiple senses. For a full discussion of these

capabilities, see the "<a

href="#Navfeat">Document

Navigation Features List" [Navigation Features]</a>, the user requirements

document on which this standard was based. A document written during the

development of this standard, <a

href="#Theory">Theory

Behind the DTBook DTD [DTBook Theory]</a>, also describes the navigational

capabilities of a DTB in some detail. The content of DTBs will range from audio

alone, through a combination of audio, text, and images, to text alone.

</p>



<p id="para_29">DTB players will also be produced with a variety of capabilities. The simplest

  might be portable devices with audio-only capabilities. More complex portable

  players could include text-to-speech capabilities as well as audio output for

  recorded human speech. The most comprehensive playback systems are expected

  to be PC-based, supporting visual and audio output, text-to-speech capability,

  and output to a Braille display. The <a href="#Playfeat">Playback Device Features

  List [Player Features]</a> mentioned above presents the committee's priorities

  for a range of functions across three types of playback devices.</p>



<p id="para_30">The files comprising a DTB fall into ten categories, as described below:</p>

<dl id="dl_2">

  <dt id="dt_40"><a href="#d-pacfile">Package File</a></dt>

  <dd id="dd_40">The Package File, drawn from the Open eBook Publication Structure 1.2,

    contains administrative information about the DTB and the files that comprise

    it. A valid <a href="#d-xml">XML</a> version 1.0 file, it contains a set of

    metadata describing the DTB, a list (the <em><a href="#d-manifest">manifest</a></em>)

    of the files that make up the DTB, and a <em><a href="#d-spine">spine</a></em>

    that defines the default reading order of the document. See section 3, "<a href="#OPF">Package

    File</a>."</dd>

  <dt id="dt_41"><a href="#d-tcf">Textual Content File</a></dt>

  <dd id="dd_41">A DTB can contain part or all of the text of the document as

    an XML 1.0 file marked up in accordance with the document type definition

    (<a href="#d-dtd">DTD</a>)

    defined for this standard, <a href="#d-dtbook">dtbook.dtd</a>. (See <a href="#DTBookDTD">Appendix

    1</a>.) The textual content file

    enables properly-configured playback devices to spell words on demand, carry

    out keyword searches, and permit finely-grained navigation. It can also be

    accessed directly via refreshable Braille display, synthetic speech, or screen-enlarging

    software. See section 4, "<a href="#Text">Content Format for Text</a>."</dd>



  <dt id="dt_42">Audio Files</dt>

<dd id="dd_42">A DTB can include human or synthetic speech recordings of the document embodied in audio files encoded in one of a specified group of audio formats.  Section 5, "<a href="#Audio">Audio File Formats</a>," presents the formats specified by this standard.</dd>



<dt id="dt_43">Image Files</dt>

<dd id="dd_43">In addition to text and audio, DTBs can include images that can be presented on players with visual displays.  Section 6, "<a href="#Image">Image File Formats</a>," lists the formats specified by this standard.</dd>



<dt id="dt_44">Synchronization Files</dt>

  <dd id="dd_44">To synchronize the different media files of a DTB during playback,

    this standard specifies the use of the World Wide Web Consortium's (W3C)

    Synchronized Multimedia Integration Language (<a href="#d-smil">SMIL</a>), <a href="#ref-SMIL">SMIL

    2.0</a> version, an XML 1.0 application. The DTB SMIL files define a sequence

    of media events. During each event, text elements and corresponding audio

    clips as well as any additional visual elements are presented simultaneously.

    DTB players use the synchronization information to both access points in

    the audio presentation and to track, during audio playback, the corresponding

    position in the textual content file. This standard uses a subset of the

    full <a href="#ref-SMIL">SMIL 2.0</a> specification. See section 7, "<a href="#SMIL">Synchronization

    of Media Files</a>," for discussion of these issues and <a href="#DTBookDTD">Appendix

    1</a>  for the DTD information.</dd>



  <dt id="dt_45">Navigation Control File</dt>

  <dd id="dd_45">The DTB system supports two modes of navigation, global and

    local. <a href="#d-globalnav">Global

    navigation</a> -- movement by structure (chapter, section, subsection) and

    by other selected points such as pages, figures, or notes -- is effected

    through the Navigation Control file for XML applications (<a href="#d-ncx">NCX</a>).

    The NCX presents a dynamic view of the document's hierarchical structure,

    allowing the user to move through the document in large steps corresponding

    to its major divisions or in progressively smaller steps down to a limit

    set by the document's detail. Text, audio, and image elements present to

    the user the document's headings, and id-based links point to the SMIL presentation

    at the corresponding locations. <a href="#DTBookDTD">Appendix 1</a> contains

    information about the  DTD for the NCX. Local, more finely-grained,

    navigation is not handled by the NCX but is enabled through the textual content

    file or SMIL file(s) or through time-based movement through the audio presentation,

    depending on the document and on the player. See section 8, "<a href="#NCX">Navigation

    Control File (NCX)</a>,"

    and <a href="#DTBookDTD">Appendix 1</a>, "NCX DTD" for specifications related

    to the NCX.</dd>



  <dt id="dt_46">Bookmark/Highlight File</dt>

<dd id="dd_46">This standard supports user-set, exportable bookmarks and highlights to which text and audio notes can be applied. Specifications for the XML 1.0 file for portable bookmarks and highlights are presented in section 9, "<a href="#Bkmk">Portable Bookmarks and Highlights</a>" and <a href="#DTBookDTD">Appendix

    1</a>, "DTD

  for Portable Bookmarks and Highlights."</dd>



<dt id="dt_47">Resource File</dt>

<dd id="dd_47">The resource file contains or references various text segments, audio clips, and/or images that provide alternative representations of navigational information -- for example, feedback on the user's current location in the document.  It supplies information normally presented in a print book via typographical clues.  See section 10, "<a href="#Resource">Resource File</a>," and <a href="#DTBookDTD">Appendix

    1</a>, "DTD

  for Resource File" for file specifications.</dd>



<dt id="dt_48">Distribution Information File</dt>

  <dd id="dd_48">Given the great size of audio files even when heavily compressed,

    it will be common for large books to span several <a href="#d-medunit">media

    unit</a>s.

    Section 11, "<a href="#Dist">Packaging Files for Distribution</a>," describes

    how the "distInfo" file maps the location of each SMIL file to a specific

    media unit, e.g., disk 1 of 3. It also explains how, when several books are

    distributed on the same media unit, the distInfo file stores information

    about each book for presentation to the reader. <a href="#DTBookDTD">Appendix

    1</a>, "Distribution Information

    DTD," presents the document type definition for "distInfo"

    files.</dd>



  <dt id="dt_49">Presentation Styles</dt>

<dd id="dd_49">Section 12, "<a href="#Style">Presentation Styles</a>," discusses how the presentation of a DTB in various media can be controlled through the use of optional style sheets.</dd>

</dl>

<p id="para_30n"><a href="#toc">Contents</a></p>



<h1 id="h1_6">3. <a name="OPF">The DTB Package File</a></h1>

<p class="sstatus">(This section is informative.)</p>



<p id="para_31">The Package File, drawn from the Open eBook Forum&#8482; (<a href="#d-oebf">OEBF</a>) Publication Structure

  1.2, contains administrative information about the DTB, the files that comprise

  it, and how these files interrelate. This section, drawn largely from the Publication

  Structure, provides only a brief summary of the function of each section with

  an example illustrating how it is applied to the DTB. See section 2 of

  the full <a href="#OEBF">OEBF</a> Publication Structure 1.2 for complete details

  on the Package File.</p>



<p id="para_32">The Publication Structure describes the major parts of the Package File as follows:</p>

<blockquote>

<ul id="ul_25">

<li id="li_140"><strong>PACKAGE IDENTITY</strong> - a unique identifier for the OEB publication as a whole.</li>

<li id="li_141"><strong>METADATA</strong> - Publication metadata (title, author, publisher, etc.).</li>

<li id="li_142"><strong>MANIFEST</strong> - A list of files (documents, images, style sheets, etc.) that make up the publication.  The manifest also includes fallback declarations for files of types not supported by this specification.</li>

<li id="li_143"><strong>SPINE</strong> - An arrangement of documents providing a linear reading order.</li>

<li id="li_144"><strong>TOURS</strong> - A set of alternate reading sequences through the publication, such as selective views for various reading purposes, reader expertise levels, etc.</li>

<li id="li_145"><strong>GUIDE</strong> - A set of references to fundamental structural features of the publication, such as table of contents, foreword, bibliography, etc.</li>

</ul>

</blockquote>





<p id="para_33"><!-- TM 2004-07-23 added required @unique-identifier to example -->Here is an informal outline of the package file:</p>



<pre><samp id="smp_1">&lt;?xml version="1.0"?&gt;

&lt;!DOCTYPE package PUBLIC "+//ISBN 0-9673008-1-9//DTD OEB 1.2 Package//EN"

	"oebpkg12.dtd"&gt;



&lt;package xmlns="http://openebook.org/namespaces/oeb-package/1.0/"

	unique-identifier="foo"&gt;

         &lt;metadata&gt;...&lt;/metadata&gt;

         &lt;manifest&gt;...&lt;/manifest&gt;

         &lt;spine&gt;...&lt;/spine&gt;

         &lt;tours&gt;...&lt;/tours&gt;

         &lt;guide&gt;...&lt;/guide&gt;

&lt;/package&gt;

</samp></pre>



<p class="sstatus">(This section is normative.)</p>



<p id="para_34">A DTB conforming to this standard must include exactly one Package File which

  must be a valid XML 1.0 document conforming to the <a href="#OEBF">OEBF</a> Publication Structure 1.2 package DTD (oebpkg12.dtd) and its associated entity reference (oeb12.ent).

  The full specification, DTD, and entity reference for the <a href="#OEBF">OEBF</a>

  package file are available for download from the OEBF site <a href="#OEBF">[OEBF]</a>. The Package File must be named with the extension

  ".<a href="#d-opf">opf</a>".  If a DTB spans multiple media units, the identical Package File must be  present on each media unit.</p>



<p id="para_35">A Package File conforming to this standard must comply with all aspects of

  section 2 of the <a href="#OEBF">OEBF</a> Publication Structure 1.2, with

  the following two exceptions:</p>

<ul id="ul_24">

  <li id="li_138">1. Section 2.3.1 does not apply. Specifically, there is no requirement on

    DTB authors or playback devices to implement the fallback mechanism for files

    that are not of the <a href="#OEBF">OEBF</a> core MIME media types.</li>

<li id="li_139">2. Section 2.4 of the Publication Structure states that the <code>spine</code> element may refer only to <code>item</code> elements of media type <em>text/x-oeb1-document</em>.  In DTB applications, the <code>spine</code> must only reference <code>item</code>s of media type <em>application/smil</em>.</li></ul>



<p id="para_35_2"><!--MG 30 March, 2002  New para.-->

  Namespace (<code>xmlns</code>) attributes and their values, although declared as #FIXED,

  must be explicitly specified in the document instance. Entity declarations must occur

  in the internal DTD subset. See further section 16.1 "<a href="#FileConform">General File Conformance

  Requirements</a>."

</p>



<h2 id="h2_13">3.1 <a name="PkgId">Package Identity</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_37">The <code>package</code> must include a value for its <code>unique-identifier</code>

  attribute. This is required because more than one <code>dc:Identifier</code> may

  be present in a DTB's Package File metadata and the <code>unique-identifier</code>

  specifies which <code>dc:Identifier</code> element provides the package's primary

  identifier. The value of <code>unique-identifier</code> must match the id attribute

  of one and only one <code>dc:Identifier</code> element, which is a descendant of

  the <code>package</code> element.</p>



<p id="para_38">The primary identifier of the DTB must be globally unique.</p>



<p class="sstatus" id="h3_16">(This example is informative.)</p>

<!-- NB20050622 Added class attribute to above heading (h3_16) and converted to <p> -->

<p id="para_39">Example 3.1:</p>

<pre><samp id="smp_2">

&lt;?xml version="1.0"?&gt;

&lt;!DOCTYPE package PUBLIC "+//ISBN 0-9673008-1-9//DTD OEB 1.2 Package//EN"

	"oebpkg12.dtd"&gt;

&lt;package xmlns="http://openebook.org/namespaces/oeb-package/1.0/" unique-identifier="uid"&gt;

    &lt;metadata&gt;

        &lt;dc-metadata...&gt;

            &lt;dc:Identifier id="uid" scheme="DTB"&gt;uk-rnib-db02006

            &lt;/dc:Identifier&gt;

....

&lt;/package&gt;

</samp></pre>



<h2 id="h2_14">3.2 <a name="PubMed">Publication Metadata</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_40">This portion of the Package File contains the information about a DTB that would normally be found in a library catalog record.  It includes data about the DTB itself (e.g., title, author, producer, format, and narrator) as well as information about the source publication (usually a print book) such as publisher, edition, copyright statement, etc. </p>



<p id="para_41">The Package File must contain exactly one <code>metadata</code> element, which must contain

  one and only one <code>dc-metadata</code> element holding Dublin Core <a href="#DC">[DC]</a>

  metadata and must contain supplemental metadata in an <code>x-metadata</code> element.

  The <code>x-metadata</code> element must contain at least one instance of the <code>meta</code>

  element, which uses <code>name</code> and <code>content</code> attributes to define

  its value. (See section 3.2.3, "<a href="#XMeta">X-Metadata</a>.")</p>



<h3 id="h3_18">3.2.1 <a name="DCM">Dublin Core Metadata</a></h3>

<p class="sstatus">(This section is normative.)</p>





<p id="para_42">The use of Dublin Core metadata within a compliant DTB must conform to the

  following description from the <a href="#OEBF">OEBF</a> Publication Structure

  1.2:</p>

<blockquote>

  <p id="para_43">The <code>dc-metadata</code> element contains specific publication-level metadata as defined

    by the Dublin Core initiative (<a href="http://purl.org/dc/">http://purl.org/dc/</a>).

    The descriptions below are included for convenience, and the Dublin Core's

    own definitions take precedence (see <a href="http://www.ietf.org/rfc/rfc2413.txt">http://www.ietf.org/rfc/rfc2413.txt</a>).</p>

  <p id="para_44">The <code>dc-metadata</code> element can contain any number of instances of any Dublin

    Core elements. Dublin Core element names begin with the "dc:" prefix followed

    by a leading uppercase letter. Dublin Core metadata elements may occur in

    any order; in fact, multiple instances of the same element type (multiple

    <code>dc:Creator</code> elements, for example) can be interspersed with other <code>metadata</code>

    elements without change of meaning.</p>

  <p id="para_45"><!-- TM 2004-07-22 dc namespace version is 1.1 --><!-- MM March 19, 2004  Changed "metadata" to "dc-metadata"-->For upwards compatibility, the element <code>dc-metadata</code> in an OEB package is required

    to have an attribute of </p>

	 

  <p><code>xmlns:dc="http://purl.org/dc/elements/1.1/"</code></p>

  <p>and</p>

  <p><code>xmlns:oebpackage="http://openebook.org/namespaces/oeb-package/1.0/".</code></p>



</blockquote>



<p id="para_46">Following are brief definitions of the Dublin Core elements. See

  the Publication Structure and the <a href="#DC">Dublin Core</a> itself for more complete descriptions.

  The attributes <code>xml:lang</code> and <code>id</code> can be applied to all "dc:..." elements.

  Additional attributes can be used with several elements as detailed below. Note

  that all Dublin Core element types may be repeated (occur more than once) within

  <code>dc-metadata</code>.</p>



<ul id="ul_26">

  <li id="li_146">dc:Title

    <ul id="ul_27"><li id="li_147"><!-- 2004-07-07 MM added subtitles -->Content: The title of the DTB, including any subtitles.</li>

<li id="li_148">Occurrence: Required</li></ul></li>

  <li id="li_149">dc:Creator

    <ul id="ul_28"><li id="li_150">Content: Names of primary author or creator of the intellectual content of the publication.</li>

<li id="li_151">Occurrence: Optional (not all documents have known creators) - recommended.</li>

<li id="li_152">Added attributes:

   <ul id="ul_29"><li id="li_153">role -- (optional) The function performed by the creator (e.g., author, editor).  See Publication Structure for details on normative list of values.</li>

   <li id="li_154">file-as -- (optional) A normalized form of the contents suitable for machine processing.</li>

   </ul></li>

</ul></li>

  <li id="li_155">dc:Subject

    <ul id="ul_30"><li id="li_156">Content: The topic of the content of the publication.</li>

<li id="li_157">Occurrence: Optional - recommended.</li></ul></li>

  <li id="li_158">dc:Description

    <ul id="ul_31"><li id="li_159">Content: Plain text describing the publication's content.</li>

<li id="li_160">Occurrence: Optional</li></ul></li>

  <li id="li_161">dc:Publisher

    <ul id="ul_32"><li id="li_162">Content: The agency responsible for making the DTB available.  (Compare <code>dtb:sourcePublisher</code> and <code>dtb:producer</code>.)</li>

<li id="li_163">Occurrence: Required</li></ul></li>

  <li id="li_164">dc:Contributor

    <ul id="ul_33">

      <li id="li_165">Content: A party whose contribution to the publication is secondary

        to those named in <code>dc:Creator</code>.</li>

<li id="li_166">Occurrence: Optional</li>

<li id="li_167">Added attributes:

   <ul id="ul_34"><li id="li_168">role -- (optional) The function performed by the contributor (e.g., translator, compiler).  See Publication Structure for details on normative list of values.</li>

   <li id="li_169">file-as -- (optional) A normalized form of the contents suitable for machine processing.</li>

   </ul></li>

 </ul></li>

  <li id="li_170">dc:Date

    <ul id="ul_35"><li id="li_171">Content: Date of publication of the DTB.  (Compare <code>dtb:sourceDate</code> and dtb:producedDate.)  In format from <a href="#ISO8601">[ISO8601]</a>; the syntax is YYYY[-MM[-DD]] with a mandatory 4-digit year, an optional 2-digit month, and, if the month is present, an optional 2-digit day of month.</li>

<li id="li_172">Occurrence: Required</li>

<li id="li_173">Added attributes:

   <ul id="ul_36">

          <li id="li_174">event -- (optional) Significant occurrence related to publication

            of the DTB. Allows repetition of <code>dc:Date</code> to describe, for example,

            multiple revisions. Best practice is to use <code>dtb:revision</code> and <code>dtb:revisionDate</code>

            instead.</li>

   </ul></li>

   </ul></li>

  <li id="li_175">dc:Type

    <ul id="ul_37"><li id="li_176">Content: The nature of the content of the DTB (i.e., sound, text, image).  Best practice is to draw from the Dublin Core's enumerated list <a href="#DC-Type">[DC-Type]</a>.</li>

<li id="li_177">Occurrence: Optional</li></ul></li>

  <li id="li_178">dc:Format

    <ul id="ul_38">

      <li id="li_179">Content: The standard or specification to which the DTB was produced.

        Values of <code>dc:Format</code> in a DTB conforming to this standard are valid only

        if they read "ANSI/NISO Z39.86-2005".</li>

<li id="li_180">Occurrence: Required</li></ul></li>

  <li id="li_181">dc:Identifier

    <ul id="ul_39"><li id="li_182">Content: A string or number identifying the DTB.  One instance of this element, that which is referenced from the <code>package</code> <code>unique-identifier</code> attribute, must include an id.</li>

<li id="li_183">Occurrence: Required</li>

<li id="li_184">Added attributes:

   <ul id="ul_40"><li id="li_185">scheme -- (optional) The name of the system or authority that generated or assigned the identifier.  For example, "DOI", "ISBN", or "DTB".</li>

   </ul></li></ul></li>

  <li id="li_186">dc:Source

    <ul id="ul_41"><li id="li_187">Content: A reference to a resource (e.g., a print original, ebook, etc.) from which the DTB is derived.  Best practice is to use the ISBN when available.</li>

<li id="li_188">Occurrence: Optional - recommended.</li></ul></li>

  <li id="li_189">dc:Language

    <ul id="ul_42"><li id="li_190">Content: Language of the content of the publication.  An <a href="#RFC3066">[RFC 3066]</a> language code. For Sweden: "sv" or "sv-SE"; for UK: "en" or "en-GB"; for US: "en" or "en-US"; etc.</li>

<li id="li_191">Occurrence: Required</li>

</ul></li>

  <li id="li_192">dc:Relation

    <ul id="ul_43"><li id="li_193">Content: A reference to a related resource.</li>

<li id="li_194">Occurrence: Optional</li></ul></li>

  <li id="li_195">dc:Coverage

    <ul id="ul_44"><li id="li_196">Content: The extent or scope of the content of the resource.  Not expected to be used for DTBs.</li>

<li id="li_197">Occurrence: Optional</li></ul></li>

  <li id="li_198">dc:Rights

    <ul id="ul_45"><li id="li_199">Content: Information about rights held in and over the DTB.  (Compare dtb:sourceRights.)</li>

<li id="li_200">Occurrence: Optional</li></ul></li>

</ul>



<h3 id="h3_20">3.2.2 <a name="DTBID">DTB ID Scheme</a></h3>

<p class="sstatus">(This section is informative.)</p>



<p id="para_47">Various schemes are available for identifying digital publications.  In the DTB domain, the requirements for an identifier are simply to identify the publication in a manner that is highly likely to be globally unique.  A major purpose of the uniqueness requirement is to prevent filename collisions among bookmark files.</p>



<p id="para_48">To meet this base requirement, a simple DTB id scheme might be used.  A DTB identifier under this scheme consists of a hyphen-separated string consisting of a two-letter country code drawn from <a href="#ISO3166">[ISO 3166]</a>, an agency code unique within its country, and an identifier unique within the agency.  For example, us-afb-x12345.</p>



<p id="para_49">This scheme will provide a simple solution to the uniqueness requirement that will serve DTB-publishers' needs in the short term.  In the longer term, as the requirements of a global library of alternative format materials become more important, other more sophisticated mechanisms will doubtless be employed.</p>



<h3 id="h3_22">3.2.3 <a name="XMeta">X-Metadata</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_50">The following names were developed for the DTB application to supply information that the Dublin Core element set does not cover. These names may only appear within the <code>x-metadata</code> containing element, as values of the <code>name</code> attribute on the <code>meta</code> element.  Each <code>x-metadata</code> name below is shown as either "Repeatable" (it may be used more than once) or "Not repeatable".  Content producers may introduce other metadata within <code>x-metadata</code> besides those listed below, if needed. However, metadata names shall not begin with the  prefix "dtb:" unless defined in this standard. Players must not fail when encountering unknown metadata but must,

    at a minimum, ignore it.</p>



<ul id="ul_46">



<li id="li_201">dtb:sourceDate

<ul id="ul_47"><li id="li_202">Content: Date of publication of the resource (e.g., a print original, ebook, etc.) from which the DTB is derived.  In format from <a href="#ISO8601">[ISO8601]</a>; the syntax is YYYY[-MM[-DD]] with a mandatory 4-digit year, an optional 2-digit month, and, if the month is present, an optional 2-digit day of month.</li>

<li id="li_203">Occurrence: Optional - recommended.  Not repeatable.</li>

</ul></li>



<li id="li_204">dtb:sourceEdition

<ul id="ul_48"><li id="li_205">Content: A string describing the edition of the resource (e.g., a print original, ebook, etc.) from which the DTB is derived.</li>

<li id="li_206">Occurrence: Optional - recommended.  Not repeatable.</li></ul></li>





<li id="li_207">dtb:sourcePublisher

<ul id="ul_49">

      <li id="li_208">Content: The agency responsible for making available the resource (e.g.,

        a print original, ebook, etc.) from which the DTB is derived. (Compare

        dc:Publisher.)</li>

<li id="li_209">Occurrence: Optional - recommended.  Not repeatable.</li></ul></li>





<li id="li_210">dtb:sourceRights

<ul id="ul_50">

      <li id="li_211">Content: Information about rights held in and over the resource (e.g.,

        a print original, ebook, etc.) from which the DTB is derived. (Compare

        dc:Rights.)</li>

<li id="li_212">Occurrence: Optional - recommended.  Not repeatable.</li></ul></li>



<li id="li_213">dtb:sourceTitle

<ul id="ul_51">

      <li id="li_214">Content: The title of the resource (e.g., a print original, ebook, etc.)

        from which the DTB is derived. To be used only if different from dc:Title.</li>

<li id="li_215">Occurrence: Optional.  Not repeatable.</li></ul></li>



<li id="li_215a"><!-- TM 2004-05-14 - Put dtb:multimediaType back with ref to StructGuide.  MM 2004-05-14 - Added list of allowable values. --> dtb:multimediaType

    <ul id="ul_51a"><li id="li_215b">Content: One of the six types of DTB defined in the Structure Guidelines <a href="#StructGuide">[StructGuide]</a>.  Values are: audioOnly, audioNCX, audioPartText, audioFullText, textPartAudio, textNCX.</li>

    <li id="li_215c">Occurrence: Required. Not repeatable.</li></ul></li>



<li id="li_216"><!-- TM 2004-05-14 Added do not include ncx, resource, or distInfo only refs -->

<!-- jp 2004-03-10[Replaced description of dtb:multimediaType with dtb:multimediaContent]--> dtb:multimediaContent

    <ul id="ul_52"><li id="li_217">Content: Summary of the general types of media used in the content of this DTB.  Value is a comma-delimited list of the top-level media types defined in <a href="#RFC2046">[RFC2046]</a>.  In the current version of this standard, the only applicable types will be <code>audio</code>, <code>text</code>, and <code>image</code>. Media types that are referenced only by NCX, Resource File, or distInfo must not be listed here.</li>

    <li id="li_218">Occurrence: Required. Not repeatable.</li></ul></li>



<li id="li_219">dtb:narrator

<ul id="ul_53"><li id="li_220">Content: Name of the person whose recorded voice is embodied in the DTB.</li>

<li id="li_221">Occurrence: Optional - recommended.  Repeatable.</li></ul></li>



<li id="li_222">dtb:producer

<ul id="ul_54">

      <li id="li_223">Content: Name of the organization/production unit that created the DTB.

        (Compare dc:Publisher.)</li>

<li id="li_224">Occurrence: Optional.  Repeatable.</li></ul></li>



<li id="li_225">dtb:producedDate

<ul id="ul_55">

      <li id="li_226">Content: Date of first generation of the complete DTB, i.e. Production completion date.  (Compare dc:Date.)  In format from <a href="#ISO8601">[ISO8601]</a>; the syntax is YYYY[-MM[-DD]] with a mandatory 4-digit year, an optional 2-digit month, and, if the month is present, an optional 2-digit day of month.</li>

<li id="li_227">Occurrence: Optional.  Not repeatable.</li></ul></li>



<li id="li_228">dtb:revision

<ul id="ul_56"><li id="li_229">Content: Non-negative integer value of the specific version of the DTB.  Incremented each time the DTB is revised.</li>

<li id="li_230">Occurrence: Optional.  Not repeatable.</li></ul></li>



<li id="li_231">dtb:revisionDate

<ul id="ul_57"><li id="li_232">Content: Date associated with the specific <code>dtb:revision</code>.  In format from <a href="#ISO8601">[ISO8601]</a>; the syntax is YYYY[-MM[-DD]] with a mandatory 4-digit year, an optional 2-digit month, and, if the month is present, an optional 2-digit day of month.</li>

<li id="li_233">Occurrence: Optional.  Not repeatable.</li></ul></li>



<li id="li_231a">dtb:revisionDescription

<ul id="ul_57a"><li id="li_232a">Content: A string describing the changes introduced in a  specific dtb:revision.</li>

<li id="li_233a">Occurrence: Optional.  Not repeatable.</li></ul></li>



<li id="li_234">dtb:totalTime

<ul id="ul_58"><li id="li_235">Content: Total playing time of all SMIL files comprising the content of the DTB.  Value is a Clock Value from SMIL 2.0 Timing and Synchronization Module <a href="#ref-SMIL">[SMIL].</a>  See section

        7.7, "<a href="#Clock">Media Clipping and Clock Values</a>."</li>

<li id="li_236">Occurrence: Required.  Not repeatable.</li>

</ul></li>



<li id="li_237">dtb:audioFormat

<ul id="ul_59"><li id="li_238">Content: A string describing the format in which the audio files in the DTB file set are written.  If more than one audio format is used, this element may be repeated.  </li>

<li id="li_239">Occurrence: Optional, recommended for audio DTBs.  Repeatable.</li>

<li id="li_240">Formats specified in <a href="#Audio">section 5</a> are shown below, followed by the normative value for dtb:audioFormat:<br />

        <a href="#MPEG">MPEG</a>-4 AAC: MP4-AAC<br />

        <a href="#MPEG">MPEG</a>-1/2 Layer III: MP3<br />

Linear PCM,RIFF WAVE format:   WAV<br />

(Values are not case-sensitive.)</li></ul></li>

</ul>



<p class="sstatus" id="h3_24">(This example is informative.)</p>

<!-- NB20050622 Added class attribute to above h3 (h3_24) and converted tp <p> -->

<p id="para_51"><!-- TM 2004-07-23 dc namespace version is 1.1 --><!-- jp 2004-03-10[Replaced dtb:multimediaType with dtb:multimediaContent]-->Example 3.2:</p><pre><samp id="smp_3">

....

&lt;metadata&gt;

     &lt;dc-metadata xmlns:dc="http://purl.org/dc/elements/1.1/"

     xmlns:oebpackage="http://openebook.org/namespaces/oeb-package/1.0/"&gt;

          &lt;dc:Title&gt;Revised Standards and Guidelines of

          Service for the Library of Congress Network of Libraries for the

          Blind and Physically Handicapped 1995&lt;/dc:Title&gt;

          &lt;dc:Subject&gt;library information networks&lt;/dc:Subject&gt;

          &lt;dc:Subject&gt;libraries and the physically

          handicapped--standards--U.S.&lt;/dc:Subject&gt;

          &lt;dc:Subject&gt;libraries and the

          blind--standards--U.S.&lt;/dc:Subject&gt;

          &lt;dc:Identifier id="uid"

          scheme="DTB"&gt;us-nls-db00001&lt;/dc:Identifier&gt;

          &lt;dc:Identifier

          scheme="DOI"&gt;10.1000/DX44998&lt;/dc:Identifier&gt;

          &lt;dc:Creator role="aut"&gt;American Library Association.

          Association of Specialized and Cooperative Library

          Agencies&lt;/dc:Creator&gt;

          &lt;dc:Publisher&gt;National Library Service for the Blind

          and Physically Handicapped, Library of Congress&lt;/dc:Publisher&gt;

          &lt;dc:Date&gt;2000-06-22&lt;/dc:Date&gt;

          &lt;dc:Source&gt;0-8389-7797-9&lt;/dc:Source&gt;

          &lt;dc:Language&gt;en&lt;/dc:Language&gt;

          &lt;dc:Format&gt;ANSI/NISO Z39.86-2005&lt;/dc:Format&gt;

          &lt;dc:Description&gt;A document developed to improve library

          service for blind and physically disabled persons by providing a

          tool for assessing the current status of those services

          and for developing long-range plans.&lt;/dc:Description&gt;

     &lt;/dc-metadata&gt;

     &lt;x-metadata&gt;

          &lt;meta name="dtb:sourceDate" content="1995" /&gt;

          &lt;meta name="dtb:sourcePublisher"

          content="American Library Association" /&gt;

          &lt;meta name="dtb:sourceRights" content="copyright 1995,

          American Library Association" /&gt;

          &lt;meta name="dtb:narrator" content="Lowenstein, Ralph" /&gt;

          &lt;meta name="dtb:producer"

          content="American Foundation for the Blind" /&gt;

          &lt;meta name="dtb:multimediaContent" content="audio" /&gt;

          &lt;meta name="dtb:multimediaType" content="audioNCX" /&gt;

          &lt;meta name="dtb:totalTime" content="06:22:34.143" /&gt;

     &lt;/x-metadata&gt;



&lt;/metadata&gt;

....

</samp></pre>



<h2 id="h2_15">3.3 <a name="Manifest">Manifest</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_52"><!-- TM 2004-06-02 - Added requirements that manifest

list only allowed files and only DTB files -->The

<code>manifest</code>, which is a child of the <code>package</code>

element, must contain a complete list of all of the files (documents, audio

files, images, style sheets, etc.) that make up a given DTB, including the

package file itself. The <code>manifest</code> shall list only files of

types permitted by this standard. The <code>manifest</code> shall list only

files that are part of the DTB. The distInfo file and any associated audio

<code>changeMsgs</code> (or any other files listed <em>only</em> in the

distInfo file) are not considered part of the DTB and thus shall not be

listed (See section 11, "<a

href="#Dist">Packaging Files for Distribution</a>.") The Resource File and

any associated media files are considered part of the DTB and thus shall be

listed.  Each file is

referenced by an <code>item</code> element. Each <code>item</code> must

have an <code>href</code> attribute that is the <a href="#d-uri">URI</a> of

the referenced file and is unique within

   the manifest. This URI must not include <a href="#d-fragid">fragment

identifier</a>s;

   if relative, it is interpreted as relative to the package file itself.

Further,

   any relative URIs contained within an XML file listed in the manifest

are considered

   to be relative to the referring file.</p>



<p id="para_53"><!-- TM 2004-06-02 - Changed fallback sentence

--><!-- mm: 2004-04-01 Dropped references to MIME types, which are

covered in new para_53a-->In addition, each <code>item</code> must have a

<code>media-type</code> attribute containing

   the MIME media type of the file, and an <code>id</code> attribute. The

<code>id</code>

   is used primarily when a <code>manifest</code> <code>item</code> is referenced by the

<code>spine</code>.

   The <code>manifest</code> may also include fallback declarations to

allow players to choose among alternative presentation formats. (See <a

href="#OEBF">OEBF</a> Publication Structure

   for details.) Support for the fallback mechanism is not required by this

standard.

   The NCX entry in the Package File manifest must have an id value equal

to "ncx".

   The Resource File entry in the Package File manifest must have an id

value equal

   to "resource". The order of <code>item</code>

   elements within the <code>manifest</code> is not significant.</p>



  <p id="para_53a"><!-- jp - 2004-03-29 Major changes related to MIME types, plus addition of specs on file extensions.-->

All <code>media-type</code> attribute values must conform to <a href="#RFC2046">RFC 2046</a>.  In addition, the <code>media-type</code> attribute must have the value of the IANA-registered MIME media type for that type of file, if one exists (see <a href="#RFC2048">RFC 2048</a> for information on the registration process for MIME media types).  If no MIME media type has been registered for the file type, then the MIME media type recommended in the applicable standard for that file type must be used.  If there is no standard MIME media type for the file, then an appropriate "x-" MIME media type must be used, following the rules of <a href="#RFC2046">RFC 2046</a>.  In the case of WAV files, this standard mandates the use of the media type value "audio/x-wav".

For files defined by this standard that are XML documents, this standard defines mandatory, unique media types following <a href="#RFC3023">RFC 3023</a>:  "application/x-dtbncx+xml" for the NCX, "application/x-dtbresource+xml" for the resource file, and "application/x-dtbook+xml" for textual content files.

</p>

<p id="para_53b"><!-- See comment above -->

In addition, producers must use particular file name extensions for all the different kinds of files mentioned in this standard (see table below).  These values are case-sensitive.  In cases where the file name extension and MIME media type values do not agree, players should consider the MIME media type to take precedence.

</p>

<p id="para_53c"><!-- See comment above -->

The following table summarizes the required file name extensions and MIME media type values for all the different kinds of files that may appear in the package manifest:

</p>

<table

summary="This table lists each kind of DTB file, the required file name extension and the MIME media type for each">

<thead>

<tr><th>Kind of file</th><th>File name extension</th><th>MIME media type</th></tr>

</thead>

<tbody>

<tr><td>MPEG-4 AAC audio</td><td>.mp4</td><td>audio/mpeg4-generic</td></tr>

<tr><td>MPEG-1/2 Layer III (MP3) audio</td><td>.mp3</td><td>audio/mpeg</td></tr>

<tr><td>Linear PCM - RIFF WAVE format audio</td><td>.wav</td><td>audio/x-wav</td></tr>

<tr><td>JPEG image</td><td>.jpg</td><td>image/jpeg</td></tr>

<tr><td>PNG image</td><td>.png</td><td>image/png</td></tr>

<tr><td>Scalable Vector Graphics (SVG) image</td><td>.svg</td><td>image/svg+xml</td></tr>

<tr><td>Cascading Style Sheets (CSS)</td><td>.css</td><td>text/css</td></tr>

<tr><td>SMIL files</td><td>.smil</td><td>application/smil</td></tr>

<tr><td>Package file</td><td>.opf</td><td>text/xml</td></tr>

<tr><td>DTD and DTD fragments (entities or modules)</td><td>[no requirement]</td><td>application/xml-dtd</td></tr>

<tr><td>Navigation Control File (NCX)</td><td>.ncx</td><td>application/x-dtbncx+xml</td></tr>

<tr><td>Textual content files (dtbook)</td><td>.xml</td><td>application/x-dtbook+xml</td></tr>

<tr><td>Resource file</td><td>.res</td><td>application/x-dtbresource+xml</td></tr>

</tbody>

</table>



<p class="sstatus" id="h3_26">(This example is informative.)</p>

<!-- NB20050622 Added class attribute to above h3 (h3_26) and converted to <p> -->



<p id="para_54"><!-- jp 2004-03-10[Removed reference to multimediaType in descriptions of examples]-->

A sample <code>manifest</code> for a DTB with audio, structure,

and text follows:</p>



<p id="para_55"><!-- jp - 2004-03-29 Modified per MIME changes-->Example 3.3:</p><pre><samp id="smp_4">

....

&lt;manifest&gt;



     &lt;item id="opf" href="rs.opf" media-type="text/xml" /&gt;

     &lt;item id="text" href="rs.xml" media-type="text/x-dtbook+xml" /&gt;

     &lt;item id="text_style" href="dtbbase.css" media-type="text/css" /&gt;

     &lt;item id="ncx" href="rs.ncx" media-type="application/x-dtbncx+xml" /&gt;

     &lt;item id="ncx_style" href="ncx16.css" media-type="text/css" /&gt;

     &lt;item id="SMIL" href="rs.smil" media-type="application/smil" /&gt;

     &lt;item id="foreword" href="rs_fwdx.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="standards" href="rs_stdx.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="appendices" href="rs_app.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="index" href="rs_index.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="fig_01" href="fig1.png" media-type="image/png" /&gt;

     &lt;item id="resource" href="rs.res" media-type="application/x-dtbresource+xml" /&gt;

     &lt;item id="resource_audio" href="res.mp3" media-type="audio/mpeg" /&gt;





&lt;/manifest&gt;

....

</samp></pre>

<p id="para_56"><!-- jp 2004-03-10[Removed reference to multimediaType in descriptions of examples]-->

Here is a <code>manifest</code> for an audio-only version of the

above DTB where separate SMIL files were created for

each segment of the book.</p>



<p id="para_57"><!-- jp - 2004-03-29 Modified per MIME changes-->Example 3.4:</p><pre><samp id="smp_5">

....

&lt;manifest&gt;

     &lt;item id="opf" href="rs.opf" media-type="text/xml" /&gt;

     &lt;item id="ncx" href="rs.ncx" media-type="application/x-dtbncx+xml" /&gt;

     &lt;item id="foreword" href="rs_fwdx.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="standards" href="rs_stdx.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="appendices" href="rs_app.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="index" href="rs_index.mp3" media-type="audio/mpeg" /&gt;

     &lt;item id="SMIL1" href="rsfwd.smil" media-type="application/smil" /&gt;

     &lt;item id="SMIL3" href="rsapp.smil" media-type="application/smil" /&gt;

     &lt;item id="SMIL4" href="rsind.smil" media-type="application/smil" /&gt;

     &lt;item id="SMIL2" href="rsstd.smil" media-type="application/smil" /&gt;



&lt;/manifest&gt;

....

</samp></pre>



<h3 id="h326"><!-- MG 2004-04-19 Major rewrite. Replaced table of values with EBNF description-->  3.3.1 <a name="Allowed-Char">Allowed Characters in File Names</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="fnchars">To assure interoperability when transporting DTBs between various locales and platforms, characters in file names must be restricted to the <em>alphanum</em> definition of <a href="#RFC2396">[RFC2396]</a>, and a subset of the RFC2396 <em>mark</em> definition. This effectively reduces allowed characters to [A-Za-z0-9._-].</p>



<p id="allowedchars">The following definition "filename" identifies in EBNF form which characters are allowed in file names. The definition "foldername" identifies allowed characters in folder names, when folders are used in path specifications of URIs that reference members of the DTB file set.</p>



<pre><samp id="ebnffnchars">

 digit ::=  [#x0030-#x0039]

 lowalpha ::= [#x0061-#x007A]

 upalpha ::=  [#x0041-#x005A]

 alphanum ::= digit|lowalpha|upalpha

 hyphen ::= [#x002D]

 underscore ::= [#x005F]

 period ::= [#x002E]

 filename ::= (alphanum|hyphen|underscore|period)+

 foldername ::= (alphanum|hyphen|underscore)+

</samp></pre>



<p class="sstatus">(This section is informative.)</p>



<p id="para_57b">These restrictions should be regarded as an interim solution. As soon as a global recommendation or standard for internationalized resource identification is established, consideration for adoption will be a high priority.</p>



<h3 id="h326b"><!-- MG 2004-04-19 New section. -->3.3.2 <a name="Case">Case Sensititivty of URIs</a></h3>

<p class="sstatus" id="para_57c">(This section is normative.)</p>

<!-- NB20050622 Added class attribute to above para (57c)-->

<p id="para_57d">All URIs referencing fileset members are case sensitive.</p>

<p id="para_57e">Fileset members must not be given names that result in multiple identical names following case normalization.</p>



<h2 id="h2_16">3.4 <a name="Spine">Spine</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_58">The <code>spine</code>, a child of the <code>package</code> element, shall

  consist of a list of one or more <code>itemref</code> elements whose order defines

  the default linear reading order for the DTB. Each <code>itemref</code> must

  contain an <code>idref</code> which points to the <code>id</code> of a SMIL file

  listed in the <code>manifest</code>. Only SMIL files can be referenced by <code>itemref</code>s in the <code>spine</code>. The <code>itemref</code>s must be listed in the <code>spine</code> in the order in which the SMIL files are to be presented. A player must consult the

  <code>spine</code> when it reaches the end of a SMIL file to determine which file

  to render next.</p>



<p class="sstatus" id="h3_28">(The following examples are informative.)</p>

<!-- mg20050527 replaced this h3 with the above para: <h3 id="h3_28">(The following examples are informative.)</h3>-->



<p id="para_59">The first

of the following examples shows the <code>spine</code> that corresponds to the first of the two

<code>manifest</code> examples above.<br />

Example 3.5:</p>



<pre><samp id="smp_6">

&lt;spine&gt;



     &lt;itemref idref="SMIL" /&gt;



&lt;/spine&gt;

</samp></pre>



<p id="para_60">The following <code>spine</code> matches the second <code>manifest</code> example above.  The correct

reading order is presented here.  Note that it does not match the order of files in the

<code>manifest</code> where order is not significant.</p>

<p id="para_61">Example 3.6:</p>





<pre><samp id="smp_7">

&lt;spine&gt;



      &lt;itemref idref="SMIL1" /&gt;

      &lt;itemref idref="SMIL2" /&gt;

      &lt;itemref idref="SMIL3" /&gt;

      &lt;itemref idref="SMIL4" /&gt;



&lt;/spine&gt;



</samp></pre>



<h2 id="h2_17">3.5 <a name="Tours">Tours</a></h2>



<p class="sstatus">(This section is informative.)</p>



<p id="para_62">The <code>tours</code> element is an optional child of the <code>package</code> element.

  The <a href="#OEBF">OEBF</a> Publication Structure describes <code>tours</code>

  as follows: "Much as a tour guide might assemble points of interest into a set

  of sightseers' tours, a content provider may assemble selected parts of a publication

  into a set of tours to enable convenient navigation. ... Reading systems may

  use tours to provide various access sequences to parts of the publication, such

  as selective views for various reading purposes, reader expertise levels, etc."

  Because of inherent differences between the structures of a DTB and the <a href="#OEBF">OEBF</a>

  <code>tours</code>, it is not feasible to implement <code>tours</code> in a DTB prepared

  in accordance with this standard. If a producer wishes to provide the functionality

  described above, it may partially achieve it by producing customized <code>navList</code>s

  in the NCX.</p>



<p class="sstatus">(This section is normative.)</p>



<p id="para_63">Compliant players are not required to support <code>tours</code>.</p>



<h2 id="h2_18">3.6 <a name="Guide">Guide</a></h2>



<p class="sstatus">(This section is informative.)</p>



<p id="para_64">As specified in the <a href="#OEBF">OEBF</a> Publication Structure, the <code>guide,</code>

  a child of the <code>package</code> element, lists the key structural features

  of the DTB, such as the table of contents, introduction, bibliography, etc.

  to enable playback devices to provide convenient access to them. Because DTBs

  include a mandatory NCX that satisfies a more rigorous and detailed access requirement,

  the <code>guide</code> is not expected to be used in DTBs.</p>



<p class="sstatus">(This section is normative.)</p>



<p id="para_65">Compliant players are not required to support <code>guide</code>s.</p>



<p id="para_66"><a href="#toc">Contents</a></p>

<h1 id="h1_7">4. <a name="Text">Content Format for Text</a></h1>

<h2 id="h2_19">4.1 <a name="TextIntro">Introduction</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_67"><!--MG 30 March, 2004  Added requirements re namespaces and entity declarations and reference re filename extension.-->

  This standard defines an <a href="#XML">XML</a> 1.0 Document Type Definition

  -- DTBook -- for markup of the textual content files of books and other publications

  presented in digital talking book format. To be compliant with this standard,

  a textual content file of a DTB must be a valid <a href="#XML">XML</a> file

  conforming to dtbook-2005-1.dtd, which can be found in <a href="#DTBookDTD">Appendix

  1</a>, "DTBook

  DTD." See Section 3.3, "<a href="#para_53c">Manifest</a>"

for filename extension requirements.  The <code>version</code> and <code>xmlns</code> attributes on the <code>dtbook</code> element must be explicitly specified in the document instance, using values drawn from the above-named DTD.  Entity declarations must occur in the internal DTD subset.  See further section 16.1 "<a href="#FileConform">General File Conformance Requirements</a>."</p>



<p id="para_68">A DTB that includes textual content will, in most cases, contain only one textual content file.  However, when necessary (with a very large book, for example), a DTB can contain multiple textual content files, each of which must be valid to the DTBook DTD.</p>



<p id="para_69">DTB content producers may extend the base DTD by including one or more new

  elements or full modules for special situations. To remain conformant with this

  standard, such extensions of the DTD must employ the mechanisms specified by

  <a href="#XML">XML</a> 1.0. See section 4.2.2, "<a href="#ModExt">Modular Extension of the DTD</a>."</p>



<p id="para_69a"><!-- 2004-04-13 MM New para., requiring two new metadata items. 2004-07-08 MM Added recommendation that full range of DC metadata be included. -->

	

<!-- Editorial revision April 21, 2007 by KK

   missing quote added after Package Identity

-->

Two

  metadata items must be present in the &lt;head&gt; of compliant textual content

  files, contained in a &lt;meta&gt; element: dtb:uid and dc:Title.  dtb:uid

  is the globally unique identifier for the DTB. The value is the same as that

  of the <code>dc:Identifier</code> element referenced by the package file's

  unique-identifier element. See section 3.1, "<a href="#PkgId">Package Identity</a>.&quot;

  dc:Title contains the title of the DTB. Inclusion of the full range of applicable

  Dublin Core elements is recommended, to make a DTBook document more useful

  as stand-alone content.

</p>



<h2 id="h2_20">4.2 <a name="Using">Using the DTBook Element Set</a></h2>

<p class="sstatus">(This section is informative.)</p>



<p id="para_70">A document developed during the creation of this standard, <a href="#Theory">Theory Behind the DTBook DTD [DTBook Theory]</a>, discusses the rationale underlying the DTBook element set and the benefits it provides to digital talking book applications.</p>



<p id="para_71">Two documents external to this standard provide detailed information on the use of the element set.  First, an expanded version of the DTD, in HTML format, (see <a href="#Dtbookhtm">[DTBook HTML]</a>) provides full detail on each element, describing where it can be used

and which elements can be used within it, along with an expanded list of attributes.</p>



<p id="para_72">Second, a comprehensive set of guidelines for applying DTBook markup is

  available from <a href="#DAISY">the DAISY Consortium</a>. These Structure Guidelines

  <a href="#StructGuide">[StructGuide]</a> describe the correct application of

  the DTBook element set, emphasize the importance of capturing the structure

  of the text content, and provide detailed examples of the use of all DTBook

  elements.</p>



<p id="para_73">The DTBook element set has considerable application outside of the digital

  talking book as well. It was designed to enable the production of documents

  in a variety of accessible formats. At least one U.S. Braille translation software

  package has implemented a facility that imports DTBook documents and automatically

  translates and formats them in Grade 2 Braille. It is expected that similar

  automated processes will be developed for converting properly marked-up documents

  into large print and for rendering DTBook documents in Braille, synthetic speech,

  and large print "on the fly." Finally, an attribute called "showin"

  is incorporated in the DTBook element set to control the display of selected

  segments of a DTBook document. For example, descriptions of a graph might vary

  between Braille and large print editions; "showin" could allow only

  the appropriate version to show in each edition, although both would be present

  in the DTBook document.</p>



<p id="para_74">This standard does not mandate the degree of markup to be applied to a textual content file.  However, the richer the markup, the greater the functionality available to the reader.</p>



<p id="para_75">For more information on XML 1.0 markup and DTD usage, see the W3C XML site <a href="#XML">[XML]</a>.</p>



<h3 id="h3_35">4.2.1 <a name="SMILMark">DTBook Markup Related to SMIL</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_76">To ensure efficient player operation with DTBs containing textual content files, the <code>smilref</code> attribute must be present and non-empty for each element in the textual content file referenced by a SMIL file. The <code>smilref</code> value shall normally be the URI of the SMIL time container (<code>par</code> or <code>seq</code>) containing the media object that references a given element.  However, in a text-only DTB consisting of a sequence of text media objects, <code>smilref</code> contains the URI of the media object that references the element.  The <code>smilref</code> attribute permits the DTB player to resume SMIL-based playback following text-based navigation, full-text searches, etc. </p>



<h3 id="h3_37">4.2.2 <a name="ModExt">Modular Extension of the DTD</a></h3>

<p class="sstatus">(This section is informative.)</p>



<p id="para_77">The DTBook DTD includes a base set of elements for use in marking up a broad range of material.  Additional modules containing elements for specialized applications such as poetry, plays, dictionaries, mathematics, etc. can be "invoked" from within a DTBook document when needed, as described below.</p>



<p id="para_78">A DTBook document is an <a href="#XML">XML</a> application. Therefore

  it should begin with the XML declaration identifying the version of XML, and

  the optional character set encoding. (See <a href="#DTBookDTD">Appendix 1</a>, "DTBook

  DTD"

  for more information.)<br />

  <br />

  <code>

&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</code></p>



<p id="para_79">This is followed by the document type declaration:</p>

<!-- mg20050626: changed example to preferred form -->

<pre><samp id="smp_8">

&lt;!DOCTYPE dtbook PUBLIC "-//NISO//DTD dtbook 2005-1//EN"

  "http://www.daisy.org/z3986/2005/dtbook-2005-1.dtd"&gt;

</samp></pre>



<p id="para_80">For discussion of other ways of expressing the DOCTYPE, see section

  2.3 of the &quot;DTBook DTD&quot; listed in <a href="#DTBookDTD">Appendix 1</a>.</p>



<p id="para_81">A book can invoke other DTDs or modules to augment the DTBook DTD by adding instructions in square brackets before the concluding "&gt;" of the document type declaration.  Such instructions in square brackets are called the "internal subset of declarations."  For example:</p>



<!-- mg20050626: changed example to preferred form -->

<pre><samp id="smp_9">

&lt;!DOCTYPE dtbook PUBLIC "-//NISO//DTD dtbook 2005-1//EN"

  "dtbook-2005-1.dtd"

        [

            &lt;!ENTITY % dramaModule SYSTEM "drama.dtd" &gt;

            %dramaModule;

            &lt;!ENTITY % externalblock "| drama"&gt;

            &lt;!ENTITY % externalinline "| stagedir"&gt;

        ]&gt;

</samp></pre>



<p id="para_82">The first line of the internal subset declares an entity known as "dramaModule" and provides the URI where that module can be found.  The second line invokes this entity, that is "brings it into" the current document, just as the DOCTYPE declaration invoked the base DTD (dtbook-2005-1.dtd).  The third line declares the entity "% externalblock" and gives it the value "drama".  Since dtbook-2005-1.dtd contains an entity of the same name, and the internal subset overrules the base (external) DTD (dtbook-2005-1) in areas of conflict, everywhere in dtbook-2005-1 where "%externalblock;" appears (that is, wherever block elements are allowed), the value "drama" is added.  Since <code>drama</code> is the root element in the drama module, the full drama module can be used there.  Similarly, the last line effectively allows the element <code>stagedir</code> to be used anywhere "%externalinline;" is allowed in dtbook-2005-1 (that is, wherever inline elements can be used).</p>



<p id="para_83">More than one module may be needed and included in a book.  In the following example, both a poetry and drama module are invoked, as well as one inline element (<code>stagedir</code>) from the drama module.</p>

<pre><samp id="smp_10">

        [

            &lt;!ENTITY % poemModule "http://www.xyz.org/poem.dtd" &gt;

            %poemModule;

            &lt;!ENTITY % dramaModule "http://www.xyz.org/drama.dtd" &gt;

            %dramaModule;

            &lt;!ENTITY % externalblock "| poem | drama" &gt;

            &lt;!ENTITY % externalinline "| stagedir"&gt;

        ]&gt;

</samp></pre>

<p id="para_83n">See section 3 of the &quot;DTBook DTD" (see <a href="#DTBookDTD">Appendix

    1)</a> for a more detailed discussion of this issue.</p>



<p id="para_84n"><a href="#toc">Contents</a></p>



<h1 id="h1_8">5. <a name="Audio">Audio File Formats</a></h1>



<h2 id="h2_22">5.1 <a name="AudFormats">Distribution Formats</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_85"><!-- dp and mm, 3/24/04.  Removed mention of filename extensions.-->A set of audio file formats is listed below.  A compliant

audio player must be capable of decoding at least one of the formats listed.

It is strongly recommended that players be able to decode all listed

formats.  Content compliant with this standard must be delivered in one of

the formats below, or any mixture of them.

</p>



<p id="para_86">It is permissible for parts of a single book to be encoded in different audio formats. For example, a producer may choose to encode a lengthy bibliography at a lower bit rate or with a different codec than the main body of the book. Players must support transitions between differently encoded sections smoothly. There is no restriction on the granularity of these parts, i.e. they may occur at any point in the SMIL presentation.

</p>

<p id="para_87">Support for multi-channel rendering is not required.  Stereo signals must be recognized and rendered at least in monaural format.

</p>

<p id="para_88">A compliant DTB player that provides audio output should be capable of decoding the following audio formats:</p>

<ul id="ul_60"><!-- dp and mm, 3/24/04.  Removed mention of filename extensions and added crossref to section 3.3.-->

  <li id="li_241">MPEG-4 AAC <a href="#MPEG">[MPEG]</a> - <a

href="#MPEG">ISO/IEC 14496-3</a>.

<br />

  </li>

  <li id="li_242">MPEG-1/2 Layer III (MP3) <a href="#MPEG">[MPEG]</a> - <a

href="#MPEG">ISO/IEC

    11172-3</a>, <a href="#MPEG">ISO/IEC 13818-3</a>.<br />

  </li>

<li id="li_243">Linear PCM - RIFF WAVE format <a

href="#RIFFWAV">[RIFFWAV]</a>. <br />

Players are required to handle monaural WAVE files with single "fmt" and

"data" subchunks only, and are not required to support any other RIFF media

types.</li>

</ul>

<p id="para_88a">See Section 3.3, "<a href="#para_53c">Manifest</a>" for

filename extension requirements.</p>

<p id="para_89">While the ISO standards for MP3 and AAC require support for variable bit rate playback, players compliant with this standard are only required to support constant bit rate playback.

</p>

<p id="para_90">Players  must support sample rates of 44.1, 22.05, and 11.025 kHz at a depth of 16 bits per sample.  Compressed audio must be encoded such that the output sampling rate is restricted to one of the above three rates.</p>



<h2 id="h2_23">5.2 <a name="AudNotes">Formats for Audio Notes</a></h2>

<p class="sstatus">(This section is normative.)</p>

<p id="para_91">Audio players capable of recording and exporting audio notes for bookmarks and highlights must support encoding in the following format or one of the formats specified in section 5.1.  Audio players capable of importing bookmarks and highlights must support decoding of the following format.

</p>

<ul id="ul_61">

<li id="li_244">ADPCM - ITU-T G.726 <br />

Communication quality at 40,32,24 or 16 kbps. Encoder and decoder are

simple to implement.  File extension shall be: .726</li>

</ul>



<p id="para_91n"><a href="#toc">Contents</a></p>



<h1 id="h1_9">6. <a name="Image">Image File Formats</a></h1>

<p class="sstatus">(This section is normative.)</p>



<p id="para_92"><!-- dp and mm, 3/24/04.  Removed mention of filename extensions and added crossref to section 3.3.-->Images included in DTBs must be presented

    in one or more of the following formats: JPEG (JFIF V 1.02)

    <a href="#JPEG">[JPEG]</a>, PNG <a href="#RFC2083">[RFC

    2083]</a>, or Scalable Vector Graphics

      <a href="#SVG">[SVG]</a>.  Compliant playback devices

    that support image display must be capable of displaying

    JPEG and PNG; support for SVG is recommended. Appendix 8 of

    the SVG specification addresses accessibility issues.

See Section 3.3, "<a href="#para_53c">Manifest</a>"

for filename extension requirements.</p>



<p id="para_92n"><a href="#toc">Contents</a></p>



<h1 id="h1_10">7. <a name="SMIL">Synchronization of Media Files</a></h1>

<h2 id="h2_24">7.1 <a name="SMILIntro">Introduction</a></h2>



<h3 id="h3_43">7.1.1 <a name="SMILBack">Background</a></h3>

<p class="sstatus">(This section is informative.)</p>



<p id="para_93">The Synchronized Multimedia Integration Language (<a href="#ref-SMIL">SMIL

  2.0</a>) <a href="#ref-SMIL">[SMIL]</a> was developed by the World Wide Web

  Consortium as a standard for definition and playback of multimedia presentations

  over the Internet. SMIL defines the sequence of playback for one or more media

  objects. In the case of DTBs, the primary media objects are audio and textual

  content files; SMIL provides for their parallel and synchronized presentation.

  Any DTB constructed using SMIL, and utilizing content encoded in standard text

  and audio media types, is playable on any device or platform which has implemented

  a SMIL-conformant player of the same or later SMIL version, so long as the necessary

  audio and textual rendering decoders are present and no system for intellectual property protection restricts access.</p>

<p id="para_94">What distinguishes a DTB playback system from a basic SMIL player is the inclusion of specific

navigation and presentational capabilities set out in the user requirements for DTBs (<a href="#Navfeat">[Navigation Features]</a>). These capabilities can use

information from an NCX file, from the textual content, and/or from the SMIL file itself. The key

to this information is the inclusion of unique identifiers within the textual content (when present) and SMIL

files. Audio files are indexed by time-based positions and in themselves contain no embedded

semantic structure. To provide semantic structure to audio content, it is necessary to associate

time-points in the audio file with the corresponding position within the textual content. This is

achieved using SMIL through the pairing of a pointer to a specific position within a textual content file

(referenced by a URI) with its corresponding time position in the

audio content. In the case of the DTB SMIL application, each synchronization point within the

SMIL file is assigned a unique identifier. The presence of these identifiers within both the textual

content and the SMIL allows navigation to occur by several different methods, as determined by

the playback system.</p>



<p id="para_95">SMIL incorporates a control structure called <code>customTest</code>s, which allows SMIL authors to identify by class selected elements of a document (e.g., notes, page numbers, line numbers).  The playback device can then expose to the user the presence of these classes and allow the user to select whether a given class of elements is to be read or skipped over during sequential playback.</p>



<p id="para_95a"><!-- MH 2004-05-17 New paragraph. -->

      The duration of time containers in SMIL presentations may

      be determined by the duration of child media objects and

      time containers, or by recognized events that signal the

      end of a time container. DTB producers may elect to create

      content that incorporates pauses in the presentation to

      allow for users to examine related materials or to work on

      a problem, for example. Users, once they complete the

      related task, will signal that playback can continue by an

      appropriate mechanism in the player user interface.

</p>

    <p id="para_95b"><!-- MH 2004-05-17 New paragraph. MM 2004-06-02 Added mention of specified duration for pauses. -->

      Pauses in sequential presentation are authored by

      specifying a time container with an <code>end</code> attribute value

      that indicates that the container will remain active until

      the occurrence of a user event, such as the pressing of a

      resume or play button, or until the end of a specified duration.

    </p>

    <p id="para_95c"><!-- MH 2004-05-17 New paragraph. MM 2004-06-02 Changed 'will provide' to 'may provide'. -->

      Escapable structures are implemented by a user

      initiated escape event. Structures that are escapable are

      wrapped by a time container that will play until either the

      normal end time of the child time container(s) or the

      occurrence of a user escape event, whichever comes first.

      In this case, the DTB player that supports escapability

      may provide a user interface mechanism for indicating that

      the user has requested to escape from the current

      structure.

    </p>



<p id="para_96">The DTB producer determines granularity of the synchronization events. Synchronization events

can be limited to the primary structural elements (those indicated in the NCX) or can be augmented in books with full

textual content to include synchronization down to paragraph, sentence, or even word level.

The requirement for this level of synchronization is that the textual content includes mark-up

tags for the desired elements and that those elements include unique identifiers that can be

referenced in the SMIL files.</p>



<p id="para_97">The SMIL file for a DTB typically will consist of a sequence of parallel events

  (e.g., text and audio (and possibly image) events occurring simultaneously).

  SMIL represents this structure through the use of the "time containers" <code>seq</code>

  (sequence of media objects) and <code>par</code> (parallel time grouping in which

  multiple media objects play back at the same time). A simple form of DTB SMIL

  file would be as follows, where the three <code>par</code>s shown are played one

  after the other, and the text and audio content referenced in each <code>par</code> are rendered simultaneously:<br /></p>



  <pre><samp id="smp_11">

&lt;smil&gt;

 ...

&lt;seq&gt;

  &lt;par&gt;&lt;text.../&gt;&lt;audio.../&gt;&lt;/par&gt;

  &lt;par&gt;&lt;text.../&gt;&lt;audio.../&gt;&lt;/par&gt;

  &lt;par&gt;&lt;text.../&gt;&lt;audio.../&gt;&lt;img.../&gt;&lt;/par&gt;

&lt;/seq&gt;

....

&lt;/smil&gt;

</samp></pre>





<h3 id="h3_45">7.1.2 <a name="SMILMods">SMIL Modules</a></h3>

<p class="sstatus">(This section is informative.)</p>



<p id="para_98">Synchronization of media objects in this standard is based on the <a href="#ref-SMIL">SMIL

  2.0</a> specification. Developers are requested to reference <a href="#ref-SMIL">SMIL

  2.0</a> <a href="#ref-SMIL">[SMIL]</a> for complete background and details.

  Only a small subset of the SMIL specification is used in this application,

  drawing from the following modules, which are grouped by functional area. Modules

  marked with asterisks are used in whole or in part in this application; the

  others are not used but are included because they are part of a core set

  of modules required for <em>host language conformance</em> under W3C modularization

  guidelines.</p>

<ul id="ul_62">

<li id="li_245">Timing

<ul id="ul_63">

<li id="li_246">*BasicInlineTiming</li>

<li id="li_247">MinMaxTiming</li>

<li id="li_248">SyncbaseTiming</li>

<li id="li_249">EventTiming</li>

<li id="li_250">*BasicTimeContainers</li>

</ul></li>

<li id="li_251">Content Control

<ul id="ul_64">

<li id="li_252">*BasicContentControl</li>

<li id="li_253">*CustomTestAttributes</li>

<li id="li_254">SkipContentControl</li>

</ul>

</li>



<li id="li_255">Layout

<ul id="ul_65">

<li id="li_256">*BasicLayout</li>

</ul>

</li>



<li id="li_257">Linking

<ul id="ul_66">

<li id="li_258">*BasicLinking</li>

<li id="li_259">*LinkingAttributes</li>

</ul>

</li>



<li id="li_260">Media Objects

<ul id="ul_67">

<li id="li_261">*BasicMedia</li>

<li id="li_262">*MediaClipping</li>

</ul>

</li>



<li id="li_263">Metainformation

<ul id="ul_68">

<li id="li_264">*Metainformation</li>

</ul>

</li>



<li id="li_265">Structure

<ul id="ul_69">

<li id="li_266">*Structure</li>

</ul>

</li>

</ul>



<p id="para_99">The modules mentioned above can be combined, using W3C modularization guidelines,

  to form a <em>profile</em> specific to DTB applications. Section 2 of the SMIL

  specification, "The <a href="#ref-SMIL">SMIL 2.0</a> Modules," describes this

  process in detail.</p>



<h2 id="h2_25">7.2 <a name="SMILApp">Application of SMIL to DTBs</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_100">To simplify validation using commonly available parsers and to lessen the complexity

  of determining content models and applicable attribute lists, a <a href="#DTBookDTD">DTB-Specific

  SMIL DTD</a> is included in this standard in <a href="#DTBookDTD">Appendix

  1</a>. This DTD includes only

  those elements and attributes from the modules listed above that are required

  for the DTB application. In addition, it is more restrictive than the SMIL modules

  in that some attributes are required in the DTB application when they are only <a href="#d-implied">implied</a> in the SMIL modules.</p>



<p id="para_101"><!--MG 30 March, 2004 Added requirements re namespaces and entity declarations and reference re filename extensions.-->A compliant DTB must contain at least one SMIL file. All SMIL files included

  in a DTB must be valid <a href="#XML">XML</a> documents conforming to dtbsmil-2005-1.dtd.  See Section 3.3, "<a href="#para_53c">Manifest</a>"

for filename extension requirements.  The xmlns attribute on the <code>smil</code> element must be explicitly specified in the document instance, using the value drawn from the above-named DTD. Entity declarations must occur in the internal DTD subset. See further section 16.1 "<a href="#FileConform">General File Conformance Requirements</a>."</p>



<p id="para_102">Time containers (<code>seq</code>s or <code>par</code>s) within SMIL files must contain

  <code>id</code>s. Media objects (<code>audio</code>, <code>text</code>, and <code>img</code>) may also

  contain <code>id</code>s, although this practice will generally be limited to single-medium

  DTBs. See section 7.4.10, "<a href="#T-O">Text-Only DTBs.</a>"</p>



<p id="para_103">In the textual content file, each segment to be synchronized (e.g., heading,

  paragraph, list item, etc.) must be contained within an element carrying a unique

  id to which the corresponding SMIL segment points. In addition, any textual

  content file element referenced by a SMIL file must include a <code>smilref</code> attribute

  specifying the URI of the time container or media object that references it.

  The <code>smilref</code> value will normally be the URI of the SMIL time container

  containing the media object that references a given element. However, in a text-only

  DTB consisting of a sequence of text media objects, <code>smilref</code> shall contain

  the URI of the referencing media object itself. See section 4.2.1, "<a href="#SMILMark">DTBook

  Markup Related to SMIL.</a>"</p>



<p id="para_105">It is strongly recommended that the SMIL file(s) have a level of granularity matching that of the textual content file.  That is, if the textual content file is marked up to the paragraph level, the SMIL file(s) should include synchronization to the paragraph level.</p>



<p id="para_106">All time offsets in SMIL files (and all other applicable DTB files, e.g., NCX <code>clipBegin</code>/<code>clipEnd</code>, bookmark <code>timeOffset</code>s, etc.), are based on normal play speed.  In order to maintain synchronization, a player must process time offsets independently of actual playback speed.</p>



<h2 id="h2_26">7.3 <a name="SMILElem">SMIL Elements</a></h2>

<p class="sstatus">(This section is informative.)</p>



<p id="para_107">As mentioned above, the DTB application uses only a portion of the elements and attributes that make up the modules in the DTB SMIL Profile.  Playback devices compliant with this standard need support only the following SMIL elements and attributes, which make up the DTB-Specific SMIL DTD.</p>



<ul id="ul_70">

  <li id="li_267"><strong>&lt;smil&gt;</strong><br />

    <strong>Description:</strong> The root element of a <a href="#ref-SMIL">SMIL 2.0</a>

    file is <code>smil</code>. The <code>smil</code> element contains exactly one <code>head</code> and exactly one <code>body</code>.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT smil (head, body) &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;smil&gt;</code>...content...<code>&lt;/smil&gt; </code><br />

    <strong>Attributes:</strong><br />

    <ul id="ul_71">

      <li id="li_269"><strong>%Core.attrib;</strong> See section 7.3.1, "<a href="#CommAtt">Core

        Attributes.</a>"</li>

        <li id="li_269a"><!-- JP 2004-03-31 New attribute --><strong>xmlns (CDATA, FIXED) "http://www.w3.org/2001/SMIL20/":</strong> Specifies the default XML namespace for all elements in SMIL.  See <a href="#XMLNamespaces">[XML-Namespaces]</a> for details on namespaces.  This attribute and its value (given in DTD) must be explicitly specified in the document instance.</li>

      <li id="li_270"><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

    </ul>

    <strong>Valid inside:</strong> None<br />

    <br />



  </li>

  <li id="li_271"><strong>&lt;head&gt;</strong><br />

    <strong>Description:</strong> Contains information not directly related to the temporal

    presentation: metadata (using <code>meta</code> element), optional <code>layout</code>,

    and optional <code>customAttributes</code><!-- LNN 2004-06-24: removed ', in that order' since it is no longer

    relevant-->.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT head (meta*, (layout, meta*)?, (customAttributes,meta*)?)

     &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;head&gt;</code>...content...<code>&lt;/head&gt;</code><br />

    <strong>Attributes:</strong><br />

    <ul id="ul_72">

      <li id="li_272"><strong>%Core.attrib;</strong> See section 7.3.1, "<a href="#CommAtt">Core

        Attributes.</a>"</li>

      <li id="li_273"><strong>xml:lang (NMTOKEN, IMPLIED)</strong></li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;smil&gt; </code><br />

    <br />

  </li>

  <li id="li_274"><strong>&lt;meta&gt;</strong><br />

    <strong>Description:</strong> Contains information describing the SMIL document.<br />

    <strong>Syntax:</strong> <code>&lt;meta</code> ...attributes... <code>/&gt;</code><br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT meta EMPTY &gt;</code><br />

    <strong>Attributes:</strong><br />

    <ul id="ul_73">

      <li id="li_275"><strong>content (CDATA, #IMPLIED)</strong></li>

      <li id="li_276"><strong>name (CDATA, #<a href="#d-required">REQUIRED</a>)</strong></li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;head&gt; </code><br />

    <strong>Comments:</strong> See section 7.5, "<a href="#SMILMeta">SMIL Metadata</a>"

    for normative content. <br />

    <br />

  </li>

  <li id="li_277"><strong>&lt;layout&gt;</strong><br />

    <strong>Description:</strong> Controls (through the <code>region</code> elements it

    contains) where on a visual, audio, or tactile rendering space various producer-defined

    elements, e.g., figures, text, footnotes, etc. are displayed.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT layout (region)+ &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;layout&gt;</code>...content...<code>&lt;/layout&gt;</code><br />

    <strong>Attributes:</strong><br />

    <ul id="ul_74">

      <li id="li_278"><strong>%Core.attrib;</strong> See section 7.3.1, "<a href="#CommAtt">Core

        Attributes.</a>"</li>

      <li id="li_279"><strong>xml:lang (NMTOKEN, IMPLIED)</strong></li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;head&gt;</code><br />

    <strong>Comments:</strong> Syntax is restricted. See section 7.4.6, "<a href="#Layout">Layout

    Syntax</a>" for normative content. <br />

    <br />

  </li>

  <li id="li_280"><strong>&lt;region&gt;</strong><br />

    <strong>Description:</strong> Controls the position, size, and scaling of media objects

    (e.g., text, img).<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT region EMPTY &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;region</code> ...attributes... <code>/&gt;</code><br />

    <strong>Attributes:</strong> <br />

    <ul id="ul_75">

      <li id="li_281"><strong>id (ID, REQUIRED)</strong> Value of <code>region</code> attribute on media

        object references the id on appropriate <code>region</code> element.</li>

      <li id="li_282"><strong>bottom (CDATA, 'auto')</strong> Locates <code>region</code> in display

        space. See <a href="#ref-SMIL">SMIL 2.0</a> for details.</li>

      <li id="li_283"><strong>left (CDATA, 'auto' )</strong> Locates <code>region</code> display space.

        See <a href="#ref-SMIL">SMIL 2.0</a> for details.</li>

      <li id="li_284"><strong>right (CDATA, 'auto') </strong> Locates <code>region</code> in display

        space. See <a href="#ref-SMIL">SMIL 2.0</a> for details.</li>

      <li id="li_285"><strong>top (CDATA, 'auto')</strong> Locates <code>region</code> in display space.

        See <a href="#ref-SMIL">SMIL 2.0</a> for details.</li>

      <li id="li_286"><strong>height (CDATA, 'auto') </strong> Locates <code>region</code> in display

        space. See <a href="#ref-SMIL">SMIL 2.0</a> for details. </li>

      <li id="li_287"><strong>width (CDATA, 'auto')</strong> Locates <code>region</code> in display

        space. See <a href="#ref-SMIL">SMIL 2.0</a> for details.</li>

      <li id="li_288"><strong>fit ((hidden|fill|meet|scroll|slice) 'hidden')</strong> Specifies behavior

        if the intrinsic height and width of a visual media object differ from

        those of the <code>region</code> in which it is displayed. See <a href="#ref-SMIL">SMIL

        2.0</a> for definitions of attribute values.</li>

      <li id="li_289"><strong>backgroundColor (CDATA, IMPLIED)</strong> Sets background color of the

        area of the <code>region</code> that is not covered by the media object(s) being displayed.</li>

      <li id="li_290"><strong>showBackground ((always|whenActive) 'always')</strong> Controls whether

        the <code>backgroundColor</code> of a <code>region</code> is shown when

        no media is being rendered to the <code>region</code>. See <a href="#ref-SMIL">SMIL

        2.0</a> for definitions of attribute values.</li>

      <li id="li_291"><strong>z-index (CDATA, IMPLIED)</strong> Used for control of multilayered displays.</li>

      <li id="li_291a"><!-- MH 2004-04-05 new attribute--><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;layout&gt;</code><br />

    <strong>Comments:</strong> All media objects whose <code>region</code> attribute references

    the <code>id</code> on a given <code>region</code> element will be displayed in that <code>region</code>.

    <br />

    <br />

  </li>

  <li id="li_292"><strong>&lt;customAttributes&gt;</strong><br />

    <strong>Description:</strong> Contains one or more <code>customTests</code> that allow

    the producer to specify kinds of structures that the user can choose to have

    automatically rendered or skipped.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT customAttributes (customTest)+ &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;customAttributes&gt;</code>...content...<code>&lt;/customAttributes&gt;</code><br />

    <strong>Attributes:</strong> <br />

    <ul id="ul_76">

      <li id="li_293"><strong>%Core.attrib;</strong> See section 7.3.1, "<a href="#CommAtt">Core

        Attributes.</a>"</li>

      <li id="li_294"><strong>xml:lang (NMTOKEN, IMPLIED)</strong></li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;head&gt;</code><br />

    <strong>Comments:</strong> See section 7.4.3, "<a href="#Skip">'Skippable' Structures</a>"

    for normative content.<br />

    <br />



  </li>

  <li id="li_295"><strong><a name="custtest">&lt;customTest&gt;</a></strong><br />

    <strong>Description:</strong> Defines the kinds of structures (e.g., page numbers, notes,

    line numbers, etc.) that the user can choose to have presented or skipped

    during normal playback of a DTB. See definition of <code>customTest</code> attribute

    for <code>par</code> and <code>seq</code> below.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT customTest EMPTY &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;customTest</code> ...attributes... <code>/&gt;</code><br />

    <strong>Attributes:</strong><br />

    <ul id="ul_77">

      <li id="li_296"><strong>id (ID, REQUIRED)</strong> Id here serves as a unique identifier referenced

        by a <code>customTest</code> attribute on <code>par</code> or <code>seq</code> in

        <code>body</code> of SMIL. </li>

      <li id="li_297"><strong>class (CDATA, IMPLIED)</strong></li>

      <li id="li_298"><strong>title (CDATA, IMPLIED)</strong></li>

      <li id="li_299"><strong>xml:lang (NMTOKEN, IMPLIED)</strong></li>

      <li id="li_300"><strong>defaultState ((true|false) 'false')</strong> Specifies whether player

        will render (<code>value = true</code>) or skip (<code>value = false</code>)

        the structure during sequential playback. If no value is present, the

        default is false and the content is skipped.</li>

      <li id="li_301"><strong>override ((visible|hidden) 'hidden')</strong> Specifies whether runtime resetting of <code>defaultState</code> should be encouraged (<code>value= "visible"</code>) or discouraged (<code>value = "hidden"</code>).

        See section 7.4.3, "<a href="#Skip">'Skippable' Structures</a>" for normative

        content.</li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;customAttributes&gt;</code><br />

    <br />



  </li>

  <li id="li_302"><strong>&lt;body&gt;</strong><br />

    <strong>Description:</strong> Contains the time containers that define the temporal

    presentation.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT body (par|seq|text|audio|img|a)+ &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;body&gt;</code>...content...<code>&lt;/body&gt;</code><br />

    <strong>Attributes:</strong><br />

    <ul id="ul_78">

<!-- Editorial revision April 21, 2007 by KK

   fixed double periods in <body> Attributes in "Core Attributes"

-->	

      <li id="li_303"><strong>%Core.attrib;</strong> See section 7.3.1, "<a href="#CommAtt">Core

        Attributes</a>."</li>

      <li id="li_304"><strong>xml:lang (NMTOKEN, IMPLIED)</strong></li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;smil&gt;</code><br />

    <strong>Comments:</strong> The <code>body</code> contains zero or more <code>seq</code>s

    or <code>par</code>s and may also directly contain zero or more media objects

    (<code>text</code>, <code>audio</code>, <code>img</code>), or links (<code>a</code>). <br />

    <br />

  </li>

  <li id="li_305"><strong>&lt;seq&gt;</strong><br />

    <strong>Description:</strong> Container for a sequence of SMIL events, e.g., a series

    of <code>par</code>s and <code>seq</code>s.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT seq (par|seq|text|audio|img|a)+ &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;seq&gt;</code>...content...<code>&lt;/seq&gt;</code><br />

    <strong>Attributes:</strong>

    <ul id="ul_79">

      <li id="li_306"><strong>id (ID, REQUIRED):</strong></li>

      <li id="li_307"><strong>class (CDATA, IMPLIED):</strong> Optional descriptor of this instance of the element. Can be used to identify structures such as tables and lists for which special navigation functions should be automatically

        invoked when entered. See section 7.4.2, "<a href="#AutoInv">Automatic Invocation of Special Navigation Modes</a>." Can also be used to select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."

      </li>

      <li id="li_308"><strong>customTest (IDREF, IMPLIED):</strong> ID reference linking <code>seq</code>

        with matching <code>customTest</code> element in <code>head</code>. </li>

      <li id="li_309"><strong>dur (CDATA, IMPLIED)</strong> The duration of the seq. The value syntax is defined by the SMIL 2.0 Timing and Synchronization

        Module <a href="#ref-SMIL">[SMIL]</a>.</li>

        <li id="li_309a"><!-- MH 2004-04-05 new attribute--><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

        <li id="li_309b"><!-- MH, MM 2004-06-10 New attribute --><strong>end (CDATA, IMPLIED)</strong> Determines the active duration of Escapable or Producer Pause content.  See section 7.8, "<a href="#End-Vals">End Attribute Values</a>", for <code>end</code> value syntax.  See also sections 7.4.1, "<a href="#Escape">'Escapable' Structures</a>" and 7.4.11, "<a href="#P-P">Producer Pauses</a>."

</li>

<li id="li_309c"><!-- TM 2004-09-15 New attribute --><strong>fill ((freeze | remove) 'remove')</strong>Determines whether a visual element is frozen at its final state or is no longer presented. See section 7.4.11,

"<a href="#P-P">Producer Pauses</a> and section 10.3.1 of <a href="#ref-SMIL">SMIL 2.0</a>."

</li>

    </ul>

    <!-- 2004-07-07 MM Added element a --><strong>Valid inside:</strong> <code>body</code>, <code>seq</code>, <code>par</code>, <code>a</code><br />

    <strong>Comments:</strong> It is permissible to nest <code>seq</code>s. <br />

    <br />

  </li>

  <li id="li_310"><strong>&lt;par&gt;</strong><br />

    <strong>Description:</strong> Parallel time grouping in which multiple elements (e.g.,

    text, audio, and image) play back simultaneously.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT par (seq|text|audio|img|a)+ &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;par&gt;</code>...content...<code>&lt;/par&gt;</code><br />

    <strong>Attributes:</strong>

    <ul id="ul_80">

      <li id="li_311"><strong>id (ID, REQUIRED):</strong></li>

      <li id="li_312"><strong>class (CDATA, IMPLIED):</strong> Optional descriptor of this instance of the element. Can be used to identify structures such as tables and lists for which special navigation functions should be automatically

        invoked when entered. See section 7.4.2, "<a href="#AutoInv">Automatic Invocation of Special Navigation Modes</a>." Can also be used to select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."</li>

      <li id="li_313"><strong>customTest (IDREF, IMPLIED):</strong> ID referencing matching <code>customTest</code>

        element in <code>head</code>. </li>

        <li id="li_313a"><!-- MH 2004-04-05 new attribute--><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

    </ul>

    <!-- 2004-07-07 MM Added element a --><strong>Valid inside:</strong> <code>body</code>, <code>seq</code>, <code>a</code><br />

    <strong>Comments:</strong> See section 7.4.7, "<a href="#Par">Content of <code>par</code>s</a>" for

    normative content. <br />

    <br />

  </li>

  <li id="li_314"><strong>&lt;text&gt;</strong><br />

    <strong>Description:</strong> Points to segment of textual content to be rendered.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT text EMPTY &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;text</code>...attributes...<code>/&gt;</code><br />

    <strong>Attributes:</strong>

    <ul id="ul_81">

      <li id="li_315"><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

      <li id="li_316"><strong>src (CDATA, REQUIRED):</strong> URI of fragment of textual content file

        to be rendered.</li>

      <li id="li_317"><strong>type (CDATA, IMPLIED):</strong> Type of media file.</li>

      <li id="li_318"><strong>region (CDATA, IMPLIED):</strong> Specifies the <code>region</code> (defined

        in <code>layout</code> in document <code>head</code>) in which the text

        will be presented. References the id of the appropriate <code>region</code>.

        All types of text objects that are to appear in the same rendering space

        would be assigned the same value for <code>region</code>. For example,

        page numbers and producer's notes might both be displayed in the main

        text area of a screen (<code>region="text"</code>), while notes (e.g.,

        footnotes) might be displayed in a separate area at the bottom of the

        screen (<code>region="notes"</code>).</li>

        <li id="li_318a"><!-- MH 2004-04-05 new attribute--><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

    </ul>

    <strong>Valid inside:</strong><!--OHA and MM March 19, 2004 Added "a"--><code>body</code>, <code>par</code>, <code>seq</code>, <code>a</code><br />

    <br />

  </li>

  <li id="li_319"><strong>&lt;audio&gt;</strong><br />

    <strong>Description:</strong> Points to segment of audio content to be rendered.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT audio EMPTY &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;audio</code>...attributes...<code> /&gt;</code><br />

    <strong>Attributes:</strong>

    <ul id="ul_82">

      <li id="li_320"><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

      <li id="li_321"><strong>src (CDATA, REQUIRED):</strong> URI of audio file containing clip to be

        rendered.</li>

      <li id="li_322"><strong>type (CDATA, IMPLIED):</strong> Type of media file.</li>

      <li id="li_323"><!-- tkc and mm, Feb. 20, 2004.  Made REQUIRED.--><strong>clipBegin (CDATA, REQUIRED):</strong> Specifies the beginning of a segment

        of a continuous audio file as a time offset from the start of the audio

        file. The value syntax is defined by the SMIL 2.0 Timing and Synchronization

        Module <a href="#ref-SMIL">[SMIL].</a> See section 7.7, "<a href="#Clock">Media Clipping and Clock Values</a>." </li>

      <li id="li_324"><!-- tkc and mm, Feb. 20, 2004.  Made REQUIRED.--><strong>clipEnd (CDATA, REQUIRED):</strong> Specifies the end of a segment of a

        continuous audio file as a time offset from the start of the audio file.

        It uses the same attribute value syntax as <code>clipBegin</code>. </li>

      <li id="li_325"><strong>region (CDATA, IMPLIED):</strong> Specifies the <code>region</code> (defined

        in <code>layout</code> in document <code>head</code>) in which the audio object

        will be presented. References the id of the appropriate <code>region</code>.</li>

        <li id="li_325a"><!-- MH 2004-04-05 new attribute--><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

    </ul>

    <strong>Valid inside:<!--OHA and MM March 19, 2004 Added "a"--></strong><code>body</code>, <code>par</code>, <code>seq</code>, <code>a</code>.<br />

    <br />

  </li>

  <li id="li_326"><strong>&lt;img&gt;</strong><br />

    <strong>Description:</strong> Points to image to be rendered.<br />

    <strong>Declaration:</strong><code>&lt;!ELEMENT img EMPTY &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;image</code>...attributes...<code> /&gt;</code><br />

    <strong>Attributes:</strong>

    <ul id="ul_83">

      <li id="li_327"><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

      <li id="li_328"><strong>src (CDATA, REQUIRED):</strong> URI of image file to be rendered.</li>

      <li id="li_329"><strong>type (CDATA, IMPLIED):</strong> Type of media file.</li>

      <li id="li_330"><strong>region (CDATA, IMPLIED):</strong> Specifies the <code>region</code> (defined

        in <code>layout</code> in document <code>head</code>) in which the image will

        be presented. References the id of the appropriate <code>region</code>.</li>

        <li id="li_330a"><!-- MH 2004-04-05 new attribute--><strong>xml:lang (NMTOKEN, <a href="#d-implied">IMPLIED</a>)</strong></li>

    </ul>

    <strong>Valid inside:<!--OHA and MM March 19, 2004 Added "a"--></strong> <code>body</code>, <code>par</code>, <code>seq</code>, <code>a</code><br />

    <br />

  </li>

  <li id="li_331"><strong>&lt;a&gt;</strong><br />

    <strong>Description:</strong> Defines a link. The default behavior is to be active for

    the duration of the media object it contains.<br />

    <strong><!-- LNN 2004-06-24: allowed par and seq -->Declaration:</strong><code>&lt;!ELEMENT a (par|seq|text|audio|img)* &gt;</code><br />

    <strong>Syntax:</strong> <code>&lt;a&gt;</code>...content...<code>&lt;/a&gt; </code><br />

    <strong>Attributes:</strong>

    <ul id="ul_84">

      <li id="li_332"><strong>%Core.attrib;</strong> See section 7.3.1, "<a href="#CommAtt">Core

        Attributes</a>."</li>

      <li id="li_333"><strong>xml:lang (NMTOKEN, IMPLIED)</strong></li>

      <li id="li_334"><strong>href (%URI;, REQUIRED)</strong> Specifies the URI of the target of the

        link. The URI may include a fragment identifier.</li>

      <li id="li_334a"><strong><!-- LNN 2004-06-24: attribute 'external' added.  MM 2004-07-06: changed default to 'false' -->external ((true|false) 'false')</strong>An external link points to media content that is not part of the DTB.

    The external media content must be rendered by an external application, whether or not that content is renderable by the DTB player.</li>

    </ul>

    <strong>Valid inside:</strong> <code>body</code>, <code>par</code>, <code>seq</code><br />

    <strong>Comments:</strong> See section 7.4.5, "<a href="#SMILLinks">Links</a>"

    for normative content.<br />

    <br />

  </li>

</ul>





<h3 id="h3_49">7.3.1 <a name="CommAtt">Core Attributes</a></h3>

<p class="sstatus">(This section is informative.)</p>



<p id="para_107n">The following attributes are allowed when the entity %Core.attrib; is listed above:</p>

<ul id="ul_85">

<li id="li_335"><strong>id (ID, IMPLIED)</strong></li>

<li id="li_336"><strong>class (CDATA, IMPLIED)</strong></li>

<li id="li_337"><strong>title (CDATA, IMPLIED)</strong></li>

</ul>



<h3 id="h3_49a"><!-- MH 2004-04-02 New section. -->7.3.2 <a name="xmllang">xml:lang Attribute</a></h3>

<p class="sstatus">(This section is normative)</p>

<p>The xml:lang attribute specifies the <a href="#RFC3066">[RFC

3066]</a> language code of SMIL elements that have, or reference, content.

</p>



<h2 id="h2_27">7.4 <a name="SMILProd">SMIL Requirements for DTBs</a></h2>



<h3 id="h3_51">7.4.1 <a name="Escape">"Escapable" Structures</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_108"><!-- MM Feb. 18, 2004  Clarified meaning of escape -->DTB players should provide the functionality to allow readers to "escape" from the DTB rendition of the following structures, with a single action: tables, lists, producer's notes, annotations, sidebars and notes.  Escape means to move local navigation to the point directly following the current structure (table, list, etc.).</p>



<p id="para_108a"><!-- MM Feb. 18, 2004 Added sidebar. MM 2004-05-19 Removed requirement that class attribute values be drawn from DTBook. -->To support this functionality, the SMIL entry for any such structure must consist of a <code>seq</code> element containing at least one child time container (<code>seq</code> or <code>par</code>). In addition, a  class attribute identifying the type of structure must be applied to the parent <code>seq</code> containing just the escapable structure.  Class attribute values are unrestricted, except for tables and lists, where the values must be "table" and "list," per section 7.4.2.</p>



<p id="para_108aa"><!-- MH 2004-05-19 New requirement. MM 2004-05-21, 06-10 and 07-06 Editorial changes. -->

The parent <code>seq</code> element containing just the escapable structure must have an <code>end</code> attribute with the value of <code>"DTBuserEscape;childId-value.end"</code>,

 where <code>childID-value</code> is the <code>id</code> value of the last child time container of the parent <code>seq</code>. The value, as specified, defines to the player that the escapable structure will be terminated by either a user-initiated escape action (DTBuserEscape) OR the normal end of the last child time container within the escapable structure, whichever occurs first.  See section 7.8, "<a href="#End-Vals">End Attribute Values</a>" and <a href="#Ex7.4">Example 7.4</a>.</p>



<p id="para_108d"><!-- MM 2004-05-21   New requirement. -->A Resource File entry must be supplied for each type of escapable structure identified within a DTB. Typically, resources are associated with escapable structures via the <code>class</code> attribute on SMIL time containers. See section 10, "<a href="#Resource">Resource File</a>."</p>



<p id="para_108b"><!-- MM Feb. 18, 2004 New para. -->The above rules only apply to those DTBs where these structures can be identified in SMIL.  For example, in a DTB where time containers hold complete chapters, "escapability" is not possible for the structures described in this section.</p>



<h3 id="h3_53">7.4.2 <a name="AutoInv">Automatic Invocation of Special Navigation Modes</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_109"><!-- TM 2004-05-11 Changed 'seq or par' to 'seq' -->DTB player developers may choose to automatically invoke special player navigation modes when the reader enters a table or list. (See "<a href="#Navfeat">Document Navigation Features List [Navigation Features]</a>.")  To support this functionality, a class attribute must be included on the <code>seq</code> containing a table or list, using the values "table" or "list," as appropriate).</p>



<h3 id="h3_55">7.4.3 <a name="Skip">"Skippable" Structures</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_110"><!-- MM 2004-02-18 Clarified when skippability is possible -->Players should offer the user the option to "turn off" certain structures in a DTB, that is, select structures that the player will then automatically skip over during sequential playback. To support this capability, a <code>seq</code> or <code>par</code> that exactly contains any of the structures specified below must have a <code>customTest</code> attribute applied to it.  In addition, the <code>customAttributes</code> element, as well as a <code>customTest</code> element for each "skippable" structure, must be present in the <code>head</code> of each SMIL file and contain content.</p>



<p id="para_110a"><!-- MM 2004-02-18 Added "optional" before sidebar. 2004-04-20 MM/LR/MH Changed items to non-DTBook names. -->At a minimum, <code>customTest</code> attributes must be applied to time containers for line numbers, notes, note references, annotations, page numbers, optional producer's notes, and optional sidebars. Notes, annotations, optional producer's notes, and optional sidebars containing multiple segments must be represented as a series of <code>pars</code> wrapped in a <code>seq</code>, so that a <code>customTest</code> can be applied to the <code>seq</code>, permitting the user to skip the entire sequence.</p>



<p id="para_110b"><!-- MM 2004-02-18 New para -->The rules in the above paragraphs only apply to those DTBs where SMIL time containers exactly contain the "skippable" structures.  In a DTB where time containers hold complete chapters, for example, "skippability" is not possible for the structures described in this section.</p>



<p id="para_110c"><!--MH 30 March, 2004 - Added new paragraph leaving customTest attribute values open and requiring resource files if skippability is implemented. OHA 2004-07-14 Added: (via the corresponding...NCX) --> Attribute values (for customTest attributes on <code>seq</code>s or <code>par</code>s and for the <code>id</code> attribute on <code>customTest</code> elements) are left to the producer.  Producers who utilize skippable elements must supply a resource file entry for each such element, (via the corresponding <code>smilCustomTest</code> element in the NCX) so that a player may expose those skippable elements in its user interface.

</p>



<p id="para_110d"><!--MM and MH 30 March, 2004 New requirement -->The value of <code>defaultState</code> for a given <code>customTest</code> element must be the same in all SMIL files of a DTB.</p>



<p id="para_112">The recommended value of the <code>override</code> attribute is 'visible'. Note that this is contrary to the default value in the SMIL 2 specification. <a href="#custtest">See description of <code>&lt;customTest&gt;</code>

  above</a>. </p>



<p id="para_113"><!-- MM 2004-04-05 Clarified what navigates means. 2004-04-20 Limited to global navigation; changed must to should.-->When a user moves via global navigation directly to a skippable element that has been turned off, the player should ignore the current state and render the content of that element.</p>



<p id="para_114">Section 8.5, "<a href="#NCXWorks">How the NCX Works</a>," describes how information on skippable structures can be gathered in the NCX for efficient presentation to the user.</p>

<h3 id="h3_57">7.4.4 <a name="SMILDist">Packaging Files across Several Media Units</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_115">When a DTB spans several media units (e.g., CD-ROM discs), all files required to render any given SMIL file must be present on the same media unit as that SMIL file.  This requirement ensures that players need only track the location of SMIL files in order to provide a complete DTB presentation.</p>



<h3 id="h3_59">7.4.5 <a name="SMILLinks">Links</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_116"><!-- 2004-04-20 ZED AC New language regarding targets in text and SMIL-->If links (i.e., <code>&lt;a&gt;</code> (anchor) elements with <code>href</code>

  attributes) are present in the textual content file of a DTB, they must also

  be included in the corresponding SMIL file(s). Related links in textual content

  and SMIL files must point to the same information in the textual content and

  SMIL files, respectively.  Specifically, the id of the SMIL time container that is the destination of the SMIL link must be equal to the smilref attribute on the text element that is the destination of the text link. Nesting of anchors is prohibited.  The default behavior of a link is to be

  active for at least the duration of the object it contains. Players may

  establish other behaviors (e.g., maintaining links in the active state for a

  preset period of time -- possibly modifiable by the user -- or until the next link

  is encountered).</p>



  <p id="para_116a"><!-- 2004-06-29 TM - new paragraph on @external -->An external link points to media content that is not part of the DTB. Such a link must be identified as external by the <code>external</code> attribute on the <code>&lt;a&gt;</code> element. The default value of the <code>external</code> attribute is false. The external media content must be rendered by an external application, whether or not that content is renderable by the DTB player.  </p>



<h3 id="h3_61">7.4.6 <a name="Layout">Layout Syntax</a></h3>

<p class="sstatus">(This section is normative.)</p>

<p id="para_117">This standard allows only SMIL 2.0 Basic Layout syntax (i.e., <a href="#CSS2">CSS2</a>

  syntax and others are not permitted).</p>



<h3 id="h3_63">7.4.7 <a name="Par"></a>Content of &lt;par&gt;s</h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_118">Each <code>par</code> can contain no more than one each of <code>text</code>, <code>audio</code>,

  <code>image</code>, and <code>seq</code>. See section 7.4.10, "<a href="#T-O">Text-Only

  DTBs</a>" for further discussion of this issue.</p>



<p id="para_119">When both textual content and audio files are present, <code>text</code> and <code>audio</code> objects within the same <code>par</code> must both represent the same body of material (e.g., the same paragraph).</p>



<p id="para_120">Because of resource limitations on portable DTB players, SMIL presentations must not be created such that multiple audio media objects are rendered simultaneously.  Reading systems are not required to support simultaneous rendering of multiple audio files.

</p>



<h3 id="h3_67">7.4.8 <a name="Notes">Notes and Annotations in SMIL</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_122">It is strongly recommended that links be applied

  to media objects (normally <code>audio</code>) for all <code>noteref</code>s

  and <code>annoref</code>s, with the corresponding <code>note</code>s and <code>annotation</code>s

  as the targets. The presence of the links will enable key player functionality,

  such as easy access to <code>note</code>s when <code>noteref</code>s are turned

  on and <code>note</code>s turned off.</p>



<p id="para_123">It is recommended that <code>noteref</code>s and <code>note</code>s be implemented

  in SMIL such that the default, linear presentation (on a simple player) of the

  <code>noteref</code>s and <code>note</code>s is in the order and location appropriate

  to the producing agency's policy for rendering <code>note</code> references

  and <code>note</code>s.</p>



<h3 id="h3_69">7.4.9 <a name="Images">Images in SMIL</a></h3>

<p class="sstatus">(This section is informative.)</p>



<p id="para_124">Duration of image display will be equal to that of the longest media object or time container contained within the same <code>par</code>.   Example 7.2 below shows a sample implementation of SMIL for an image and its associated caption and producer's note.

</p>



<h3 id="h3_71">7.4.10 <a name="T-O">Text-Only DTBs</a></h3>

<p class="sstatus">(This section is normative.)</p>



<p id="para_125">Text-only DTBs must include SMIL files.  This will ensure user access to the many features enabled by SMIL.  As mentioned above, it is strongly recommended that the SMIL file(s) have a level of granularity matching that of the textual content file. </p>



<p id="para_126">In a DTB that contains no audio material, the duration of <code>text</code>

  media objects is controlled either by the user (i.e., the player renders the

  next <code>text</code> object on command) or the player (e.g., a text-to-speech

  engine or a pacing algorithm for a large-print or Braille display triggers the

  next media object).</p>



  <h3 id="h3_72a">7.4.11 <!-- MH 2004-06-03 New section.  MM 2004-06-04 Editorial changes. --><a

       name="P-P">Producer Pauses</a></h3>



    <p class="sstatus">(This section is normative.)</p>

    <p id="para_126a">

      Producers may create content that allows for the

      presentation of the DTB to be paused until the user takes

      an action that will resume playback. These pauses may be

      used by the producer, for example, to allow time for a user

      to perform an exercise or examine a physical model related

      to the content.

    </p>

    <p id="para_126aa">

      <!-- MH 2004-06-09 New Para to explain Duration. -->

       Producers may optionally specify a maximum active duration

      for the time container. This active duration is the simple

      duration of the content plus any additional time the

      producer wishes to allow before the DTB resumes playback if

      the user does not initiate the resume directly.

    </p>

    <p id="para_126b">



      <!-- MM 2004-06-04 Edited to add more discussion about specified duration and to add cross-ref to 7.8. -->

       Content created for this purpose will consist of a

      <code>seq</code> element containing at least one child time

      container (<code>seq</code> or <code>par</code>); the

      parent <code>seq</code> has an <code>end</code> attribute

      value of "DTBuserResume", and, optionally, a time duration.

      The time container with this <code>end</code> attribute

      value will have an indefinite time duration, unless a

      duration is specified, and only terminate upon user

      invocation of the DTBuserResume, or when the end of any

      specified duration is reached. The player will present the

      content of any child media objects and then wait for the

      occurrence of the DTBuserResume or the end of the specified

      duration, if present. See section 7.8, "<a href="#End-Vals">End

      Attribute Values</a>", for <code>end</code> value syntax.

    </p>

    <p id="para_126c">

      Players that do not support Producer Pauses will ignore the

      <code>end</code> event and continue playing.

    </p>

    <p id="para_126d">

      See <a href="#Ex7.5">Examples 7.5 and 7.6</a>.

    </p>



<h2 id="h2_28">7.5 <a name="SMILMeta">SMIL Metadata</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_127">Metadata is included in the <code>&lt;head&gt;</code> element using the <code>&lt;meta&gt;</code>

  element. Content producers may introduce other metadata besides those listed below,

  if needed. However, metadata names shall not begin with the  prefix "dtb:" unless defined

in this standard.



  Players must not fail when encountering unknown metadata but must, at a minimum,

  ignore it. </p>



<ul id="ul_86">

  <li id="li_338">dtb:generator

    <ul id="ul_87">

      <li id="li_339">Content: Name and version of software that generated the SMIL file.</li>

      <li id="li_340">Occurrence: Optional - recommended.</li>

    </ul>

  </li>

  <li id="li_341">dtb:totalElapsedTime

    <ul id="ul_88">

      <li id="li_342">Content: The total time elapsed up to the beginning of this SMIL file.

        Clock Values from SMIL 2.0 Timing and Synchronization Module <a href="#ref-SMIL">[SMIL].</a>

        See section 7.7, "<a href="#Clock">Media Clipping and Clock Values</a>."</li>

      <li id="li_343">Occurrence: Required</li>

      <li id="li_344">Comments: Set to zero for DTBs of type textNCX.</li>

    </ul>

  </li>

  <li id="li_345">dtb:uid

    <ul id="ul_89">

      <li id="li_346">Content: The globally unique identifier for the DTB. The value is the

        same as that of the <code>dc:Identifier</code> element referenced by the package file's

        unique-identifier element. See section 3.1, "<a href="#PkgId">Package

        Identity</a>."</li>

      <li id="li_347">Occurrence: Required</li>

    </ul>

  <br /><br /></li>

</ul>





<h2 id="h2_29">7.6 <a name="SMILEx">Examples</a></h2>

<p class="sstatus">(This section is informative.)</p>



<p id="para_128">The following example illustrates the use of <code>head</code> and its contents.

  Three instances of the <code>meta</code> element contain the unique id of the DTB, the

  tool that generated this SMIL file, and the elapsed time to the start of the

  file. The visual display location of any text elements with <code>region="text"</code>

  or <code>region="notes"</code> is specified by the <code>region</code> elements

  within <code>layout</code>. The text region occupies most of the screen (the

  bottom edge of the "text" region is 15% from the bottom of the overall rendering

  window), while the notes regions occupies only the bottom 15%. The <code>customAttributes</code>

  indicate that any time containers with <code>customTest="pagenum"</code> will

  be skipped by default, while time containers with <code>customTest="notes"</code> or <code>customTest="prodnotes"</code> will automatically be played. If the user interface of the playback device supports

  it, the user can change these settings.</p>

<p id="para_129">Example 7.1:</p>

<pre><samp id="smp_12">

&lt;?xml version="1.0"  encoding="UTF-8"?&gt;

&lt;!DOCTYPE smil PUBLIC "-//NISO//DTD dtbsmil 2005-1//EN"

  "http://www.daisy.org/z3986/2005/dtbsmil-2005-1.dtd"&gt;

&lt;smil xmlns="http://www.w3.org/2001/SMIL20/"&gt;

    &lt;head&gt;

       &lt;meta name="dtb:uid" content="dk-dbb-4z0065" /&gt;

       &lt;meta name="dtb:generator" content="smilgen2.4" /&gt;

       &lt;meta name="dtb:totalElapsedTime" content="01:33:56.233" /&gt;

       &lt;layout&gt;

          &lt;region id="text" top="0%" left="0%" right="0%" bottom="15%"/&gt;

          &lt;region id="notes" top="85%" left="0%" right="0%" bottom="0%"/&gt;

       &lt;/layout&gt;

       &lt;customAttributes&gt;

          &lt;customTest id="pagenum" defaultState="false" override="visible"/&gt;

          &lt;customTest id="note" defaultState="true" override="visible"/&gt;

          &lt;customTest id="prodnote" defaultState="true" override="visible"/&gt;

       &lt;/customAttributes&gt;

    &lt;/head&gt;

    &lt;body&gt;

     ...

    &lt;/body&gt;



&lt;/smil&gt;

</samp></pre>





<p id="para_130">Example 7.2 shows the use of SMIL elements within <code>body</code>. <!-- LNN 2004-06-24: dropped the following: 'The initial

  <code>seq</code> includes the attribute <code>"dur" </code>which specifies

  that the entire SMIL file is one hour, three minutes, 24.9 seconds long.' --> Each

  <code>par</code> (a page number, a heading, two paragraphs, and a figure are

  shown) includes the segment of text, the image (if applicable), and the corresponding

  audio clip that are to be rendered simultaneously. The figure falls between

  the two paragraphs.</p>



<p id="para_131">The image file is presented in parallel with text and audio versions of the figure caption and a producer's note describing the figure.  The entire group is wrapped in a <code>par</code>, with the image file rendered simultaneously with a sequence of two <code>par</code>s.</p>



<!-- L.S. Nilesen: replaced '<p id="para_132">The <code>par</code> for the second paragraph includes a link that "wraps" the <code>audio</code>  element.

</p>' with the following -->

<p id="para_132">A link "wraps" the <code>par</code> for the second paragraph.

</p>



<p id="para_133">Example 7.2:</p>

<pre><samp id="smp_13">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;!DOCTYPE smil PUBLIC "-//NISO//DTD dtbsmil 2005-1//EN"

  "http://www.daisy.org/z3986/2005/dtbsmil-2005-1.dtd"&gt;

&lt;smil xmlns="http://www.w3.org/2001/SMIL20/"&gt;

&lt;head&gt;

....

&lt;/head&gt;

&lt;body&gt;

   &lt;seq id="baseseq" <!-- LNN 2004-06-24: dropped 'dur="1:03:24.9"' -->&gt;

      &lt;par id="p1" customTest="pagenum"&gt;

         &lt;text region="text" src="rs.xml#pg_1" /&gt;

         &lt;audio src="rs_fwdx.mp3" clipBegin="00:00:00"

         clipEnd="00:00:00.91" /&gt;

      &lt;/par&gt;



      &lt;par id="h1"&gt;

         &lt;text region="text" src="rs.xml#h1_1" /&gt;

         &lt;audio src="rs_fwdx.mp3" clipBegin="00:00:01.62"

         clipEnd="00:00:02.53" /&gt;

      &lt;/par&gt;



      &lt;par id="para1"&gt;

         &lt;text region="text" src="rs.xml#para_1" /&gt;

         &lt;audio src="rs_fwdx.mp3" clipBegin="00:00:03.51"

         clipEnd="00:01:45.36" /&gt;

      &lt;/par&gt;



      &lt;par id="img1"&gt;

         &lt;img region="image" src="fig1.png" /&gt;

         &lt;seq id="icap1"&gt;

            &lt;par id="cap1"&gt;

               &lt;text region="caption" src="rs.xml#caption_1" /&gt;

               &lt;audio src="rs_fwdx.mp3" clipBegin="00:01:45.98"

               clipEnd="00:01:52.66" /&gt;

            &lt;/par&gt;



            &lt;par id="pnote1" customTest="prodnote" class="prodnote"&gt;

               &lt;text region="text" src="rs.xml#prodnote_1" /&gt;

               &lt;audio src="rs_fwdx.mp3" clipBegin="00:01:53.08"

               clipEnd="00:02:55.34" /&gt;

            &lt;/par&gt;

         &lt;/seq&gt;

      &lt;/par&gt;



      &lt;a href="rs12.smil#h2_9"&gt;

         &lt;par id="para2"&gt;

            &lt;text region="text" src="rs.xml#para_2" /&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="00:02:56.21"

            clipEnd="00:04:03.75" /&gt;

         &lt;/par&gt;

      &lt;/a&gt;

      ...

   &lt;/seq&gt;

&lt;/body&gt;

&lt;/smil&gt;



</samp></pre>





<p id="para_134">Notes or sidebars containing multiple segments will be represented

  as a series of <code>pars</code> wrapped in a <code>seq</code>, so that the user can skip the entire

  sequence. The first part of Example 7.3 illustrates this situation. In addition,

  note references occurring in the middle of a paragraph will require this special

  syntax so that the playback device can properly render the content with or without

  either the note reference or the note.</p>



<p id="para_135">In the second half of Example 7.3, the first <code>par</code> contains the portion of paragraph 120 preceding a note reference (identified with a <code>span</code> element in the textual content file).  The second <code>par</code> holds the note reference itself (i.e., "footnote 1").  The third <code>par</code> contains the contents of footnote 1 and the last holds the remainder of paragraph 120.  Note that the <code>seq</code> and each <code>par</code> contain a unique <code>id</code>.  The <code>region</code> attribute on <code>text</code> will control whether each segment is displayed in the text or notes region.</p>

<p id="para_136">Example 7.3:</p>

<pre><samp id="smp_14">...

&lt;body&gt;



   &lt;seq id="baseseq" <!-- LNN 2004-06-24: dropped 'dur="02:14:34.156"' -->&gt;

      ... (a series of pars)

      &lt;seq id="sidebar_1" customTest="sidebar"&gt;

         &lt;par id="para_9"&gt;

            &lt;text region="text" src="rs.xml#para_9" /&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="02:02.711"

            clipEnd="02:14.678" /&gt;

         &lt;/par&gt;



         &lt;par id="para_10"&gt;

            &lt;text region="text" src="rs.xml#para_10" /&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="02:15.545"

            clipEnd="02:44.612" /&gt;

         &lt;/par&gt;

      &lt;/seq&gt;

      ... (a series of pars)

      &lt;seq id="para_120"&gt;

         &lt;par id="span_3"&gt;

            &lt;text region="text" src="rs.xml#span_3" /&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="46:58.744"

            clipEnd="47:21.659" /&gt;

         &lt;/par&gt;



         &lt;par id="nref_1" customTest="noteref"&gt;

            &lt;text region="text" src="rs.xml#nref_1" /&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="47:22.610"

            clipEnd="47:23.555" /&gt;

         &lt;/par&gt;



         &lt;par id="ftn_1" customTest="note" class="note"&gt;

            &lt;text region="notes" src="rs.xml#ftn_1" /&gt;

            &lt;audio src="rs_notes.mp3" clipBegin="00:00.091"

            clipEnd="00:34.754" /&gt;

         &lt;/par&gt;



         &lt;par id="span_4"&gt;

            &lt;text region="text" src="rs.xml#span_4" /&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="47:24.057"

            clipEnd="47:582" /&gt;

         &lt;/par&gt;

      &lt;/seq&gt;

      ... (a series of pars)



   &lt;/seq&gt;



&lt;/body&gt;

.... </samp></pre>



<p id="para_136a"><!-- MH 2004-07-06 New example. --><a name="Ex7.4">Example 7.4</a>:</p>



<p id="para_136b">

The following example shows the use of DTBuserEscape and childID.end for escapability.

The escapable content is contained in the <code>par</code> with <code>id</code> sf0003.

The <code>seq</code> which wraps the <code>par</code> has an <code>end</code> attribute

which specifies that the <code>seq</code> will end when either the DTBuserEscape event

occurs, or the child time container (the <code>par</code>) with <code>id</code> sf0003

ends after the normal play time.

</p>



<pre><samp id="smp_14a">

&lt;seq id="fr003" end="DTBuserEscape;sf0003.end"  customTest="prodnote" class="prodnote"&gt;

 &lt;par id="sf0003"&gt;

  &lt;text src="book02.xml#sf0003" /&gt;

  &lt;audio src="book02.mp3" clipBegin="npt=00:00:00" clipEnd="npt=00:00:11.5" /&gt;

 &lt;/par&gt;

&lt;/seq&gt;

</samp></pre>



<p id="para_136c"><!-- MH 2004-07-06 New example. --><a name="Ex7.5">Example 7.5</a>:</p>



<p id="para_136d">

      The following example shows the use of DTBuserResume for producer-controlled pauses.

      In the first part of the example, a

      <code>prodnote</code> indicates to the reader that a

      supplemental, physical model is to be examined at this

      point of the book presentation. Instructions are given to

      the user to press a resume key when they are ready to

      resume reading. After the instruction is presented, the

      playback pauses until the users presses the key to resume

      playback.

</p>

<pre><samp id="smp_14b">

&lt;p id="sf0002"&gt;The water molecule is composed of one Oxygen and two Hydrogen atoms.&lt;/p&gt;



&lt;prodnote id="sf0003"&gt;Please examine the model of the water molecule.

Notice how the two Hydrogen atoms are a attached to the Oxygen atom.  Press

the resume key when you have finished to continue reading.&lt;/prodnote&gt;



&lt;p id="sf0004"&gt;Heavy water is chemically the same as regular (light) water,

but with the two hydrogen atoms replaced with deuterium atoms.&lt;/p&gt;

</samp></pre>



    <p id="para_136e">

      In the second part of the example, the corresponding SMIL

      time containers are shown. In the <code>seq</code> with

      <code>id="sf0003"</code>, the <code>end</code> attribute

      has the value <code>DTBuserResume</code>, to indicate that

      this time container will not end until the user activates

      the DTB player's resume key. The <code>fill="freeze"</code>

      attribute is specified to force the DTB Player with text

      display (either visual or Braille) to maintain the text of

      the <code>prodnote</code> until the user resumes playback.

    </p>

<pre>

<samp id="smp_14c">

&lt;par id="sf0002"&gt;

 &lt;text region="textRegion" src="chemtext.xml#sf0002" /&gt;

 &lt;audio src="chem002.mp3" clipBegin="00:00:00.00" clipEnd="00:00:04.00" /&gt;

&lt;/par&gt;

&lt;seq id="sf0003" end="DTBuserResume" fill="freeze" customTest="prodnote" &gt;

 &lt;par id="sf0003a" &gt;

   &lt;text region="textRegion" src="chemtext.xml#sf0003" /&gt;

   &lt;audio src="chem002.mp3" clipBegin="00:00:04.08" clipEnd="00:00:16.00" /&gt;

 &lt;/par&gt;

&lt;/seq&gt;

&lt;par id="sf0004"&gt;

 &lt;text region="textRegion" src="chemtext.xml#sf0002" /&gt;

 &lt;audio src="chem002.mp3" clipBegin="00:00:16.08" clipEnd="00:00:25.00" /&gt;

&lt;/par&gt;

 </samp>

</pre>



<p id="para_136f"><!-- MH 2004-07-06 New example. -->Example 7.6:</p>

    <p id="para_136g">

      In the next example, the producer has applied a maximum

      time to be allowed for the producer-supplied pause. If the user does not

      activate the DTBuserResume button within the allowed time,

      the playback will resume once the specified time interval

      has passed. In the <code>seq</code> with

      <code>id="sf0003"</code>, the <code>end</code> attribute

      has the value

      <code>"DTBuserResume;sf0003a.end+00:01:00"</code>, which

      defines that the <code>seq</code> will end when either the

      DTBuserResume is activated or 1 minute has elapsed since

      the end of the child time container (sf0003a), whichever

      comes first. This allows the user one minute following the

      end of the <code>par</code> with <code>id="sf0003a"</code>

      to view the model, before playback resumes automatically.

    </p>

<pre>

<samp id="smp_14d">

&lt;seq id="sf0003" end="DTBuserResume;sf0003a.end+00:01:00" fill="freeze" customTest="prodnote" &gt;

  &lt;par id="sf0003a" &gt;

   &lt;text region="textRegion" src="chemtext.xml#sf0003" /&gt;

   &lt;audio src="chem002.mp3" clipBegin="00:00:04.08" clipEnd="00:00:16.00" /&gt;

  &lt;/par&gt;

 &lt;/seq&gt;

 </samp>

</pre>



  <h2 id="h2_30">7.7 <a name="Clock"><!-- TM 2004 2004-07-07 changed *val to *value --><!-- dp and mm, 3/24/04.  Added  reference to media clipping attributes, full syntax description, and specified support for npt= and non-support for SMPTE.-->Media Clipping and Clock Values</a></h2>



  <p id="para_137">Section 7.5.1, "MediaClipping Attributes" of SMIL 2.0 <a

href="#ref-SMIL"> [SMIL]</a> defines SMIL clipping attributes and their value syntax.  In addition, the SMIL 2.0 <a href="#ref-SMIL"> [SMIL]</a> Timing and Synchronization Module describes several different formats in which "clock values" (timing) may be represented. See <em>Clock Values</em> in Section 10.3.1 of that module. Playback devices must support the formats and syntaxes described in the above-mentioned sections, as restricted below. The three formats are:</p>



<p id="para_138">Full-clock-value (hours, minutes, seconds, and fractions of seconds): e.g., 3:22:55.91 (or npt=3:22:55.91)</p>

<p id="para_139">Partial-clock-value (minutes, seconds, and fractions of seconds): e.g., 43:15.044 (or npt=43:15.044)</p>

<p id="para_140">Timecount-value (one or more digits, plus an optional fraction and unit of measurement -- h=hours, min=minutes, s=seconds, ms=milliseconds): e.g., 34.6s (or npt=34.6s), 356ms (or npt=356ms), 58.214 (or npt=58.214). (For Timecount values, if no unit is shown, the default is "s" for seconds.)  No embedded white space is allowed in clock values, although leading and trailing white space characters will be ignored.</p>



<p id="para_141a">Clipping and Clock values have the following syntax:

</p>



<pre><samp>

Clip-value-MediaClipping ::= [ "npt=" ] Clock-value

Clock-value              ::= ( Full-clock-value | Partial-clock-value | Timecount-value )

Full-clock-value         ::= Hours ":" Minutes ":" Seconds ("." Fraction)?

Partial-clock-value      ::= Minutes ":" Seconds ("." Fraction)?

Timecount-value          ::= Timecount ("." Fraction)? (Metric)?

Metric                   ::= "h" | "min" | "s" | "ms"

Hours                    ::= DIGIT+; any positive number

Minutes                  ::= 2DIGIT; range from 00 to 59

Seconds                  ::= 2DIGIT; range from 00 to 59

Fraction                 ::= DIGIT+

Timecount                ::= DIGIT+

2DIGIT                   ::= DIGIT DIGIT

DIGIT                    ::= [0-9]

</samp></pre>



<p id="para_141b">The SMPTE syntax from SMIL 2.0 section

    7.5.1, "MediaClipping Attributes",  is not allowed.</p>



 <p id="para_141c"><!-- TM 2004-05-11 New para -->Clip durations must be positive, i.e. a clipEnd clock value must be greater than its corresponding clipBegin clock value. No clipEnd shall contain a clock value greater than the duration of the referenced media file.</p>



<h2  id="h2_30a">

      <!-- MH 2004-06-17 New section. -->7.8 <a name="End-Vals">End Attribute Values</a>

</h2>

    <p class="sstatus">(This section is normative)</p>

    <p id="para_141c2">

      This section defines the set of allowed <code>end</code>

      attribute values that are used on the <code>seq</code>

      element in a DTB for the specific purpose of supporting

      Escapability and Producer Pauses.

    </p>

    <p id="para_141d">

      The <code>end</code> attribute provides additional control

      over the active duration of a time container. The allowed

      <code>end</code> values are specific to the described uses

      only and are not defined for any other use in a DTB.

    </p>

    <p id="para_141e">

      DTB Players that support escapability and Producer Pauses

      must support the following values.

    </p>

    <h3 id="h3_74a">7.8.1 <a name="A-End-Vals">Allowed <code>End</code> Values</a></h3>

    <p class="sstatus">(This section is normative)</p>

    <p id="para_141f">

      Section 10.3.1, "Attributes", of the SMIL 2.0

      Recommendation <a href="#ref-SMIL">[SMIL]</a>, defines

      values and value syntax for the <code>end</code> attribute. The following subset of those values is

      allowed in this standard:

    </p>

<p id="para_141g"><em>Values for Escapable content</em></p>

<pre>

DTBuserEscape;childId-value.end

</pre>

<p id="para_141h"><em>Values for Producer Pause</em></p>

<pre>

DTBuserResume(;childId-value.end + Clock-value)?

</pre>

<p id="para_141i"><em>Values for Producer Pause that is also Escapable</em></p>

<pre>

DTBuserEscape; DTBuserResume(;childId-value.end + Clock-value)?

</pre>

    <p id="para_141j">

      The <code>childId-value</code> is from the <code>id</code>

      of the last child time container of the <code>seq</code> to

      which the <code>end</code> attribute is applied.

    </p>

    <p id="para_141k">

      <code>Clock-value</code> describes the length of the

      producer-specified pause (if present), and allowed values

      are defined in Section 7.7, "Media Clipping and Clock

      Values". The pause interval begins when the time container

      identified by <code>childId-value</code> ends.

    </p>

    <p id="para_141l">

      The interpretation of a list of end values is detailed in

      the following section, "Computing the Active Duration."

    </p>

    <h3 id="h3_74b">7.8.2 <a name="Active-Dur">Computing the Active Duration</a></h3>

    <p class="sstatus">(This section is normative)</p>

    <p id="para_141m">

      The active duration of a time container is defined as the

      simple duration of all child time containers and media

      objects, modified by any <code>end</code> values. A DTB

      Player will compute the active duration, which will be

      indefinite if only DTBuserResume is specified in the

      <code>end</code> value. In the case of a list of end

      values, the first occurrence of any condition defined by a

      value in the list will signal the end of the active

      duration for the time container.

    </p>

    <h3 id="h3_74c">7.8.3 <a name="Nest">Processing Nested Structures</a>

    </h3>

    <p class="sstatus">(This section is normative)</p>

    <p id="para_141n">

      In the case of nested escapable structures, default SMIL

      event processing behavior would cause any escape event

      occuring in a child of a nested structure to bubble up the

      nested time container hierarchy and terminate the top level

      escapable time container. In some cases, a user may only

      wish to escape from the current time container, such as a

      list within a table cell or within another list, and move

      to the next sequential element in the nested time container

      hierarchy. DTB players which implement escapability should

      allow users the option of specifying whether escaping from

      a nested escapable time container exits the complete nested

      hierarchy, or escapes only from the immediate escapable

      structure inside which the current position is located.

    </p>



  <p id="para_142n"><a href="#toc">Contents</a></p>



  <h1 id="h1_11">8. <a name="NCX">Navigation Control File (NCX)</a></h1>

  <h2 id="h2_31">8.1 <a name="NCXIntro">Introduction</a></h2>

  <p class="sstatus">(This section is informative.)</p>



<p id="para_142">The Navigation Control file for <a href="#XML">XML</a> applications (NCX) exposes

  the hierarchical structure of a DTB to allow the user to navigate through it.

  The NCX is similar to a table of contents in that it enables the reader to jump

  directly to any of the major structural elements of the document, i.e. part,

  chapter, or section, but it will often contain more elements of the document

  than the publisher chooses to include in the original print table of contents.

  It can be visualized as a collapsible tree familiar to PC users. Its development

  was motivated by the need to provide quick access to the main structural elements

  of the document without the need to parse the entire marked-up text file, which

  in many cases may not be present at all. Other elements such as pages, footnotes,

  figures, tables, etc. can be included in separate, nonhierarchical lists and

  can be accessed by the user as well. </p>

  <p id="para_143">It is important to emphasize that these navigation features are intended

    as a convenience for users who want them, and not a burden to those who do

    not. The alternative of a simple linear playback of the book will be available

    for those users not requiring the navigation features of the NCX. </p>

  <h3 id="h3_77">8.2 <a name="NCXReq">Key NCX Requirements</a></h3>

  <p class="sstatus">(This section is normative.)</p>

  <p id="para_144"><!--MG 30 March, 2004 Added requirements re namespaces and entity declarations and reference re filename extensions.-->

  Every DTB must contain exactly one NCX file. The NCX file must be a valid

  <a href="#XML">XML</a> document conforming to ncx-2005-1.dtd (see <a href="#DTBookDTD">Appendix

  1</a>,

  "NCX DTD") and comply with the additional normative

  requirements of section 8.4. See Section 3.3, "<a href="#para_53c">Manifest</a>"

for filename extension requirements.  The <code>version</code> and <code>xmlns</code> attributes on the <code>ncx</code> element must be explicitly specified in the document instance, using values drawn from

  the above-named DTD. Entity declarations must occur in the internal DTD subset.

  See further section 16.1 "<a href="#FileConform">General File Conformance Requirements</a>."  </p>



  <h2 id="h2_32">8.3 <a name="NCXElem">NCX Elements</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_145">Brief descriptions of the NCX elements follow. Each includes the element

    declaration extracted from the NCX DTD, along with descriptions of any applicable

    attributes. </p>



    <!--

Z39.86, section 8.3 ("NCX Elements").

Revisions by jp, 3/31/2004

    - Made audio clipBegin/clipEnd mandatory (change #10)

    - Dropped value attribute from navPoint (change #11)

    - Replaced lang attribute with xml:lang (change #12)

    - Added <pageList> and <pageTarget> elements (change #48)

    - Dropped onFocus and onBlur attributes from navPoint and navTarget (change #49)

    - Added <emmg> to content models of docTitle and docAuthor (change #50)

    - Modified language of docTitle/docAuthor to clarify relationship (none) to dtbook doctitle/docauthor (change #51)

    - Removed reference to pages in description of navTarget value attribute (change #52)

    - Added <navInfo> element (change #53)

    - Added default namespace attribute to description of <ncx> (change #L8)

    - Removed pageRef and mapRef attributes (change #??)

    - Revised definition of value attribute on navTarget to remove mention of "textual content"



    Revisions by mg, 2004-04-01

    - changed wording for class attributes; now silent on what values may or may not be.

    - added class on pageTarget and pageList



-->

  <ul id="ul_90">



<!-- ncx -->

  <li id="li_348">

  <!-- Revision:Added pageList to the content model -->

  <strong>&lt;ncx&gt;</strong><br /><strong>Description:</strong> The root

  element.<br /><strong>Declaration:</strong> <code>&lt;!ELEMENT ncx (head, docTitle,

  docAuthor*, navMap, pageList?, navList*)&gt;</code><br /><strong>Syntax:</strong>

  <code>&lt;ncx</code>   ...attributes...<code>&gt;</code>...content...<code>&lt;/ncx&gt;</code><br />

  <strong>Attributes:</strong><br />

  <ul id="ul_91">

    <li id="li_349"><!--MG 30 March, 2004  Require presence in document instance--><strong>version (CDATA, FIXED) "2005-1":</strong> Specifies the version of the

  DTD used in this instance. This attribute and its value (given in DTD) must be explicitly specified in the document instance.

  </li>

<!-- Revised:  Added xmlns attribute -->

    <li id="li_349a"><!-- JP 2004-03-31 New attribute -->

    <strong>xmlns (CDATA, FIXED) "http://www.daisy.org/z3986/2005/ncx/":</strong>

    Specifies the default XML namespace for all elements in the NCX.  See <a href="#XMLNamespaces">[XML-Namespaces]</a> for details on namespaces.  This attribute and its value (given in DTD) must be explicitly specified in the document instance.</li>

    <li id="li_350"><!-- Revised:  changed "lang" to "xml:lang" --><strong>xml:lang (NMTOKEN, IMPLIED):</strong> Specifies the <a

    href="#RFC3066">[RFC

    3066]</a> language code of the language of the document. </li>

    <li id="li_351"><strong>dir ((ltr|rtl), IMPLIED):</strong> The dir attribute specifies

    the direction of the text, where ltr is left to right and rtl is right to

    left. </li></ul><strong>Valid inside:</strong> None<br /><br />

   </li>

    <!-- head -->

    <li id="li_352"> <strong>&lt;head&gt;</strong><br />

      <strong>Description:</strong> Contains smilCustomTest data and metadata.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT head (smilCustomTest | meta)+&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;head&gt;</code>...content...<code>&lt;/head&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;ncx&gt;</code><br />

      <br />

    </li>

    <!-- smilCustomTest -->



      <li id="li_353"> <strong>&lt;smilCustomTest&gt;</strong><br />

      <!-- TM 2004-06-23 corrected link --><!-- TM 2004-05-17 Added @bookStruct and its description --><!-- MM  2004-04-05   Clarifies which attributes need to be copied. --><strong>Description:</strong> Duplicates customTest data found in SMIL files. Each unique customTest element that appears in one or more SMIL files and has been referenced at least once by a customTest attribute will have three of its attributes (<code>id</code>, <code>override</code>, and <code>defaultState</code>) duplicated in a smilCustomTest element in the NCX. The NCX thus gathers in one place all customTest elements used in the SMIL files, along with their <code>defaultState</code> setting, for presentation to the user. When a customTest element in SMIL has been applied to a time container holding one of the book structures defined in section 8.4.4 "<a href="#NCXCustom">smilCustomTest Element</a>", the bookStruct attribute must be applied to the corresponding smilCustomTest and contain the appropriate value from the enumerated list.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT smilCustomTest EMPTY&gt; </code><br />

      <strong>Syntax:</strong> <code>&lt;smilCustomTest</code>...attributes...<code>/&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_92">

        <li id="li_354"><strong>id (ID, REQUIRED)</strong> </li>

        <li id="li_355"><strong>defaultState (true | false) 'false'</strong> </li>

        <li id="li_356"><strong>override (visible | hidden) 'hidden'</strong> </li>

        <li id="li_356a"><strong>bookStruct  (PAGE_NUMBER | NOTE | NOTE_REFERENCE | ANNOTATION | LINE_NUMBER | OPTIONAL_SIDEBAR | OPTIONAL_PRODUCER_NOTE)  #IMPLIED   </strong></li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;head&gt;</code><br />

      <br />

    </li>

    <!-- meta -->

    <li id="li_357"> <strong>&lt;meta&gt;</strong><br />

      <strong>Description:</strong> Contains metadata applicable to the NCX file.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT meta EMPTY&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;meta</code> ...attributes... <code>/&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_93">

        <li id="li_358"><strong>name (CDATA, REQUIRED)</strong> </li>

        <li id="li_359"><strong>content (CDATA, REQUIRED)</strong> </li>

        <li id="li_360"><strong>scheme (CDATA, IMPLIED)</strong> </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;head&gt;</code><br />

      <strong>Comments:</strong> Required and optional metadata are listed in section 8.4.1.<br />

      <br />

    </li>

    <!-- docTitle -->



  <li id="li_361"><!-- Revision:  Added img to content description --><strong>&lt;docTitle&gt;</strong><br /><strong>Description:</strong> The title of the

  document, presented as text and, optionally, in audio or image renderings, for presentation to the reader. <br /><strong>Declaration:</strong>

<!-- Revision:  Added img to content model -->

  <code>&lt;!ELEMENT docTitle (text, audio?, img?)&gt;</code><br /><strong>Syntax:</strong>

  <code>&lt;docTitle</code> ...attributes... <code>&gt; </code>...content...

  <code>&lt;/docTitle&gt;</code><br /><strong>Attributes:</strong><br />

  <ul id="ul_94">

    <li id="li_362"><strong>id (ID, IMPLIED):</strong> Optional unique identifier.

  </li></ul><strong>Valid inside:</strong> <code>&lt;ncx&gt;</code>



  <br /><!-- Revision:  Added comment about dtbook's doctitle --><strong>Comments:</strong> There is no required relationship between the content of <code>docTitle</code> in the NCX and the content of the <code>doctitle</code> element in the textual content file, if it exists.<br /><br />

    </li>



    <!-- docAuthor -->



  <li id="li_363"><!-- Revision:  Added img to content description --><strong>&lt;docAuthor&gt;</strong><br /><strong>Description:</strong> The author of

  the document, presented as text and, optionally, in audio or image renderings, for presentation to the reader. <br /><strong>Declaration:</strong>



  <code><!-- Revision:  Added img to content model -->&lt;!ELEMENT docAuthor (text, audio?, img?)&gt;</code><br /><strong>Syntax:</strong>

  <code>&lt;docAuthor</code>

  ...attributes...<code>&gt;</code>...content...<code>&lt;/docAuthor&gt;</code><br /><strong>Attributes:</strong><br />

  <ul id="ul_95">

    <li id="li_364"><strong>id (ID, IMPLIED):</strong> Optional unique identifier.

  </li></ul><strong>Valid inside:</strong> <code>&lt;ncx&gt;</code>



  <br /><!-- Revision:  Added comment about dtbook's docauthor --><strong>Comments:</strong> There is no required relationship between the content of <code>docAuthor</code> in the NCX and the content of the <code>docauthor</code> element(s) in the textual content file, if it exists.<br /><br />

    </li>



    <!-- text -->

  <li id="li_365"><strong>&lt;text&gt;</strong><br /><!-- Expanded definition. March 31, 2004 changes by George Kerscher -->

      <strong>Description:</strong> Contains the text of a <code>&lt;docTitle&gt;</code>

or <code>&lt;docAuthor&gt;</code> or

text content of a <code>&lt;navLabel&gt;</code> or <code>&lt;navInfo&gt;</code>. <br />

  <strong>Declaration:</strong> <code>&lt;!ELEMENT text

  (#PCDATA)&gt;</code><br /><strong>Syntax:</strong> <code>&lt;text</code>

  ...attributes...<code>&gt;</code>...content...<code>&lt;/text&gt;</code><br /><strong>Attributes:</strong>



  <ul id="ul_96">

    <li id="li_366"><strong>id (ID, IMPLIED):</strong> Optional unique identifier.</li>

    <li id="li_367"><strong>class (CDATA, IMPLIED):</strong> Optional descriptor of this

    instance of the element. </li></ul><strong>Valid inside:</strong>

<!-- Revision:  Added <navInfo> to "valid inside" list -->

  <code>&lt;navLabel&gt;</code>, <code>&lt;docTitle&gt;</code>,

  <code>&lt;docAuthor&gt;</code>, <code>&lt;navInfo&gt;</code><br /><br />

    </li>



    <!-- audio -->

  <li id="li_368"><strong>&lt;audio&gt;</strong><br /><!-- Expanded definition. March 31, 2004 changes by George Kerscher --><strong>Description:</strong> Contains a pointer to an audio clip of a <code>&lt;docTitle&gt;</code>

or <code>&lt;docAuthor&gt;</code>, or of the audio content of a <code>&lt;navLabel&gt;</code> or <code>&lt;navInfo&gt;</code>.

  <br /><strong>Declaration:</strong> <code>&lt;!ELEMENT audio

  EMPTY&gt;</code><br /><strong>Syntax:</strong> <code>&lt;audio</code>...attributes...

  <code>/&gt;</code><br /><strong>Attributes:</strong> <br />

  <ul id="ul_97">

    <li id="li_369"><strong>id (ID, IMPLIED):</strong> Optional unique identifier. </li>

    <li id="li_370"><strong>class (CDATA, IMPLIED):</strong> Optional descriptor of this

    instance of the element. </li>

    <li id="li_371"><strong>src (CDATA, REQUIRED):</strong> The URI of the audio media

    object. Ordinarily, this will point to an audio file containing the content

    of the DTB. However, when a DTB spans several media units, the URI can point

    to a file containing a clip of the heading or title referenced. See section

    8.4.2, "<a

    href="#NCXSpan">DTBs

    Spanning Multiple Media Units.</a>"</li>

    <li id="li_372"><!-- Revised:  clipBegin/clipEnd now required --><strong>clipBegin (%SMILtimeVal, REQUIRED): </strong>The clipBegin

    attribute specifies the beginning of a segment of a continuous media object

    as a time offset from the start of the media object. The value syntax is

    defined by the SMIL 2.0 Timing and Synchronization Module <a

    href="#ref-SMIL">[SMIL].</a>

    See section 7.7, "<a

    href="#Clock">Media Clipping and Clock Values</a>." </li>

    <li id="li_373"><strong>clipEnd (%SMILtimeVal, REQUIRED): </strong>The clipEnd attribute

    specifies the end of a segment of a continuous media object as a time offset

    from the start of the media object. It uses the same attribute value syntax

<!-- Revision:  Added <navInfo> to "valid inside" list -->

    as clipBegin. </li></ul><strong>Valid inside:</strong> <code>&lt;navLabel&gt;</code>,

  <code>&lt;docTitle&gt;</code>, <code>&lt;docAuthor&gt;</code>, <code>&lt;navInfo&gt;</code><br /><br />

</li>



   <!-- img -->

  <li id="li_386"><strong>&lt;img&gt;</strong><br /><!-- Expanded definition. March 31, 2004 changes by George Kerscher --><strong>Description:</strong> Contains a pointer to graphical content associated with a <code>&lt;docTitle&gt;</code>

or <code>&lt;docAuthor&gt;</code>, or of a <code>&lt;navLabel&gt;</code> or <code>&lt;navInfo&gt;</code>.

  <br /><strong>Declaration:</strong><code> &lt;!ELEMENT img

  EMPTY&gt;</code><br /><strong>Syntax:</strong> <code>&lt;img</code>...attributes...

  <code>/&gt;</code><br /><strong>Attributes:</strong> <br />

  <ul id="ul_101">

    <li id="li_387"><strong>id (ID, IMPLIED):</strong> Optional unique identifier.</li>

    <li id="li_388"><strong>class (CDATA, IMPLIED):</strong> Optional descriptor of this

    instance of the element.</li>

    <li id="li_389"><strong>src (CDATA, REQUIRED):</strong> The URI of the media object.

<!-- Revision:  Added docTitle, docAuthor, and navInfo to list of "valid inside" elements -->

    </li></ul><strong>Valid inside:</strong> <code>&lt;docTitle&gt;</code>,

    <code>&lt;docAuthor&gt;</code>, <code>&lt;navLabel&gt;</code>,

    <code>&lt;navInfo&gt;</code><br /><br /></li>



<!-- navMap -->



  <li id="li_374"><!-- Revision:  Added navInfo to content model --><strong>&lt;navMap&gt;</strong><br /><strong>Description:</strong> Container for

  primary navigation information.<br /><strong>Declaration:</strong> <code>&lt;!ELEMENT

  navMap (navInfo*, navLabel*, navPoint+)&gt;</code><br /><strong>Syntax:</strong>

  <code>&lt;navMap</code>

  ...attributes...<code>&gt;</code>...content...<code>&lt;/navMap&gt;</code><br /><strong>Attributes:</strong>



  <ul id="ul_98">

    <li id="li_375"><strong>id (ID, IMPLIED):</strong> Optional unique identifier.

  </li></ul><strong>Valid inside:</strong> <code>&lt;ncx&gt;</code><br /><!-- Revision:  Rewrote comments to reflect pageList --><strong>Comments:</strong>

  The <code>navMap</code> element contains the primary navigation information,

  pointing to each of the major structural elements of the document. Page numbers are contained in

  <code>pageList</code>.  Other secondary

  navigation elements, such as footnotes, are not included in

  <code>navMap</code>, but are contained in <code>navList</code>s.<br /><br />

</li>



   <!-- navPoint -->

  <li id="li_376"><strong>&lt;navPoint&gt;</strong><br /><strong>Description:</strong> Contains

  description(s) of target and pointer to content. <br /><strong>Declaration:</strong>

  <code>&lt;!ELEMENT navPoint (navLabel+, content,

  navPoint*)&gt;</code><br /><strong>Syntax:</strong> <code>&lt;navPoint</code>

  ...attributes...<code>&gt;</code>...content...<code>&lt;/navPoint&gt;</code><br />

  <!-- Revised:  Dropped onFocus, onBlur attributes --><!-- Revised:  Dropped value attribute -->

<!-- Revised:  Dropped pageRef attribute and value attribute--><strong>Attributes:</strong>

  <br />

  <ul id="ul_99">

    <li id="li_377"><strong>id (ID, REQUIRED):</strong> Unique identifier. </li>



    <li id="li_380"><strong>class (CDATA, IMPLIED):</strong>

    <!-- revised mg:

    Describes the kind of

    structural object represented by this navPoint, e.g. chapter, section; used

    to select a presentation from the resource file. Player will locate the

    resource whose <code>type</code> attribute equals "ncx", whose

    <code>elementRef</code> attribute value is navPoint, and whose

    <code>classRef</code> references the class of the current

    <code>navPoint</code>.

    -->

    Optional descriptor of this

    instance of the element. Can be used

    to select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."</li>



        <li id="li_382"><!-- LR 2004-03-26  replaces pageRef item  with playOrder --><strong>playOrder (CDATA, REQUIRED):</strong> Positive integer denoting the location of the content of this <code>navPoint</code> in the default playing sequence.  See section 8.4.3, "<a href="#NCXplay">playOrder Attribute</a>."

      </li>

  </ul><strong>Valid

  inside:</strong> <code>&lt;navMap&gt;</code>,

  <code>&lt;navPoint&gt;</code><br /><strong>Comments:</strong> The <code>navPoint</code>

  element contains one or more <code>navLabel</code>s, representing the

  referenced part of the document, e.g. chapter title or section number, along

  with a pointer to <code>content</code>. <code>&lt;navPoint&gt;</code>s may be nested

  to represent the hierarchical structure of a document.<br /><br /></li>



    <!-- navLabel -->

  <li id="li_383"><strong>&lt;navLabel&gt;</strong><br /><!-- Revision:  Added pageList and pageTarget here 2004-04-20 MM/LR/MH Revised description.--><strong>Description:</strong> Contains a

  label identifying a given <code>&lt;navMap&gt;</code>, <code>&lt;navPoint&gt;</code>, <code>&lt;pageList&gt;</code>, <code>&lt;pageTarget&gt;</code>,

  <code>&lt;navList&gt;</code>, or

  <code>&lt;navTarget&gt;</code> in various media for presentation to the user. When applied to <code>&lt;navPoint&gt;</code>s, it generally contains the heading of the referenced section of the document.  Can be repeated so labels can be provided in multiple

  languages.<br /><strong>Declaration:</strong><code> &lt;!ELEMENT navLabel (((text, audio?)

  | audio), img?)&gt;</code><br /><strong>Syntax:</strong> <code>&lt;navLabel</code>

 ...attributes...<code>&gt;</code>...content...<code>&lt;/navLabel&gt;</code><br /><strong>Attributes:</strong>

  <ul id="ul_100">



    <li id="li_384"><!-- Revised:  Changed "lang" to "xml:lang" --><strong>xml:lang (NMTOKEN, IMPLIED):</strong> Specifies the <a

    href="#RFC3066">[RFC

    3066]</a> language code of the language of the heading. Can be used to

    control presentation of headings in a specified language.</li>

    <li id="li_385"><strong>dir ((rtl|ltr), IMPLIED):</strong> Specifies the direction of

    the text, where ltr is left to right and rtl is right to left.</li></ul>

<!-- Revision:  Added pageList and pageTarget to list of "valid inside" elements -->

  <strong>Valid inside:</strong> <code>&lt;navMap&gt;</code>,

  <code>&lt;navPoint&gt;</code>, <code>&lt;pageList&gt;</code>,

  <code>&lt;pageTarget&gt;</code>, <code>&lt;navList&gt;</code>,

  <code>&lt;navTarget&gt;</code><br /><br /></li>





<!-- navInfo -->

  <li id="li_jpni001">  <!-- Revision:  New element navInfo --><strong>&lt;navInfo&gt;</strong><br /><strong>Description:</strong> Contains an informative comment

  about a <code>&lt;navMap&gt;</code>, <code>&lt;pageList&gt;</code>, or <code>&lt;navList&gt;</code>

  in various media for presentation to the user.

  Can be repeated so comments can be provided in multiple

  languages.<br /><strong>Declaration:</strong><code> &lt;!ELEMENT navInfo (((text, audio?)

  | audio), img?)&gt;</code><br /><strong>Syntax:</strong> <code>&lt;navInfo</code>   ...attributes...<code>&gt;</code>...content...<code>&lt;/navInfo&gt;</code><br />

  <strong>Attributes:</strong>

  <ul id="ul_jpni001">

    <li id="li_jpni002"><strong>xml:lang (NMTOKEN, IMPLIED):</strong> Specifies the <a

    href="#RFC3066">[RFC

    3066]</a> language code of the language of the comment. Can be used to

    control presentation of comments in a specified language.</li>

    <li id="li_jpni003"><strong>dir ((rtl|ltr), IMPLIED):</strong> Specifies the direction of

    the text, where ltr is left to right and rtl is right to left.

  </li></ul><strong>Valid inside:</strong> <code>&lt;navMap&gt;</code>,

  <code>&lt;pageList&gt;</code>,

  <code>&lt;navList&gt;</code><br />

  <strong>Comment:</strong>While <code>navLabel</code> contains a brief identifying label for a <code>navMap</code>,

  <code>pageList</code>, or <code>navList</code>, <code>navInfo</code> is used to present longer, explanatory or informative

  text regarding the structure or content of these navigation features.

  <br /><br /></li>







    <!-- content -->

    <li id="li_390"> <strong>&lt;content&gt;</strong><br />

      <strong>Description:</strong> Pointer into SMIL file to beginning of the item referenced

      by the <code>navPoint</code> or <code>navTarget</code>.<br />

      <strong>Declaration:</strong><code> &lt;!ELEMENT content EMPTY&gt;</code><br />

      <strong>Syntax:</strong><code> &lt;content</code>...attributes... <code>/&gt;</code><br />

      <strong>Attributes:</strong> <br />

      <ul id="ul_102">

        <li id="li_391"> <strong>id (ID, IMPLIED):</strong> Optional unique identifier. </li>

        <li id="li_392"> <strong>src (CDATA, REQUIRED):</strong> The URI of the SMIL time container

          corresponding to the start of the referenced part of the document. </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;navPoint&gt;</code>, <code>&lt;navTarget&gt;</code><br />

      <br />

    </li>



    <!-- pageList -->



  <li id="li_392a"><!-- Revision:  Added new element pageList --><strong>&lt;pageList&gt;</strong><br /><strong>Description:</strong> Container for

  pagination information.<br /><strong>Declaration:</strong><code> &lt;!ELEMENT

  pageList (navInfo*, navLabel*, pageTarget+)&gt;</code><br /><strong>Syntax:</strong>

  <code>&lt;pageList</code>   ...attributes...<code>&gt;</code>...content...<code>&lt;/pageList&gt;</code><br />

  <strong>Attributes:</strong><br />

  <ul id="ul_102a">

    <li id="li_392b"><strong>id (ID, IMPLIED):</strong> Optional unique identifier. </li>

    <li id="li_392c"><!-- mg added: new attribute--><strong>class (CDATA, IMPLIED):</strong>

    Optional descriptor of the element. Can be used

    to select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."

    </li></ul>

    <strong>Valid inside:</strong> <code>&lt;ncx&gt;</code><br /><strong>Comments:</strong> The

  <code>pageList</code> element contains navigation information for pages within

  <code>pageTarget</code>s. Each navigable page within the book will be represented by a pageTarget

   within the pageList.<br /><br /></li>



   <!-- pageTarget -->



  <li id="li_392c_2"><!-- Revision:  Added pageTarget element description MM, 2004-04-05 made id required. 2004-07-07 MM added content model for "type" attribute --><strong>&lt;pageTarget&gt;</strong><br /><strong>Description:</strong> Container for

  text, audio, image, and content elements containing navigational

  information for pages.<br /><strong>Declaration:</strong> <code>&lt;!ELEMENT pageTarget (navLabel+,

  content)&gt;</code><br /><strong>Syntax:</strong><code> &lt;pageTarget</code>   ...attributes...<code>&gt;</code>...content...<code>&lt;/pageTarget&gt;</code><br />

  <strong>Attributes:</strong><br />

  <ul id="ul_102b">

    <li id="li_392d"><strong>id (ID, REQUIRED):</strong> Unique identifier.</li>

    <li id="li_392e"><!-- MM, LR, Zed AC 2004-03-31 New definition of value --><strong>value (CDATA, IMPLIED):</strong> A positive integer representing

the numeric value associated with a page. Combination of values of <code>type</code> and

<code>value</code> attributes must be unique, when value attribute is present.

See section 8.4.5 "<a href="#NCXPage">Enabling Page Navigation</a>."</li>

    <li id="li_392f">

		<strong>type (front | normal | special) REQUIRED:</strong> Describes the kind of page represented by this <code>pageTarget</code>. Value must be one of: "front" (for roman-numeral pages at the start of a book), "normal" (for pages identified by arabic numerals), or "special" (for all other kinds of pages).

	</li>



    <li id="li_392g"><!-- class added by mg: --><strong>class (CDATA, IMPLIED):</strong>

    Optional descriptor of this

    instance of the element. Can be used

    to select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."

    </li>

    <li id="li_392h"><!-- LR 2004-04-02 Added attribute playOrder --><strong>playOrder (CDATA, REQUIRED):</strong> Positive integer denoting the location of the

        content of this <code>pageTarget</code> in the default playing sequence.  See section 8.4.3, "<a href="#NCXplay">playOrder Attribute</a>."

</li></ul><strong>Valid inside:</strong>

  <code>&lt;pageList&gt;</code><br /><br />

</li>



    <!-- navList -->



  <li id="li_393"><!-- Revision:  Added navInfo to content model --><strong>&lt;navList&gt;</strong><br /><strong>Description:</strong> Container for

  secondary navigational information.<br /><strong>Declaration:</strong><code> &lt;!ELEMENT

  navList (navInfo*, navLabel+, navTarget+)&gt;</code><br /><strong>Syntax:</strong>

  <code>&lt;navList</code>   ...attributes...<code>&gt;</code>...content...<code>&lt;/navList&gt;</code><br />

  <strong>Attributes:</strong><br />

  <ul id="ul_103">

    <li id="li_394"><strong>id (ID, IMPLIED):</strong> Optional unique identifier.</li>

    <li id="li_395"><strong>class (CDATA, IMPLIED):</strong>

    <!-- revised mg:

    The kind of objects represented

    by this <code>navList</code>, described by their <code>dtbook</code> element

    name, e.g. <code>pagenum</code>, <code>note</code>.

    -->

    Optional descriptor of this

    instance of the element. Can be used

    to select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."

    </li></ul><strong>Valid

  inside:</strong> <code>&lt;ncx&gt;</code><br /><!-- Revision:  Removed mention of pages here --><strong>Comments:</strong> The

  <code>navList</code> element contains secondary navigation information within

  <code>navTarget</code>s. It is similar to <code>navMap</code> except

  <code>navTarget</code>s may not nest, whereas <code>navPoint</code>s can. Used

  for lists of elements such as footnotes, figures, tables, etc.

  that the user may want to access directly but would clutter up the primary

  navigation information.<br /><br /></li>



   <!-- navTarget -->

  <li id="li_396"><strong>&lt;navTarget&gt;</strong><br /><strong>Description:</strong> Container for

  text, audio, image, and content elements containing secondary navigational

  information.<br /><strong>Declaration:</strong> <code>&lt;!ELEMENT navTarget (navLabel+,

  content)&gt;</code><br /><strong>Syntax:</strong><code> &lt;navTarget</code>   ...attributes...<code>&gt;</code>...content...<code>&lt;/navTarget&gt;</code><br /><strong>

  Attributes:</strong>

  <br />

  <ul id="ul_104">

    <li id="li_397"><strong>id (ID, REQUIRED):</strong> Unique identifier.

<!-- Revised:  Dropped onFocus, onBlur attributes -->

<!-- Revised:  Removed mention of pages here --></li>

    <li id="li_400"><strong>value (CDATA, IMPLIED):</strong> A positive integer representing the numeric value associated with a <code>navTarget</code>.  Useful for providing integer values for items within the <code>navList</code>.</li>

    <li id="li_401"><strong>class (CDATA, IMPLIED):</strong>

    <!-- revised mg:

    Describes the kind of object

    represented by this <code>navTarget</code>, described by its DTBook element

    name, e.g., <code>pagenum</code>, <code>note</code>. It may be used to

    select a presentation from the resource file. Player will locate the

    resource whose <code>type</code> attribute equals "ncx", whose

    <code>elementRef</code> attribute value is navTarget, and whose

    <code>classRef</code> references the class of the current

    <code>navTarget</code>.

    -->

    Optional descriptor of this

    instance of the element. Can be used to

    select a presentation from the resource file. See section 10.3, "<a href="#ResReq">Resource File Requirements</a>."

  </li>



        <li id="li_402"><!-- LR 2004-03-26 replaces mapRef item with playOrder --> <strong>playOrder (CDATA, REQUIRED):</strong> Positive integer denoting the location of the content of this <code>navTarget</code> in the default playing sequence. See section 8.4.3, "<a href="#NCXplay">playOrder Attribute</a>."

</li></ul><strong>Valid inside:</strong>

  <code>&lt;navList&gt;</code><br /><strong>Comments:</strong> The <code>navTarget</code>

  element contains one or more <code>navLabel</code>s representing the

<!-- Revised:  Removed mention of pages here -->

<!-- Revised:  Removed mention of mapRef here -->

  referenced part of the document, e.g., a footnote, along with a

  pointer to <code>content</code>.<br /><br /></li></ul>



  <h2 id="h2_33">8.4 <a name="FileReq">Other File Requirements</a> </h2>

  <p id="para_146">This section collects other normative requirements for the NCX file that

    cannot be enforced by the DTD. </p>

  <!-- Section 8.4.1

     Revised by JP, 05 Jan 2004

        - Removed dtb:pageFront, dtb:pageNormal, dtb:pageSpecial, dtb:maxPageNormal

        - Added dtb:totalPageCount and dtb:maxPageNumber

-->

<h3 id="h3_80">8.4.1 <a name="NavMeta">Navigation Metadata</a></h3>

<p class="sstatus">(This section is normative.)</p>

<p id="para_147">Metadata shall be included in the <code>head</code> element of

the NCX using the <code>meta</code> element. Content producers may introduce other

metadata besides those listed below, if needed. However, metadata names shall

not begin with the prefix "dtb:" unless defined in this standard. Players must

not fail when encountering unknown metadata but must, at a minimum, ignore it.



</p>



<ul id="ul_105">

  <li id="li_403">dtb:uid

  <ul id="ul_106">

    <li id="li_404">Content: The globally unique identifier for the DTB. The value is the same as that of the <code>dc:Identifier</code> element referenced by the <code>unique-identifier</code> attribute on the package file's <code>package</code> element. See section 3.1, "<a href="#PkgId">Package Identity</a>."</li>

    <li id="li_405">Occurrence: Required </li>

  </ul>

  </li>



  <li id="li_406">dtb:depth

  <ul id="ul_107">

    <li id="li_407">Content: Positive integer indicating depth of structure of the

    DTB as exposed by the NCX. </li>

    <li id="li_408">Occurrence: Required </li>

  </ul>

  </li>



  <li id="li_409">dtb:generator

  <ul id="ul_108">

    <li id="li_410">Content: Name and version of software that generated the NCX.</li>

    <li id="li_411">Occurrence: Optional - recommended.</li>

  </ul>

  </li>



<!-- Removed (JP, 05 Jan 2004)

  <li id=li_412>dtb:maxPageNormal

  <ul id=ul_109>



    <li id=li_413>Content: Non-negative integer indicating the content of the

    highest "normal" <code>pagenum</code> in the DTB.

    <li id=li_414>Occurrence: Required </li></ul>

-->

<!-- Removed (JP, 05 Jan 2004)

  <li id=li_415>dtb:pageFront

  <ul id=ul_110>

    <li id=li_416>Content: Non-negative integer indicating the number of "front"

    pages in the DTB.

    <li id=li_417>Occurrence: Required </li></ul>

-->

<!-- Removed (JP, 05 Jan 2004)

  <li id=li_418>dtb:pageNormal

  <ul id=ul_111>



    <li id=li_419>Content: Positive integer indicating the number of "normal"

    pages in the DTB.

    <li id=li_420>Occurrence: Required </li></ul>

-->

<!-- Removed (JP, 05 Jan 2004)

  <li id=li_421>dtb:pageSpecial

  <ul id=ul_112>

    <li id=li_422>Content: Non-negative integer indicating the number of

    "special" pages in the DTB.

    <li id=li_423>Occurrence: Required </li></ul></li>

-->

  <li id="li_jp423a"><!-- Added (JP, 05 Jan 2004) Updated 2004-04-19 MM to change definition. -->

dtb:totalPageCount

  <ul id="ul_jp423b">

    <li id="li_jp423c">Content:  Non-negative integer indicating the number of <code>pageTargets</code> in the <code>pageList</code>. If there are no navigable pages, then dtb:totalPageCount must have a value of zero.</li>

    <li id="li_jp423d">Occurrence:  Required</li>

  </ul>

  </li>



  <li id="li_jp423e"><!-- Added (JP, 05 Jan 2004) Updated 2004-04-19 MM to change definition. -->

dtb:maxPageNumber

  <ul id="ul_jp423f">

    <li id="li_jp423g">Content:  Non-negative integer indicating the largest <code>value</code> attribute on <code>pageTarget</code>in the <code>pageList</code>.  If there are no navigable pages, then dtb:maxPageNumber must have a value of zero.</li>

    <li id="li_jp423h">Occurrence:  Required</li>

  </ul>

  </li>



</ul>





  <h3 id="h3_82">8.4.2 <a name="NCXSpan">DTBs Spanning Multiple Media Units</a></h3>

  <p class="sstatus">(This section is normative.)</p>

  <p id="para_148">When a DTB spans several distribution media (e.g., multiple CD-ROMs), the

    full NCX along with all audio clips and images directly referenced by it must be included on

    every media unit. This will ensure that the entire NCX will function properly

    on each piece of media.</p>

  <h3 id="h3_84"><!-- LR 2004-04-02 replace old section 8.4.3 with this one. 2004-04-20 MM/LR/MH  Allow duplicate playOrder values. -->8.4.3 <a name="NCXplay">playOrder Attribute</a></h3>

  <p class="sstatus">(This section is normative.)</p>

<p id="para_149">The <code>playOrder</code> attribute is required on each

<code>pageTarget</code>, <code>navTarget</code> and <code>navPoint</code>. It

provides a means to collate all <code>pageTarget</code>s, <code>navTarget</code>s, and <code>navPoint</code>s into a single ordered sequence that reflects their

order in the normal playback sequence of the book as presented in the

<code>spine</code> and SMIL file(s). <code>playOrder</code> is a positive

integer; the first <code>playOrder</code> value in a document shall be 1.

When the <code>content</code> elements of any <code>pageTarget</code>s, <code>navTarget</code>s, or <code>navPoint</code>s reference the same SMIL time container, they must have the same <code>playOrder</code> value.  <code>playOrder</code> must increase by one for each unique SMIL time container referenced by any <code>pageTarget</code>, <code>navTarget</code> or <code>navPoint</code>.</p>



<h3 id="h3_86">8.4.4 <a name="NCXCustom">smilCustomTest Element</a></h3>

  <p class="sstatus">(This section is normative.)</p>

 <p id="para_150"><!-- MM  2004-04-05  Specified which elements need to be copied to NCX. 2004-04-20 MM/LR/MH  Added bookStruct attribute requirement.-->Each unique <code>customTest</code> element that appears in one or more SMIL files and has been referenced at least once by a <code>customTest</code> attribute must have three of its attributes (<code>id</code>, <code>override</code>, and <code>defaultState</code>) duplicated in a <code>smilCustomTest</code> element in the <code>head</code> of the NCX.  In addition, when the <code>customTest</code> element in SMIL has been applied to a time container holding one of the book structures defined below, the <code>bookStruct</code> attribute must be applied to the corresponding <code>smilCustomTest</code> and contain the appropriate value from the list below.</p>



<p id="para_150m"><!-- TM 2004-06-23 Reworded, added resource file note. 2004-07-28 MM Reworded per Zed call. -->The special vocabulary below is provided to identify the semantics of the skippable elements listed.  Producers are required to provide Resource File entries for all skippable elements.  See section 7.4.3, "<a href="#Skip">'Skippable' Structures</a>" and <a href="#ResEx">Example 10.1</a>. Players that are not capable of using the Resource File must provide text (if supported) and audio labels for each of the items listed here.  Players capable of utilizing the Resource File must render resources provided with the DTB in preference to labels embedded in the player.</p>



<dl id="dl_6">

<dt id="dt_170">LINE_NUMBER</dt>

<dd id="dd_170">The number of a line in a poem, legal work, or other document.</dd>

<dt id="dt_171">NOTE</dt>

<dd id="dd_171">A comment, explanation, or reference placed apart from the text of a document (called "footnote" if placed at the bottom of the page, or "endnote" or "note" if placed at the end of the chapter or book.)</dd>

<dt id="dt_172">NOTE_REFERENCE</dt>

<dd id="dd_172">A mark or character identifying a specific note.</dd>

<dt id="dt_173">ANNOTATION</dt>

<dd id="dd_173">A comment or explanation that differs from NOTE in that it is usually set in the margin or on a facing page, often with no explicit reference to it inserted in the text.</dd>

<dt id="dt_174">PAGE_NUMBER</dt>

<dd id="dd_174">The number of a page.</dd>

<dt id="dt_175">OPTIONAL_PRODUCER_NOTE</dt>

<dd id="dd_175">A comment or explanation added by the DTB producer that is commonly used to provide descriptions of visual elements or describe differences between the print book and the audio version. OPTIONAL_PRODUCER_NOTE must not contain warnings or cautions about hazards.</dd>

<dt id="dt_176">OPTIONAL_SIDEBAR</dt>

<dd id="dd_176">Information supplementary to the main text and/or narrative flow that is often boxed and printed apart from the main text block on a page. OPTIONAL_SIDEBAR must not contain warnings or cautions about hazards.</dd>

</dl>



    <h3 id="h3_87a">8.4.5 <a name="NCXPage"><!-- MM, LR, Zed AC 2004-03-31 New section  2004-04-20 MM/LR/MH  Strongly recommended valuing value and text. --> Enabling Page Navigation</a> </h3>

    <p class="sstatus">(This section is normative.)</p>

    <p id="para_150a">In order to allow direct numeric access to pages, it is strongly recommended that the <code>value</code> attribute be applied to all <code>pageTarget</code>s.  <code>value</code> is a positive integer.  The combination of values for the <code>type</code> and <code>value</code> attributes must be unique, when the <code>value</code>

attribute is present.</p>



<p id="para_150b">When a page number exists in the original document, it is strongly recommended that the <code>text</code> element in the <code>navLabel</code> on the corresponding <code>pageTarget</code> contain the textual representation of the page number.  In documents where alphanumeric page numbers are present,

players may use the content of the <code>text</code> element of the

<code>navLabel</code> associated with the <code>pageTarget</code> for direct

access to the page. The <code>navLabel</code> should be treated as the

authoritative rendering of the page identifier.</p>



  <h2 id="h2_34">8.5 <a name="NCXWorks">How the NCX Works</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_151">Upon opening a DTB, a player will ordinarily use the NCX <code>navMap</code>

    to define the user's choices for navigation. The <code>navMap</code> contains

    nested <code>navPoint</code>s that represent the major divisions of the document.

    For example, the structure of the book whose NCX is shown in section 8.6,

    Example 8.1, would look like this:</p>

  <ul id="ul_113">

    <li id="li_424">Foreword.........................................(Level 1)

      <ul id="ul_114">

        <li id="li_425">History......................................(Level 2)</li>

        <li id="li_426">Development of Standards.........(Level 2) </li>

      </ul>

    </li>

    <li id="li_427">Standards.........................................(Level 1)

      <ul id="ul_115">

        <li id="li_428">1 Core Services........................(Level 2)

          <ul id="ul_116">

            <li id="li_429">1.1....................................(Level 3)

              <ul id="ul_117">

                <li id="li_430">a................................(Level 4)</li>

              </ul>

            </li>

            <li id="li_431">1.2....................................(Level 3)</li>

          </ul>

        </li>

      </ul>

    </li>

  </ul>





<p id="para_152">Foreword and Standards are at the same level, in this case the highest level,

  Level 1. The nesting of <code>navPoint</code>s allows the user to move directly

  between these objects without passing through the lower level divisions in between.

  From Foreword, the user can move to Level 2 and step to any of the sections

  of Foreword. Since there is no Level 3 under Foreword, no smaller divisions

  can be accessed from the NCX. Such smaller divisions may be present, but they

  can only be reached through <a href="#d-locnav">local navigation</a>. The division

  of Standards marked "a." is at Level 4, and can be reached by stepping through

  "1 Core Services" and "1.1." </p>

<p id="para_153"><!-- Added mention of pageLists.  MM 2004-04-05 -->The user will also have the option of navigating to items that do not fit

    easily into the hierarchical structure of a document, e.g., pages, footnotes,

    or sidebars. This function is provided by <code>pageList</code> (for pages) and <code>navList</code> (for all other non-hierarchical objects). Unlike the <code>navMap</code>, <code>pageList</code> and <code>navList</code> do not allow nesting. Example 8.1 shows a <code>pageList</code> containing three <code>pageTarget</code>s representing page numbers,

    and a <code>navList</code> containing three <code>navTarget</code>s representing notes.

</p>



<p id="para_153a"><!-- 2004-04-20 mm/lr/mh  New para.-->The <code>navInfo</code> element allows producers to describe in some detail the contents, purpose, and use of the <code>navMap</code>, <code>pageList</code>, and any <code>navList</code>s.  See the <code>navList</code> in example 8.1 below.</p>



<p id="para_154"><!-- Additions re navLabel - jp, mm 4/5/2004.  2004-04-20 MM/LR/MH modified description of navLabel. -->Each <code>navPoint</code>, <code>pageTarget</code>, or

<code>navTarget</code> provides navigation information about one piece of the

document, e.g., a chapter heading, section number, page number, figure, etc. The

<code>navLabel</code> element provides the content of the heading, page number, figure title, etc. in multiple media.  Within a <code>navLabel</code>, the <code>text</code> element contains the

actual heading, page number, etc. for visual, braille or text-to-speech

presentation; the <code>audio</code> element uses SMIL 2.0 syntax to point to a

clip containing the audio presentation of the same information. One or both are

used to give location feedback to the user. The <code>content</code> element

provides a pointer to an ID within a SMIL file that marks the beginning of the

referenced portion of the DTB. </p>

<p id="para_155"><!-- LR 2004-04-02 Revised to describe playOrder . 2004-04-20 MM/LR/MH Made last sentence parallel to previous one. -->The required <code>playOrder</code> attribute on

<code>pageTarget</code>, <code>navTarget</code> and <code>navPoint</code> allows

synchronization of the <code>pageList</code> and <code>navList</code>s  with the

<code>navMap</code>. In determining what to say in response to "Where am I?"

requests by the user, a player can find the current <code>navMap</code> location by finding the

<code>navPoint</code> with the largest <code>playOrder</code> attribute value

less than or equal to the value of the <code>playOrder</code> attribute for the

most recently traversed <code>navPoint</code>, <code>pageTarget</code> or

<code>navTarget</code>. Similarly, a player can determine the current page by

searching for <code>pageTarget</code>s having equal or lower

<code>playOrder</code> than that of the most recently traversed <code>navPoint</code>, <code>pageTarget</code> or <code>navTarget</code>.</p>



  <p id="para_156">This standard offers producers the ability to gather in the <code>head</code>

    of the NCX information on all skippable elements from the SMIL file(s). (See

    section 7.4.3, "<a href="#Skip">'Skippable' Structures</a>.") The <code>smilCustomTest</code> element

    may be repeated to list all skippable elements and their defaultStates. Playback

    systems may use this information to inform readers of their options and

    current settings for skippable structures.</p>



 <h2 id="h2_35">8.6 <a name="NCXEx">Example</a></h2>

  <p class="sstatus" id="h3_89">(This example is informative.)</p>

  <!-- NB20050622 Added class attribute to above h3 (h3_89) and converted to <p> -->

  <p id="para_157"><!-- TM 2004-05-17 Added @bookStruct 2004-07-07 MM added xml:lang on ncx--><!-- 2004-04-05 JP, TM, revised per many changes in section 8. 2004-04-20 MM/LR/MH Clarified navInfo on navList.-->Example 8.1:</p>



<pre><samp id="smp_15">

&lt;?xml version="1.0"  encoding="UTF-8"?&gt;

&lt;!DOCTYPE ncx PUBLIC "-//NISO//DTD ncx 2005-1//EN"

  "http://www.daisy.org/z3986/2005/ncx-2005-1.dtd"&gt;

&lt;ncx version="2005-1" xml:lang="en" xmlns="http://www.daisy.org/z3986/2005/ncx/"&gt;

  &lt;head&gt;

    &lt;smilCustomTest id="pagenum" defaultState="false"

    override="visible" bookStruct="PAGE_NUMBER"/&gt;

    &lt;smilCustomTest id="note" defaultState="true"

    override="visible" bookStruct="NOTE"/&gt;

    &lt;meta name="dtb:uid" content="us-nls-00001"/&gt;

    &lt;meta name="dtb:depth" content="6"/&gt;

    &lt;meta name="dtb:generator" content="NLSv001"/&gt;

    &lt;meta name="dtb:totalPageCount" content="53"/&gt;

    &lt;meta name="dtb:maxPageNumber" content="49"/&gt;

  &lt;/head&gt;

  &lt;docTitle&gt;

     &lt;text&gt;Revised Standards and Guidelines of Service

     for the Library of Congress Network of Libraries for the

     Blind and Physically Handicapped 1995&lt;/text&gt;

     &lt;audio src="rs_title.mp3" clipBegin="00:00.00" clipEnd="00:09.04"/&gt;

     &lt;img src="rs_title.png" /&gt;

  &lt;/docTitle&gt;

  &lt;docAuthor&gt;

       &lt;text&gt;Association of Specialized and Cooperative

       Library Agencies&lt;/text&gt;

       &lt;audio src="rs_title.mp3" clipBegin="00:09.50" clipEnd="00:14.70"/&gt;

  &lt;/docAuthor&gt;

  &lt;navMap&gt;

      &lt;navPoint class="chapter" id="lvl1_3" playOrder="2"&gt;

        &lt;navLabel&gt;

          &lt;text&gt;Foreword&lt;/text&gt;

          &lt;audio src="rs_fwdx.mp3" clipBegin="00:01.50"

          clipEnd="00:02.00" /&gt;

        &lt;/navLabel&gt;

        &lt;content src="sample.smil#h1_3" /&gt;

        &lt;navPoint class="section" id="lvl2_1" playOrder="3"&gt;

          &lt;navLabel&gt;

            &lt;text&gt;History&lt;/text&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="00:03.40"

            clipEnd="00:03.90" /&gt;

          &lt;/navLabel&gt;

          &lt;content src="sample.smil#h2_1" /&gt;

        &lt;/navPoint&gt;

        &lt;navPoint class="section" id="lvl2_2" playOrder="5"&gt;

          &lt;navLabel&gt;

            &lt;text&gt;Development of Standards&lt;/text&gt;

            &lt;audio src="rs_fwdx.mp3" clipBegin="00:56.30"

            clipEnd="00:57.70" /&gt;

          &lt;/navLabel&gt;

          &lt;content src="sample.smil#h2_2" /&gt;

        &lt;/navPoint&gt;

      &lt;/navPoint&gt;

      &lt;navPoint class="chapter" id="lvl1_7" playOrder="10"&gt;

        &lt;navLabel&gt;

          &lt;text&gt;Standards&lt;/text&gt;

          &lt;audio src="rs_stdx.mp3" clipBegin="00:01.30"

          clipEnd="00:02.10" /&gt;

        &lt;/navLabel&gt;

        &lt;content src="sample.smil#h1_7" /&gt;

        &lt;navPoint class="section" id="lvl2_11" playOrder="11"&gt;

          &lt;navLabel&gt;

            &lt;text&gt;1 Core Services&lt;/text&gt;

            &lt;audio src="rs_stdx.mp3" clipBegin="00:02.90"

            clipEnd="00:04.90" /&gt;

          &lt;/navLabel&gt;

          &lt;content src="sample.smil#h2_10" /&gt;

          &lt;navPoint class="subsection" id="lvl3_1" playOrder="12"&gt;

            &lt;navLabel&gt;

              &lt;text&gt;1.1&lt;/text&gt;

              &lt;audio src="rs_stdx.mp3" clipBegin="00:05.70"

              clipEnd="00:06.70" /&gt;

            &lt;/navLabel&gt;

            &lt;content src="sample.smil#h3_1" /&gt;

            &lt;navPoint class="sub-subsection" id="lvl4_1" playOrder="13"&gt;

              &lt;navLabel&gt;

                &lt;text&gt;a.&lt;/text&gt;

                &lt;audio src="rs_stdx.mp3" clipBegin="00:18.70"

                clipEnd="00:19.10" /&gt;

              &lt;/navLabel&gt;

              &lt;content src="sample.smil#h4_1" /&gt;

            &lt;/navPoint&gt;

          &lt;/navPoint&gt;

          &lt;navPoint class="subsection" id="lvl3_2" playOrder="14"&gt;

            &lt;navLabel&gt;

              &lt;text&gt;1.2&lt;/text&gt;

              &lt;audio src="rs_stdx.mp3" clipBegin="00:50.50"

              clipEnd="00:51.40" /&gt;

            &lt;/navLabel&gt;

            &lt;content src="sample.smil#h3_2" /&gt;

          &lt;/navPoint&gt;

        &lt;/navPoint&gt;

      &lt;/navPoint&gt;

      . . .

  &lt;/navMap&gt;

  &lt;pageList id="pages"&gt;

    &lt;navLabel&gt;

        &lt;text&gt;Pages&lt;/text&gt;

        &lt;audio src="navlabels.mp3" clipBegin="00:00.00"

        clipEnd="00:01.10" /&gt;

    &lt;/navLabel&gt;

    &lt;pageTarget class="pagenum" type="normal" id="p1" value="1" playOrder="1"&gt;

      &lt;navLabel&gt;

        &lt;text&gt;1&lt;/text&gt;

        &lt;audio src="rs_fwdx.mp3" clipBegin="00:00.00"

        clipEnd="00:00.90" /&gt;

      &lt;/navLabel&gt;

      &lt;content src="sample.smil#p1" /&gt;

    &lt;/pageTarget&gt;

    &lt;pageTarget class="pagenum" type="normal" id="p2" value="2" playOrder="4"&gt;

      &lt;navLabel&gt;

        &lt;text&gt;2&lt;/text&gt;

        &lt;audio src="rs_fwdx.mp3" clipBegin="00:53.90"

        clipEnd="00:54.60" /&gt;

      &lt;/navLabel&gt;

      &lt;content src="sample.smil#p2" /&gt;

    &lt;/pageTarget&gt;

    &lt;pageTarget class="pagenum" type="normal" id="p3" value="3" playOrder="9"&gt;

      &lt;navLabel&gt;

        &lt;text&gt;3&lt;/text&gt;

        &lt;audio src="rs_stdx.mp3" clipBegin="00:00.00"

        clipEnd="00:00.70" /&gt;

      &lt;/navLabel&gt;

      &lt;content src="sample.smil#p3" /&gt;

    &lt;/pageTarget&gt;

    . . .

  &lt;/pageList&gt;

  &lt;navList id="notes" class="note"&gt;

    &lt;navInfo&gt;

        &lt;text&gt;This list contains the three notes found in this book.

              Each entry in the list, numbered 1 through 3, points to a note reference.

        &lt;/text&gt;

        &lt;audio src="rs_info.mp3" clipBegin="00:00.00"

        clipEnd="00:05.592" /&gt;

    &lt;/navInfo&gt;

    &lt;navLabel&gt;

        &lt;text&gt;Notes&lt;/text&gt;

        &lt;audio src="navlabels.mp3" clipBegin="00:01.50"

        clipEnd="00:02.60" /&gt;

    &lt;/navLabel&gt;

    &lt;navTarget class="note" id="nref_1" playOrder="6"&gt;

      &lt;navLabel&gt;

        &lt;text&gt;1&lt;/text&gt;

        &lt;audio src="rs_fwdx.mp3" clipBegin="01:22.60"

        clipEnd="01:23.50" /&gt;

      &lt;/navLabel&gt;

      &lt;content src="sample.smil#nref_1" /&gt;

    &lt;/navTarget&gt;

    &lt;navTarget class="note" id="nref_2" playOrder="7"&gt;

      &lt;navLabel&gt;

        &lt;text&gt;2&lt;/text&gt;

        &lt;audio src="rs_fwdx.mp3" clipBegin="02:00.60"

        clipEnd="02:01.40" /&gt;

      &lt;/navLabel&gt;

      &lt;content src="sample.smil#nref_2" /&gt;

    &lt;/navTarget&gt;

    &lt;navTarget class="note" id="nref_3" playOrder="8"&gt;

      &lt;navLabel&gt;

        &lt;text&gt;3&lt;/text&gt;

        &lt;audio src="rs_fwdx.mp3" clipBegin="03:13.30"

        clipEnd="03:14.10" /&gt;

      &lt;/navLabel&gt;

      &lt;content src="sample.smil#nref_3" /&gt;

    &lt;/navTarget&gt;

  &lt;/navList&gt;

&lt;/ncx&gt;

</samp>

</pre>



  <p id="para_157n"><a href="#toc">Contents</a></p>



  <h1 id="h1_12">9. <a name="Bkmk">Portable Bookmarks and Highlights</a></h1>

  <h2 id="h2_36">9.1 <a name="BkmkIntro">Introduction</a></h2>

  <p class="sstatus">(This section is normative.)</p>

  <p id="para_158">This standard establishes a specific <a href="#XML">XML</a> file format to

    support bookmark and highlight export and import. A playback system may allow

    readers to set bookmarks and to highlight passages in a document, label the

    marked sections with text or audio notes, and export the resulting collection

    of marks and notes to other compliant playback devices.</p>

  <p id="para_159"><!-- 2004-04-05 TM -updated dtd version -->This standard does

    not require that compliant players support all of the functionality described

    above. In addition, this standard places no constraints on a playback system's

    internal system for storing or manipulating the information in the bookmark

    file. However, if a player supports the export of bookmarks and highlights

    and their associated notes, the player must format the information as a valid <a href="#XML">XML</a> file

    conforming to bookmark-2005-1.dtd. (See <a href="#DTBookDTD">Appendix 1</a>,

    &quot;DTD for Portable Bookmarks/Highlights.&quot;) Similarly,

    a player with bookmark/highlight import capabilities must correctly process

    bookmarks and highlights and their associated notes that are formatted in

    accordance with bookmark-2005-1.dtd.</p>

  <p id="para_160"><!--MH 4 April, 2004 Revised timeOffset description MM 2004-07-29 Changed description of how charOffset is calculated. --> Export-capable

players must be able to set bookmarks and highlight starts and ends at any point

in a DTB, whether based on the position in the audio presentation or the

textual content file. That is, players shall not be limited to capturing

location information only at element boundaries. Offsets from element boundaries

in the audio presentation shall be identified by

<code>&lt;timeOffset&gt;</code>, with a clock value relative to the start of the

SMIL time container referenced in the URI. The value syntax is defined by the

SMIL 2.0 Timing and Synchronization Module <a

href="#ref-SMIL">[SMIL].</a> See section 7.7, "<a

href="#Clock">Media Clipping and Clock Values</a>."  Offsets from element boundaries in textual content files shall be

identified by <code>&lt;charOffset&gt;</code>, measured in characters, counting from the start of the content of the referenced element; start- and end-tags are not counted, white space is then normalized (collapsed to one character).

</p>

  <p id="para_161"><!-- MM 2004-03 Added reference to manifest. -->If a playback device supports user-recording of audio notes on bookmarks or highlights that may be exported, the recording may be in any format supported by the standard. When generating the filename for a note, the playback device must generate a filename extension appropriate to the recording format. (See Section 5, "<a href="#Audio">Audio File Formats</a>" for supported formats and Section 3.3, "<a href="#para_53c">Manifest</a>" for filename extension requirements.)</p>





<p id="para_162">Bookmark files (which may include highlights) shall be named, by default, with

  the value from the bookmark element <code>uid</code> and the extension ".bmk".

  For example: "se-tpb-14339.bmk". Players may allow users to apply

  their own filenames to accommodate character limitations in other filesystems

  and to avoid filename collisions. To accommodate user-supplied names, players

  with bookmark import capabilities must be able to open bookmark files and read

  the <code>uid</code> value to match the correct bookmark file with a DTB. It is recommended that if more than one bookmark file is present for a given DTB, players allow the

  user to choose among them.</p>

  <p id="para_163">Players may implement a variety of systems for numbering or otherwise identifying

    bookmarks or highlighted sections so the user can step through and choose

    from a group of them. However, when preparing a bookmark file for export,

    players must sort the bookmarks and highlights into document order and write

    them in that order.</p>

  <h2 id="h2_37">9.2 <a name="BkmkElem">Bookmark/Highlight Elements</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_164">Brief descriptions of the Bookmark/Highlight elements follow.

    Each includes the element declaration extracted from the Bookmark DTD (see

    <a href="#DTBookDTD">Appendix 1</a>), along with descriptions of any applicable

    attributes.</p>

  <ul id="ul_118">

    <li id="li_432"><strong>&lt;bookmarkSet&gt;</strong><br />

      <strong>Description:</strong> The root element in the Bookmark/Highlight DTD. Contains

      all data pertaining to bookmarks, highlights, and lastmarks for a given

      DTB.<br />

      <strong>Declaration:</strong><code> &lt;!ELEMENT bookmarkSet (title, uid, lastmark?,

      (bookmark | hilite)*) &gt;</code><br />

      <strong>Syntax:</strong><code> &lt;bookmarkSet&gt;</code>...content...<code>&lt;/bookmarkSet&gt;</code><br />

      <strong>Attributes:</strong><br />

      <ul id="ul_118a">

      <li id="li_432a"><!-- JP 2004-03-31 New attribute -->

      <strong>xmlns (CDATA, FIXED) "http://www.daisy.org/z3986/2005/bookmark/":</strong>

      Specifies the default XML namespace for all elements in the bookmark file.  See <a href="#XMLNamespaces">[XML-Namespaces]</a> for details on namespaces.  This attribute and its value (given in DTD) must be explicitly specified in the document instance.</li>

      </ul>

      <strong>Valid inside:</strong> None<br />

      <br />

    </li>

    <li id="li_433"><strong>&lt;title&gt;</strong><br />

      <strong>Description:</strong> Contains the title, in text and in an optional audio

      clip, of the DTB for which the bookmark set was created.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT title (text, audio?) &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;title&gt;</code>...content...<code>&lt;/title&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;bookmarkSet&gt;</code><br />

      <strong>Comments:</strong> When bookmark sets are exported to other compliant playback

      devices, the title will allow users to identify and manage them. <br />

      <br />

    </li>

    <li id="li_434"><strong>&lt;text&gt;</strong><br />

      <strong>Description:</strong> Text of title or note.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT text (#PCDATA)&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;text&gt;</code>...content...<code>&lt;/text&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;title&gt;</code>, <code>&lt;note&gt; </code><br />

      <br />

    </li>

    <li id="li_435"><strong>&lt;audio&gt;</strong><br />

      <strong>Description:</strong> Audio clip of title of DTB or of user-recorded note, in

      any format supported by standard. Title clip enables user to identify desired

      bookmark file if several are present.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT audio EMPTY &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;audio</code>...attributes... <code>/&gt;</code><br />

      <strong>Attributes:</strong><br />

      <ul id="ul_119">

        <li id="li_436"><strong>src (%URI, #REQUIRED):</strong> The src attribute holds the URI of the

          audio file that contains the referenced clip.</li>



        <li id="li_437"><!-- 2004-04-05 TM - added ref and link to section 7.7; fixed SMIL ref to

        local --><strong>clipBegin (%SMILtimeVal, IMPLIED): </strong>The <code>clipBegin</code>

    attribute specifies the beginning of a segment of a continuous media object

    as a time offset from the start of the media object. The value syntax is

    defined by the SMIL 2.0 Timing and Synchronization Module <a

    href="#ref-SMIL">[SMIL]</a>. 

<!-- Editorial revision April 21, 2007 by KK

   took quotes out of link in <audio> Attributes "Media Clipping and Clock Values"

-->	

	See section 7.7, &quot;<a href="#Clock">Media

    Clipping and Clock Values.</a>&quot;</li>

        <li id="li_438"> <strong>clipEnd (%SMILtimeVal, IMPLIED): </strong> The <code>clipEnd</code> attribute

          specifies the end of a segment of a continuous media object as a time

          offset from the start of the media object. It uses the same attribute

          value syntax as <code>clipBegin</code>. </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;title&gt;</code>, <code>&lt;note&gt;</code><br />

      <br />

    </li>

    <li id="li_439"><strong>&lt;uid&gt;</strong><br />

      <strong>Description:</strong> Globally unique identifier for the book, drawn from

      the package file. Matches the <code>dc:Identifier</code> referenced by the "unique-identifier"

      attribute on the package file's <code>package</code> element. See section

      3.1, "<a href="#PkgId">Package Identity</a>."<br />

      <strong>Declaration:</strong>

      <code>&lt;!ELEMENT uid (#PCDATA) &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;uid&gt;</code>...content...<code>&lt;/uid&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;bookmarkSet&gt; </code><br />

      <br />

    </li>

   <li id="li_440"><!-- TM 2004-05-11 Changed content model to allow both timeOffset and charOffset; added and/or -->



   <strong>&lt;lastmark&gt;</strong><br />

      <strong>Description:</strong> Location where user most recently ceased reading and where player will

      resume play when restarted.  Location consists of a URI pointing to the id

      attribute of the <code>&lt;par&gt;</code> or <code>&lt;seq&gt;</code> element

      in the SMIL file that contains the lastmark, plus a time offset and/or character

      offset to the exact point.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT lastmark (ncxRef, URI, ((timeOffset, charOffset?)| charOffset)) &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;lastmark&gt;</code>...content...<code>&lt;/lastmark&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;bookmarkSet&gt;</code><br />

      <strong>Comments:</strong> The <code>&lt;lastmark&gt;</code> is set automatically

      by the playback device. <br />

      <br />

    </li>

    <li id="li_441"><strong>&lt;ncxRef&gt;</strong><br />

      <strong>Description:</strong> Captures current location in NCX (the id of the current

      <code>navPoint</code>) at time lastmark, bookmark, or highlight is set. Ensures

      that current location in NCX and SMIL are synchronized after moving to a

      lastmark, bookmark, or highlight so that any global navigation commands

      issued by the user will start from the current location.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT ncxRef (#PCDATA)&gt;</code><br />

      <strong>Syntax:</strong><code>&lt;ncxRef&gt;</code>...content...<code>&lt;/ncxRef&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;lastmark&gt;</code>, <code>&lt;bookmark&gt;</code>,

      <code>&lt;hiliteStart&gt;</code>, <code>&lt;hiliteEnd&gt; </code><br />

      <br />

    </li>

    <li id="li_442"><!-- 2004-04-05 TM - remove audio file from description and lose comment. 2004-07-07 MM Change description to specify that URI points only to SMIL.--> <strong>&lt;URI&gt;</strong><br /><strong>Description:</strong> Pointer to id of

  <code>&lt;par&gt;</code> or <code>&lt;seq&gt;</code> in SMIL that contains the

  <code>&lt;lastmark&gt;</code>, <code>&lt;bookmark&gt;</code>,

  <code>&lt;hiliteStart&gt;</code>, or

  <code>&lt;hiliteEnd&gt;</code>.<br />

  <strong>Declaration:</strong> <code>&lt;!ELEMENT URI

 (#PCDATA)&gt;</code><br /><strong>Syntax:</strong><code>&lt;URI&gt;</code>...content...<code>&lt;/URI&gt;</code><br /><strong>Attributes:</strong>

  None<br /><strong>Valid inside:</strong> <code>&lt;lastmark&gt;</code>,

  <code>&lt;bookmark&gt;</code>, <code>&lt;hiliteStart&gt;</code>,

  <code>&lt;hiliteEnd&gt;</code><br /><br /></li>



    <li id="li_443"><!--MH, MM 5 April, 2004 Revised timeOffset description.-->

<strong>&lt;timeOffset&gt;</strong><br /><strong>Description:</strong> Exact position of

<code>&lt;lastmark&gt;</code>, <code>&lt;bookmark&gt;</code>,

<code>&lt;hiliteStart&gt;</code>, or <code>&lt;hiliteEnd&gt;</code> in the

sequential audio presentation; a non-negative clock value, relative

to the start of the SMIL time container referenced in the URI. The value syntax

is defined by the SMIL 2.0 Timing and Synchronization Module <a

href="#ref-SMIL">[SMIL].</a> 



<!-- Editorial revision April 21, 2007 by KK

   deleted extra space and period in <timeOffset> Description after "Clock Values."

-->	

See section 7.7, "<a href="#Clock">Clock

Values</a>."<br />

<strong>Declaration:</strong> <code>&lt;!ELEMENT timeOffset (#PCDATA)

&gt;</code><br />

<strong>Syntax:</strong><code>&lt;timeOffset&gt;</code>...content (see section

7.7, "<a href="#Clock">Clock

Values</a>&quot; for syntax)...<code>&lt;/timeOffset&gt;</code><br />

<strong>Attributes:</strong>

None<br /><strong>Valid inside:</strong> <code>&lt;lastmark&gt;</code>,

<code>&lt;bookmark&gt;</code>, <code>&lt;hiliteStart&gt;</code>,

<code>&lt;hiliteEnd&gt;</code><br /><br />

    </li>

   <li id="li_446"><!-- 2004-07-07 MM Change description to specify that URI points to text file via SMIL.-->



   <strong>&lt;charOffset&gt;</strong><br />

      <strong>Description:</strong> Exact position of <code>bookmark</code>, <code>lastmark</code>,

      <code>hiliteStart</code>, or <code>hiliteEnd</code> in textual content file

      referenced (via SMIL) by the URI.  See section 9.1, "<a href="#BkmkIntro">Introduction</a>" for information on calculating <code>&lt;charOffset&gt;</code> values.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT charOffset (#PCDATA) &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;charOffset&gt;</code>...content...<code>&lt;/charOffset&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;lastmark&gt;</code>, <code>&lt;bookmark&gt;</code>,

      <code>&lt;hiliteStart&gt;</code>, <code>&lt;hiliteEnd&gt;</code> <br />

      <br />

    </li>

   <li id="li_447"><!-- TM 2004-05-11 Changed content model to allow both timeOffset and charOffset; added and/or -->



    <strong>&lt;bookmark&gt;</strong><br />

      <strong>Description:</strong> Point in document marked by user for direct access in

      future. Bookmark consists of location and optional note. Location consists

      of a URI pointing to the id attribute of the <code>&lt;par&gt;</code> or

      <code>&lt;seq&gt;</code> element in the SMIL file that contains the bookmark,

      plus a time offset and/or character offset to the exact point.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT bookmark (ncxRef, URI, ((timeOffset, charOffset?)| charOffset)), note?) &gt; </code><br />

      <strong>Syntax:</strong><code>&lt;bookmark&gt;</code>...content...<code>&lt;/bookmark&gt;</code><br />

      <strong>Attributes:</strong><br />

      <ul id="ul_121">

        <li id="li_448"><strong>label (CDATA, #IMPLIED):</strong> optional attribute for use in storing

          identifying label to assist user in choosing among a set of bookmarks.

        </li>

          <li id="li_448a"><!-- 2004-04-02 TM -new attribute --><strong>xml:lang (%languagecode, #IMPLIED):</strong> optional attribute for use in identifying the language of label and note for this bookmark, using an <a href="#RFC3066">[RFC 3066]</a> language code.</li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;bookmarkSet&gt; </code><br />

      <br />

    </li>

    <li id="li_449"><strong>&lt;note&gt;</strong><br />

      <strong>Description:</strong> Holds the user's label for or thoughts about a bookmark

      or highlighted section. It can be text or audio or both.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT note (text?, audio?) &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;note&gt;</code>...content...<code>&lt;/note&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;hilite&gt;</code>, <code>&lt;bookmark&gt;</code><br />

      <strong>Comments:</strong> Playback devices supporting recording of audio <code>&lt;notes&gt;</code>

      need not support recording in all of the codecs allowed by this standard.

      <br />

      <br />

    </li>

    <li id="li_450"><strong>&lt;hilite&gt;</strong><br />

      <strong>Description:</strong> A block of text marked by the user with an optional

      note attached.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT hilite (hiliteStart, hiliteEnd, note?)

      &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;hilite&gt;</code>...content...<code>&lt;/hilite&gt;</code><br />

      <strong>Attributes:</strong><br />

      <ul id="ul_122">

        <li id="li_451"><strong>label (CDATA, #IMPLIED):</strong> optional attribute for use in storing

          identifying label to assist user in choosing among a set of highlights.

        </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;bookmarkSet&gt;</code><br />

      <br />

    </li>

    <li id="li_452"><!-- TM 2004-05-11 Changed content model to allow both timeOffset and charOffset; added and/or --> <strong>&lt;hiliteStart&gt;</strong><br />

      <strong>Description:</strong> Starting point of highlighted block. Location consists

      of a URI pointing to the id attribute of the <code>&lt;par&gt;</code> or

      <code>&lt;seq&gt;</code> element in the SMIL file that contains the beginning

      of the highlighted section, plus a time offset and/or character offset to the

      exact point.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT hiliteStart (ncxRef, URI, ((timeOffset, charOffset?)| charOffset)) &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;hiliteStart&gt;</code>...content...<code>&lt;/hiliteStart&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;hilite&gt; </code><br />

      <br />

    </li>

    <li id="li_453"><!-- TM 2004-05-11 Changed content model to allow both timeOffset and charOffset; added and/or --> <strong>&lt;hiliteEnd&gt;</strong><br />

      <strong>Description:</strong> End of highlighted block. Location consists of a URI

      pointing to the id attribute of the <code>&lt;par&gt;</code> or <code>&lt;seq&gt;

      </code>element in the SMIL file that contains the end of the highlighted

      section, plus a time offset and/or character offset to the exact point.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT hiliteEnd (ncxRef, URI, ((timeOffset, charOffset?)| charOffset)) &gt;</code><br />

      <strong>Syntax:</strong><code>&lt;hiliteEnd&gt;</code>...content...<code>&lt;/hiliteEnd&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;hilite&gt; </code><br />

      <br />

    </li>

 </ul>





  <h2 id="h2_38">9.3 <a name="BkmkEx">Examples</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_165">In Example 9.1, the reader has set two bookmarks, one in chapter

1, 22 seconds from the start of paragraph 8, and the other in chapter 3, 1 minute and 28

seconds from the start of paragraph 12. The reader has added the text note

"Atlanta burns" to the second bookmark. The user has also highlighted a passage

in chapter 4 beginning at the start of paragraph 1 and ending 4 minutes and 6 seconds after

the start of paragraph 6, labeling it with a ten-second audio comment. The

reader last stopped reading (as indicated by the <code>&lt;lastmark&gt;</code>)

in chapter 5, paragraph 23. The default filename for this bookmark file would be

"us-rfbd-JT065.bmk".</p>

 <p id="para_166"><!-- 2004-04-02 TM -fixed example per changes to timeOffset, xml:lang -->Example 9.1:</p><pre><samp id="smp_16">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;!DOCTYPE bookmarkSet PUBLIC "-//NISO//DTD bookmark 2005-1//EN"

  "http://www.daisy.org/z3986/2005/bookmark-2005-1.dtd"&gt;

 &lt;bookmarkSet xmlns="http://www.daisy.org/z3986/2005/bookmark/"&gt;

    &lt;title&gt;

      &lt;text&gt;Gone with the Wind&lt;/text&gt;

      &lt;audio src="gwtw_title.mp3" /&gt;

    &lt;/title&gt;

    &lt;uid&gt;us-rfbd-JT065&lt;/uid&gt;



    &lt;lastmark&gt;

      &lt;ncxRef&gt;gwtw.ncx#lvl1_5&lt;/ncxRef&gt;

      &lt;URI&gt;gwtw_ch5.smil#para023&lt;/URI&gt;

      &lt;timeOffset&gt;03:52.00&lt;/timeOffset&gt;

    &lt;/lastmark&gt;



    &lt;bookmark&gt;

      &lt;ncxRef&gt;gwtw.ncx#lvl1_1&lt;/ncxRef&gt;

      &lt;URI&gt;gwtw_ch1.smil#para008&lt;/URI&gt;

      &lt;timeOffset&gt;00:22.00&lt;/timeOffset&gt;

    &lt;/bookmark&gt;



    &lt;bookmark&gt;

      &lt;ncxRef&gt;gwtw.ncx#lvl1_3&lt;/ncxRef&gt;

      &lt;URI&gt;gwtw_ch3.smil#para012&lt;/URI&gt;

      &lt;timeOffset&gt;01:28.00&lt;/timeOffset&gt;

      &lt;note&gt;

        &lt;text&gt;Atlanta burns.&lt;/text&gt;

      &lt;/note&gt;

    &lt;/bookmark&gt;



    &lt;hilite&gt;

      &lt;hiliteStart&gt;

        &lt;ncxRef&gt;gwtw.ncx#lvl1_4&lt;/ncxRef&gt;

        &lt;URI&gt;gwtw_ch4.smil#para001&lt;/URI&gt;

        &lt;timeOffset&gt;00:00.00&lt;/timeOffset&gt;

      &lt;/hiliteStart&gt;

      &lt;hiliteEnd&gt;

        &lt;ncxRef&gt;gwtw.ncx#lvl1_4&lt;/ncxRef&gt;

        &lt;URI&gt;gwtw_ch4.smil#para006&lt;/URI&gt;

        &lt;timeOffset&gt;04:06.00&lt;/timeOffset&gt;

      &lt;/hiliteEnd&gt;

      &lt;note&gt;

        &lt;audio src="us-rfbd-JT065.wav" clipBegin="00:00.00"

        clipEnd="00:10.00" /&gt;

      &lt;/note&gt;

    &lt;/hilite&gt;



 &lt;/bookmarkSet&gt;

  </samp></pre>



  <p id="para_167">Example 9.2 shows a text-only file in which the reader last stopped reading

    130 characters after the start of paragraph 297.</p>



  <p id="para_168"><!-- 2004-04-02 TM -fixed example per changes to xml:lang. 2004-07-06 MM Changed uri to reference SMIL. -->Example 9.2:</p>



<pre><samp id="smp_17">

&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;!DOCTYPE bookmarkSet PUBLIC "-//NISO//DTD bookmark 2005-1//EN"

  "http://www.daisy.org/z3986/2005/bookmark-2005-1.dtd"&gt;

&lt;bookmarkSet xmlns="http://www.daisy.org/z3986/2005/bookmark/"&gt;



   &lt;title&gt;

      &lt;text&gt;Chemistry Today&lt;/text&gt;

   &lt;/title&gt;

   &lt;uid&gt;uk-rnib-MM499&lt;/uid&gt;



   &lt;lastmark&gt;

      &lt;ncxRef&gt;chemtd.ncx#lvl1_3&lt;/ncxRef&gt;

      &lt;URI&gt;chemtd.smil#para297&lt;/URI&gt;

      &lt;charOffset&gt;130&lt;/charOffset&gt;

   &lt;/lastmark&gt;



&lt;/bookmarkSet&gt;

  </samp></pre>



  <p id="para_168a"><!-- TM 2004-05-13 New para -->Example 9.3 shows a lastmark for a text and audio book with both timeOffset and charOffset.</p>



  <p id="para_168b"><!-- 2004-05-13 TM Added example with both time and char offsets. 2004-07-06 MM Changed uri to reference SMIL. -->Example 9.3:</p>



<pre><samp id="smp_17b">

&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;!DOCTYPE bookmarkSet PUBLIC "-//NISO//DTD bookmark 2005-1//EN"

  "http://www.daisy.org/z3986/2005/bookmark-2005-1.dtd"&gt;

&lt;bookmarkSet  xmlns="http://www.daisy.org/z3986/2005/bookmark/"&gt;

   &lt;title&gt;

      &lt;text&gt;Physics Yesterday&lt;/text&gt;

   &lt;/title&gt;

   &lt;uid&gt;uk-rnib-MM498&lt;/uid&gt;



   &lt;lastmark&gt;

     &lt;ncxRef&gt;physyd.ncx#lvl1_5&lt;/ncxRef&gt;

     &lt;URI&gt;physyd.smil#para_573&lt;/URI&gt;

     &lt;timeOffset&gt;02:01.00&lt;/timeOffset&gt;

     &lt;charOffset&gt;250&lt;/charOffset&gt;

   &lt;/lastmark&gt;



&lt;/bookmarkSet&gt;

  </samp></pre>



  <p id="para_168n"><a href="#toc">Contents</a></p>

  <h1 id="h1_13">10. <a name="Resource"><!-- MG Entire section revised 2004-06-17 -->Resource File</a></h1>

  <h2 id="h2_39">10.1 <a name="ResIntro">Introduction</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_169">The Resource File supplies text and/or audio segments and optional images, that can assist the reader in using a DTB. Its use is optional, unless escapable or skippable structures are enabled in the DTB (see sections 7.4.1 and 7.4.3). These media objects or "resources" provide information missing from a document or present only in a form inaccessible to the reader. A resource typically consists of meaningful semantically rich information. A resource can be supplied in multiple languages simultaneously, allowing a player or user to determine in which language the resource should be rendered. Some examples of applications are:</p>



  <ol id="ol_2">

    <li id="li_454">Documents with definite structures but missing headings, such as books with multilevel structures but no navigation labels on items below the level of sections. The resource file could contain the word "subsection" for presentation to the reader when stepping through the document via the NCX.</li>

    <li id="li_455">Player implementations that present generic labels such as "level 2" when the user changes levels in the NCX. The resource file could be used to present the actual name of items found at that level in that specific context, e.g., "chapter".</li>

    <li id="li_456">"Where Am I?" applications.</li>

    <li id="li_457">Detailed information about the semantics of the current position in the textual content file; useful when exact knowledge of a document's finest structure is essential. The resource file could provide text or audio clips of element names in the textual content file grammar, alerting the user when crossing the boundaries of paragraphs, list items, table cells, etc.</li>

    <li id="li_458">Information about the types of text structures that the user can choose to "turn off" (see section 7.4.3, "<a href="#Skip">'Skippable' Structures</a>") or "escape" (see section 7.4.1, "<a href="#Escape">'Escapable' Structures</a>") via the SMIL file. The Resource File would contain text segments or pointers to audio clips of the names of the structures affected; for example, page numbers, notes, or tables.</li>

  </ol>



<p id="para_169a">The resource file uses a subset of W3C XPath 1.0 (see <a href="#XPath10">[XPath10]</a>) to associate resources with arbitrary sets of elements in the DTB file set. For players that do not include a dedicated XPath processor, the subset is strict enough to allow the use of concatenated string matching to establish an association. </p>



<p id="para_175">Resources would be called only when appropriate; that is, in response to explicit user requirements/settings, and when needed.</p>



  <h2 id="h2_40">10.2 <a name="ResElem">Resource Elements</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_177">Brief descriptions of resource elements follow. Each includes the element declaration extracted from the Resource DTD, along with descriptions of any applicable attributes. </p>

  <ul id="ul_123">

    <li id="li_459"><strong>&lt;resources&gt;</strong><br />

      <strong>Description:</strong> The root element in the Resource DTD.<br />

      <strong>Declaration:</strong><code> &lt;!ELEMENT resources (head?, scope+) &gt;</code><br />

      <strong>Syntax:</strong>

      <code>&lt;resources</code>...attributes...<code>&gt;</code>...content...<code>&lt;/resources&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_124">

        <li id="li_460"><!--MG 30 March, 2004--><strong>version (CDATA, FIXED): "2005-1"</strong>Specifies the version of the DTD used in this instance. This attribute and its value (given in DTD) must be explicitly specified in the document instance.</li>

        <li id="li_460a"><!-- JP 2004-03-31 New attribute -->

        <strong>xmlns (CDATA, FIXED) "http://www.daisy.org/z3986/2005/resource/"</strong>: Specifies the default XML namespace for all elements in the Resource File.  See <a href="#XMLNamespaces">[XML-Namespaces]</a> for details on namespaces.  This attribute and its value (given in DTD) must be explicitly specified in the document instance.</li>

        <li id="li_460b"><!-- MG 2004-04-22 New attribute --><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

      </ul>

      <strong>Valid inside:</strong> None<br /><br />

    </li>

    <li id="li_461"><strong>&lt;head&gt;</strong><br />

      <strong>Description:</strong> Optional container for metadata.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT head (meta*) &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;head&gt;</code>...content...<code>&lt;/head&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;resources&gt;</code><br />

      <br />

    </li>



    <li id="li_462"><strong>&lt;meta&gt;</strong><br />

      <strong>Description:</strong> Producer-defined metadata.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT meta EMPTY &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;meta</code>...attributes...<code>/&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_125">

        <li id="li_463"><strong>name (CDATA, REQUIRED) </strong> </li>

        <li id="li_464"><strong>content (CDATA, REQUIRED) </strong> </li>

        <li id="li_465"><strong>scheme (CDATA, IMPLIED) </strong> </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;head&gt;</code><br />

      <br />

    </li>



    <li id="li_462a"><strong>&lt;scope&gt;</strong><br />

      <strong>Description:</strong> Container for resources associated with a specific vocabulary, identified by its namespace.<br />







      <strong>Declaration:</strong> <code>&lt;!ELEMENT scope  (nodeSet+)&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;scope</code>...attributes...<code>&gt;</code>...content...<code>&lt;/scope&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_125b">

        <li id="li_463b"><strong>nsuri (%URI;, REQUIRED):</strong> A namespace URI defining to which namespace the <code>&lt;resource&gt;</code> descendants of this <code>&lt;scope&gt;</code> element apply.</li>

        <li id="li_464b"><strong>id (ID, IMPLIED):</strong> Optional identifier. </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;resources&gt;</code><br />

      <br />

    </li>



    <li id="li_462b"><strong>&lt;nodeSet&gt;</strong><br />

      <strong>Description:</strong> Selector of a set of elements within the namespace defined by the <code>scope</code> parent.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT nodeSet (resource+)&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;nodeSet</code>...attributes...<code>&gt;</code>...content...<code>&lt;/nodeSet&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_125c">

        <li id="li_463c"><strong>select (%XPathSubset, REQUIRED):</strong> W3C XPath 1.0 string, expressing the element set selection. XPath subset is defined in <a href="#ResReq">section 10.3</a>.</li>

        <li id="li_464c"><strong>id (ID, REQUIRED):</strong> Required identifier.</li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;scope&gt;</code><br />

      <br />

    </li>



    <li id="li_466"><strong>&lt;resource&gt;</strong><br />

      <strong>Description:</strong> Contains text and pointers to audio clip and/or image serving as labels to be applied to elements in the containing nodeSet.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT resource (((text, audio?) | audio), img?)&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;resource</code>...attributes...<code>&gt;</code>...content...<code>&lt;/resource&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_126">

        <li id="li_471"><!-- 2004-04-02 TM - new attribute --><strong>xml:lang (%languagecode;, REQUIRED):</strong> Specifies the language of the  resource item, using an <a href="#RFC3066">[RFC 3066]</a> language code.</li>

        <li id="li_471b"><strong>id (ID, REQUIRED):</strong> Required identifier.</li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;nodeSet&gt;</code><br />

      <br />

    </li>



    <li id="li_472"><strong>&lt;text&gt;</strong><br />

      <strong>Description:</strong> Contains the text used for label.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT text (#PCDATA) &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;text&gt;</code>...content<code>...&lt;/text&gt;</code><br />

      <strong>Attributes:</strong><br />

      <ul id="ul_126b">

        <li id="li_476c"><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

        <li id="li_476d"><strong>dir ((ltr|rtl), IMPLIED):</strong> Text directionality.</li>

      </ul>



      <strong>Valid inside:</strong> <code>&lt;resource&gt;</code><br />

      <br />

    </li>

    <li id="li_473"><strong>&lt;audio&gt;</strong><br />

      <strong>Description:</strong> Points to file containing audio label and provides

      time offsets of beginning and end of clip.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT audio EMPTY &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;audio</code>...attributes...<code> /&gt;</code><br />

      <strong>Attributes:</strong><br />

      <ul id="ul_127">

        <li id="li_474"><strong>src (%URI, REQUIRED): </strong> URI of the audio file.<br />

        </li>

        <li id="li_475"><strong>clipBegin (%SMILtimeVal, REQUIRED):</strong> Specifies the beginning

          of a segment of a continuous audio file as a time offset from the start

          of the audio file. The value syntax is defined by the SMIL 2.0 Timing

          and Synchronization Module <a href="#ref-SMIL">[SMIL].</a> See

          section 7.7, "<a href="#Clock">Media Clipping and Clock Values</a>." </li>

        <li id="li_476"><strong>clipEnd (%SMILtimeVal, REQUIRED):</strong> Specifies the end of a segment

          of a continuous audio file as a time offset from the start of the audio

          file. It uses the same attribute value syntax as <code>clipBegin</code>.

        </li>

        <li id="li_476b"><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;resource&gt;</code><br />

      <br />

    </li>

    <li id="li_477"><strong>&lt;img&gt;</strong><br />

      <strong>Description:</strong> Points to file containing the image.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT img EMPTY &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;img</code>...attributes...<code>/&gt;</code><br />

      <strong>Attributes:</strong> <br />

      <ul id="ul_128">

        <li id="li_478"><strong>src ( %URI, REQUIRED): </strong> URI of the image file.</li>

        <li id="li_478b"><strong>id (ID, IMPLIED):</strong> Optional identifier.</li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;resource&gt;</code><br />

      <br />

    </li>

</ul>



<h2 id="h2_41">10.3 <a name="ResReq">Resource File Requirements</a></h2>

<p class="sstatus">(This section is normative.)</p>

<p id="para_176">

<!--MG 30 March, 2004 Added requirements re namespaces and entity declarations and reference re filename extensions.-->

If a Resource File is implemented, it must meet the following requirements.  The Resource File is a valid XML1.0 file conforming to the Document Type Definition resource-2005-1.dtd (see <a href="#DTBookDTD">Appendix

1</a>, "DTD

for Resource File").  The <code>version</code> and <code>xmlns</code> attributes on the <code>resources</code> element must be explicitly specified in the document instance, using values drawn from the above-named DTD. Entity declarations must occur in the internal DTD subset. See further section 16.1 "<a href="#FileConform">General File Conformance Requirements</a>."  <!--MG 30 March, 2004 Added requirements re namespaces and entity declarations and reference re filename extensions.-->If a DTB spans multiple media units, identical copies of the Resource File and copies of all audio and image files directly referenced by it shall be distributed on each media unit of the DTB.</p>



<p id="para_176a">The varying media children of the <code>&lt;resource&gt;</code> element must be informational equivalents. <code>&lt;resource&gt;</code> children of a certain <code>&lt;nodeSet&gt;</code> element must be informational equivalents but in different languages. Within any given <code>&lt;nodeSet&gt;</code>, there must not be two resources with the same language. The namespace URI (the value of the <code>nsuri</code> attribute) must be unique for each &lt;scope&gt; element.</p>



<p id="para_176b">

The W3C XPath 1.0 (see <a href="#XPath10">[XPath10]</a>) subset strings, used in the <code>select</code> attribute, must conform to the following rules.

The strings must be valid XPath 1.0 strings and must use the XPath 1.0 abbreviated syntax only.

The only location path allowed is <code>/descendant-or-self::node()/</code>, in abbreviated syntax expressed as <code>//</code>.

The node test may only select element names. Wildcard is allowed as an element selector in node test, but not in predicates.

Zero or several predicates are allowed.

Predicates can only select attributes, and must use explicit attribute name and attribute value.

<!--OHA 10-09-2004: Added rules regarding double and single quotes in attribute values-->

Attribute value in predicates are delimited by double or single quotes (" or '). Attribute values containing double quotes must be delimited by single quotes, and attribute values containing single quotes must be delimited by double quotes. Attribute values containing both double and single quotes are not allowed.

Predicates must be singleton, that is, neither <code>and</code> nor <code>or</code> statements are allowed in predicates.

Selection of elements and attributes must use the qname localpart only (see <a href="#XMLNamespaces">[XML-Namespaces]</a>).</p>



<p id="para_176c">Below is the XPath1.0 subset defined in EBNF form:</p>



<pre>

<samp id="XPathSubset">

DTBLocationPath   ::=   '//' Step

Step              ::=   NodeTest Predicate*

NodeTest          ::=   '*' | QNameLocalPart

Predicate         ::=   '[' PredicateExpr ']'

PredicateExpr     ::=   Expr

Expr              ::=   EqualityExpr

EqualityExpr      ::=   AttrSpecifier '=' Literal

AttrSpecifier     ::=   '@' QNameLocalPart

Literal           ::=   '"' [^"]* '"'  | "'" [^']* "'"

QNameLocalPart    ::=   NCName

NCName            ::=   (Letter | '_') (NCNameChar)

NCNameChar        ::=   Letter | Digit | '.' | '-' | '_' | CombiningChar | Extender

</samp>

</pre>

<p id="para_176d">where Letter, CombiningChar, Digit and Extender are defined in the XML 1.0 specification (see <a href="http://www.w3.org/TR/REC-xml#NT-Letter">http://www.w3.org/TR/REC-xml#NT-Letter</a>).</p>



<p id="para_176e">

Within a particular vocabulary (as defined by the <code>scope</code> element), any element may have zero or more resources associated with it. However, in the case of multiple simultaneous associations, players implementing support for the resource file are required to select only one of these resources; <em>the first (in document order) matching</em> <code>&lt;nodeSet&gt;</code> child of the relevant &lt;scope&gt; element.

</p>



<p id="para_176f">Document authors are expected to make use of this player requirement to sequentially order the <code>&lt;nodeSet&gt;</code> elements in a way that explicitly expresses resource priority. An informative example of such an ordering algorithm, implemented by an authoring tool, is as follows.</p>



<ol id="ol_3">

<li id="ol_3-li_1">First, all <code>&lt;nodeSet&gt;</code> elements matching on a specified element name would occur before <code>&lt;nodeSet&gt;</code> elements matching on wildcards.</li>

<li id="ol_3-li_2">Second, within the two groups resulting from the above sort, <code>&lt;nodeSet&gt;</code> elements with a higher number of predicates (attribute matches) would occur before <code>&lt;nodeSet&gt;</code> elements with fewer predicates.</li>

<li id="ol_3-li_3">Third, resources matching on <code>id</code> attributes would be moved to the top of the sequence in order to take precedence over any other potential match.</li>

</ol>



<p id="para_176g">From a player perspective, the resource selection process is typically as follows:</p>



<ol id="ol_4">

  <li id="ol_4-li_1">Given an element instance for which a resource may be associated (the "active element"), search for the resource file <code>&lt;scope&gt;</code> element whose <code>nsuri</code> attribute value matches the namespace uri of the active element.</li>

  <li id="ol_4-li_2">If a matching <code>&lt;scope&gt;</code> element is found, search for the first <code>&lt;nodeSet&gt;</code> element whose XPath statement as given by the <code>select</code> attribute matches the active element. (Note that some XPath processors require addition of the qname prefix to the element selection clause before execution.)</li>

  <li id="ol_4-li_3">If a matching <code>&lt;nodeSet&gt;</code> element is found, select one resource child of this set based on language preferences. (A player would typically select the resource whose language matches the language of the active element. Players may also implement default language and/or user language preference configuration, that when selecting resources for presentation would override the language of the active element. Players may or may not implement fallback behavior for the case where a matching <code>&lt;nodeSet&gt;</code> is found, but none of its resource children uses the desired language.)</li>

</ol>



<h2 id="h2_42">10.4 <a name="ResEx">Examples</a></h2>

<p class="sstatus">(This section is informative.)</p>

<p id="para_179">In Example 10.1, the Resource File contains resources in English only for the NCX and DTBOOK namespaces.</p>



<p id="para_179a">Within the NCX namespace (first <code>&lt;scope&gt;</code> element), two resources are supplied for skippable elements via selection of the NCX <code>&lt;smilCustomTest&gt;</code> element. The first <code>&lt;nodeSet&gt;</code> maps to a <code>&lt;smilCustomTest&gt;</code> element which has an attribute <code>bookStruct</code> with value "PAGE_NUMBER". The second <code>&lt;nodeSet&gt;</code> maps to a <code>&lt;smilCustomTest&gt;</code> element which has an attribute <code>id</code> with value "foo". A third <code>&lt;nodeSet&gt;</code> is mapped to a <code>&lt;navPoint&gt;</code> element with a <code>class</code> attribute valued "chapter".</p>



<p id="para_179b">Within the DTBOOK namespace (second <code>&lt;scope&gt;</code> element), two resources are supplied:  one for the element <code>&lt;td&gt;</code>, and one for the element <code>&lt;prodnote&gt;</code> with a <code>render</code> attribute valued "optional".</p>





<p id="para_179n"><strong>Example 10.1:</strong><br /><br /></p>

<pre><samp>

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;

&lt;!DOCTYPE resources PUBLIC &quot;-//NISO//DTD resource 2005-1//EN&quot;

  &quot;http://www.daisy.org/z3986/2005/resource-2005-1.dtd&quot;&gt;

&lt;resources xmlns=&quot;http://www.daisy.org/z3986/2005/resource/&quot; version=&quot;2005-1&quot;&gt;

  &lt;scope nsuri=&quot;http://www.daisy.org/z3986/2005/ncx/&quot;&gt;

    &lt;nodeSet id=&quot;ns001&quot; select=&quot;//smilCustomTest[@bookStruct=&#39;PAGE_NUMBER&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r001&quot;&gt;

        &lt;text&gt;page&lt;/text&gt;

        &lt;audio src=&quot;res_en.mp3&quot; clipBegin=&quot;0.2s&quot; clipEnd=&quot;0.4s&quot;/&gt;

      &lt;/resource&gt;

    &lt;/nodeSet&gt;

    &lt;nodeSet id=&quot;ns002&quot; select=&quot;//smilCustomTest[@id=&#39;foo&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r002&quot;&gt;

        &lt;text&gt;verse&lt;/text&gt;

        &lt;audio src=&quot;res_en.mp3&quot; clipBegin=&quot;0.8s&quot; clipEnd=&quot;1.0s&quot;/&gt;

      &lt;/resource&gt;

    &lt;/nodeSet&gt;

    &lt;nodeSet id=&quot;ns003&quot; select=&quot;//navPoint[@class=&#39;chapter&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r003&quot;&gt;

        &lt;text&gt;chapter&lt;/text&gt;

        &lt;audio src=&quot;chapter.mp3&quot; clipBegin=&quot;2.8s&quot; clipEnd=&quot;3.0s&quot;/&gt;

        &lt;img src=&quot;chapter.png&quot; /&gt;

      &lt;/resource &gt;

    &lt;/nodeSet&gt;

  &lt;/scope&gt;



  &lt;scope nsuri=&quot;http://www.daisy.org/z3986/2005/dtbook/&quot;&gt;

    &lt;nodeSet id=&quot;ns004&quot; select=&quot;//prodnote[@render=&#39;optional&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r004&quot;&gt;

        &lt;text&gt;optional producers note&lt;/text&gt;

        &lt;audio src=&quot;res_en.mp3&quot; clipBegin=&quot;2.8s&quot; clipEnd=&quot;3.0s&quot;/&gt;

      &lt;/resource&gt;

    &lt;/nodeSet&gt;

    &lt;nodeSet id=&quot;ns005&quot; select=&quot;//td&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r005&quot;&gt;

        &lt;text&gt;table cell&lt;/text&gt;

        &lt;audio src=&quot;res_en.mp3&quot; clipBegin=&quot;1.2s&quot; clipEnd=&quot;1.4s&quot;/&gt;

      &lt;/resource&gt;

    &lt;/nodeSet&gt;

  &lt;/scope&gt;

&lt;/resources&gt;

</samp>

</pre>



<p id="para_180">In Example 10.2, three multiple languages resources are supplied for the DTBOOK namespace, and one resource is supplied for the the SMIL namespace.</p>



<p id="para_180a">Within the DTBOOK namespace (first <code>&lt;scope&gt;</code> element), resources are supplied for a <code>&lt;prodnote&gt;</code> element with a <code>class</code> attribute valued image, a <code>&lt;prodnote&gt;</code> element with no attribute specification, and lastly for any element with a <code>class</code> attribute valued <code>image</code>.</p>



<p id="para_180b">Within the SMIL namespace (second <code>&lt;scope&gt;</code> element), a resource is supplied for an "escapable" element. The resource in this case maps via an arbitrary <code>class</code> attribute value.</p>

<p id="para_180n"><strong>Example 10.2:</strong></p>

<pre><samp>

&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;!DOCTYPE resources PUBLIC &quot;-//NISO//DTD resource 2005-1//EN&quot;

  &quot;http://www.daisy.org/z3986/2005/resource-2005-1.dtd&quot;&gt;

&lt;resources xmlns=&quot;http://www.daisy.org/z3986/2005/resource/&quot; version=&quot;2005-1&quot;&gt;

  &lt;scope nsuri=&quot;http://www.daisy.org/z3986/2005/dtbook/&quot;&gt;

    &lt;nodeSet id=&quot;ns001&quot; select=&quot;//prodnote[@class=&#39;image&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r001&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;da&quot; id=&quot;r002&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;ja&quot; id=&quot;r003&quot;&gt;[...]&lt;/resource&gt;

    &lt;/nodeSet&gt;

    &lt;nodeSet id=&quot;ns002&quot; select=&quot;//prodnote&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r004&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;da&quot; id=&quot;r005&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;ja&quot; id=&quot;r006&quot;&gt;[...]&lt;/resource&gt;

    &lt;/nodeSet&gt;

    &lt;nodeSet id=&quot;ns003&quot; select=&quot;//*[@class=&#39;image&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r007&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;da&quot; id=&quot;r008&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;ja&quot; id=&quot;r009&quot;&gt;[...]&lt;/resource&gt;

    &lt;/nodeSet&gt;

  &lt;/scope&gt;

  &lt;scope nsuri=&quot;http://www.w3.org/2001/SMIL20/&quot;&gt;

    &lt;nodeSet id=&quot;ns004&quot; select=&quot;//*[@class=&#39;table&#39;]&quot;&gt;

      &lt;resource xml:lang=&quot;en&quot; id=&quot;r010&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;da&quot; id=&quot;r011&quot;&gt;[...]&lt;/resource&gt;

      &lt;resource xml:lang=&quot;ja&quot; id=&quot;r012&quot;&gt;[...]&lt;/resource&gt;

    &lt;/nodeSet&gt;

  &lt;/scope&gt;

&lt;/resources&gt;

</samp>

</pre>





<p id="para_181"><a href="#toc">Contents</a></p>



<h1 id="h1_14">11. <a name="Dist">Packaging Files for Distribution</a></h1>

  <h2 id="h2_43">11.1 <a name="DistIntro">Introduction</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <p id="para_182">If DTBs are distributed on a physical medium such as CD-ROM, producers will

    sometimes put more than one book on a disk or sometimes use more than one

    disk to hold a single book. When multiple DTBs are included on a single distribution

    medium ("media unit"), a simple method of storing this information for easy

    access by the player is needed, to present to the reader a "bookshelf" of

    books. When a single DTB spans several media, the player needs access to specific

    information so that it can provide correct instructions to the reader, e.g.,

    "Insert disk 2," when required. The "Distribution Information File" (or "distInfo

    File") stores the data needed for these purposes.</p>

  <p id="para_183">In the following scenarios, the player would need accurate "distribution

    information" to respond appropriately: </p>

  <ol id="ol_3gwk">

    <li id="li_479">Trying to reach an NCX target that lies on another disk. </li>

    <li id="li_480">Trying to reach a bookmark or highlight that is on another disk.</li>

    <li id="li_481">Resuming reading on a different disk than last ended on. "<code>Lastmark</code>"

      will point to another disk.</li>

    <li id="li_482">Following a cross-reference or other link pointing to a target on another

      disk.</li>

    <li id="li_483">Retracing path back to point of origin after following a link that required

      inserting a new disk.</li>

    <li id="li_484">Reading notes during normal playback. If the notes are printed at the

      end of the chapter or book and are recorded separately from the text where

      they are referenced, they might fall on a different disk from the noterefs.</li>

    <li id="li_485">Reaching the end of a disk of a multidisk book. This might be handled

      in another way, but could be implemented using the distInfo File.</li>

  </ol>

  <p id="para_184">A distInfo File would normally be created for each type of distribution medium,

    whereas other DTB files would be unchanged regardless of how a DTB is distributed.</p>

  <h2 id="h2_44">11.2 <a name="DistReq">Distribution Requirements</a></h2>

  <p class="sstatus">(This section is normative.)</p>

  <p id="para_185">When distributing one DTB per media unit, the Package File must be placed

    in the root of the media unit's file system. When distributing multiple DTBs

    per media unit, the distInfo File alone must be placed in the root of the

    media unit's file system. These restrictions do not apply when a DTB is contained

    on a non-removable storage medium such as a hard drive.</p>

  <p id="para_186">The distInfo File is required on all media units for a given DTB when that

    DTB spans more than one distribution media or when multiple DTBs are contained

    on one media unit. Otherwise, a distInfo File is optional. There shall be

    no more than one distInfo File per media unit (e.g., CD-ROM disk).</p>

  <p id="para_187">

<!--MG 30 March, 2004 Added requirements re namespaces and entity declarations.-->

<!-- jp, 2004-04-26 changed DTD version number -->

     The distInfo File, if present, must be a valid <a href="#XML">XML</a> 1.0

    file conforming to distInfo-2005-1.dtd (see <a href="#DTBookDTD">Appendix

    1</a>, "Distribution

    Information DTD"), and shall be named "distInfo.dinf". The <code>version</code>  and <code>xmlns</code>

     attributes on the <code>distInfo</code> element must be explicitly specified

     in the document instance, using values drawn from the above-named DTD.

     Entity declarations must occur in the internal DTD subset.

     See further section 16.1 "<a href="#FileConform">General File Conformance Requirements</a>."  </p>

  <p id="para_188">Distribution on multiple media units has implications for the production

    of the NCX and SMIL. For the NCX, see section 8.4.2, "<a href="#NCXSpan">DTBs

    Spanning Multiple Media Units</a>." For SMIL, see section 7.4.4, "<a href="#SMILDist">Packaging

    Files across Several Media Units</a>."</p>

  <p id="para_189">Optional <code>changeMsg</code>s may be used to supply customized messages

    instructing users on how to proceed when another media unit is needed to continue

    reading. Such <code>changeMsg</code>s enable presentation of messages in either

    text or audio. If no <code>changeMsg</code> is present when required, the

    player must render a default audio or text message (e.g., "please insert disk

    2").</p>

  <p id="para_189a">

<!-- jp, 2004-04-26 Added this paragraph on fileSet requirements -->

    The distInfo file may include a list of all files in the distribution via the <code>&lt;fileSet&gt;</code> element.

    This is optional, and playback systems are not expected to process this in any particular way.

    If used, <code>&lt;fileSet&gt;</code> must list all files on all pieces of media in the distribution, including

    items not normally listed in the DTB package file, non-DTB files, the distInfo file itself, etc.

  </p>

  <p id="para_190">

<!-- jp, 2004-04-27 Added <file> to this description -->

    Values for the attribute <code>media</code> on the element <code>&lt;book&gt;</code>

    and for the attribute <code>mediaRef</code> on the elements <code>smilRef</code>,

    <code>changeMsg</code>, and <code>file</code> shall be in the format "x:y", where x is

    the sequence number of this media unit, and y is the total number of media

    units in the distribution of this book.  If the book spans two or more media units, the <code>media</code>

    attribute on <code>&lt;book&gt;</code> must be present and contain a value. </p>

  <h2 id="h2_45">11.3 <a name="DistElem">DistInfo Elements</a></h2>

  <p class="sstatus">(This section is informative.)</p>

  <ul id="ul_129">

    <li id="li_486">

<!-- jp, 2004-04-26 Rewrote content model to include fileSet -->

    <strong>&lt;distInfo&gt;</strong><br />

      <strong>Description:</strong> The root element of a distInfo File.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT distInfo (book+, fileSet?) &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;distInfo</code>...attribute...<code>&gt;</code>...content...<code>&lt;/distInfo&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_130">

        <li id="li_487">

<!--MG 30 March, 2004, revised definition. -->

<!--TM 2004-04-05 changed version number -->

        <strong>version (CDATA, FIXED) "2005-1":</strong> Specifies the version of the

          DTD used in this instance. This attribute and its value (given in DTD) must be explicitly specified in the document instance.

        </li>

    <li id="li_487a">

<!-- JP 2004-03-31 New attribute -->

        <strong>xmlns (CDATA, FIXED) "http://www.daisy.org/z3986/2005/distInfo/":</strong>

        Specifies the default XML namespace for all elements in the distInfo File.  See <a href="#XMLNamespaces">[XML-Namespaces]</a> for details on namespaces.  This attribute and its value (given in DTD) must be explicitly specified in the document instance.</li>

      </ul>

      <strong>Valid inside:</strong> None<br />

      <br />

    </li>

    <li id="li_488">

<!-- jp, 2004-04-26 Rewrote content model to include docTitle and docAuthor -->

      <strong>&lt;book&gt;</strong><br />

      <strong>Description:</strong> Identifies a DTB that is present, in part or whole,

      on this piece of distribution media.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT book (docTitle, docAuthor*, distMap?, changeMsg*)&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;book</code> ...attributes...<code>&gt;</code>...content...<code>&lt;/book&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_131">

        <li id="li_489"><strong>uid (CDATA, REQUIRED):</strong> The globally unique identifier for the

          DTB. The value is the same as that of the <code>dc:Identifier</code> element referenced

          by the unique-identifier attribute on the package file's <code>package</code>

          element. See section 3.1, "<a href="#PkgId">Package Identity</a>."

        </li>

        <li id="li_490"><strong>pkgRef (CDATA, REQUIRED):</strong> The URI of the book's package file.

          However, players must be able to locate a DTB's package file even if

          a distInfo File is not present. </li>

        <li id="li_491"><strong>media (CDATA, IMPLIED):</strong> If the book spans two or more media

          units, the <code>media</code> attribute identifies the media unit in

          hand, in the format "x:y", where x is the sequence number of this media

          unit, and y is the total number of media pieces in the distribution

          of this book. </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;distInfo&gt;</code><br />

      <strong>Comments:</strong> Contains zero or one <code>distMap</code>s and zero or

      more <code>changeMsg</code>s.<br />

      <br />

    </li>

    <li id="li_492">

<!-- jp, 2004-04-27 Added comment about when distMap is required -->

      <strong>&lt;distMap&gt;</strong><br />

      <strong>Description:</strong> A map identifying which media unit the various SMIL

      files reside upon.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT distMap (smilRef+) &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;distMap&gt;</code>...content...<code>&lt;/distMap&gt;</code><br />

      <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;book&gt;</code><br />

      <strong>Comments:</strong> Contains one or more <code>smilRef</code>s.  <code>distMap</code> is only necessary when

      a book spans multiple pieces of media.<br />

      <br />

    </li>

    <li id="li_493"><strong>&lt;smilRef&gt;</strong><br />

      <strong>Description:</strong> A reference to a DTB SMIL file.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT smilRef EMPTY &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;smilRef</code>...attributes...<code>/&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_132">

        <li id="li_494"><strong>file (CDATA, REQUIRED):</strong> The filename of the given SMIL file.

        </li>

        <li id="li_495"><strong>mediaRef (CDATA, REQUIRED):</strong> Identifies the media unit on which

          the given SMIL file resides, in the format "x:y", where x is the sequence

          number of that media unit, and y is the total number of media pieces

          in the distribution of this book. </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;distMap&gt;</code><br />

      <strong>Comments:</strong> Contains the filenames of the SMIL files as they appear

      in the package file manifest.<br />

      <br />

    </li>

    <li id="li_495a">

  <!-- jp, 2004-04-26 Added docTitle; language taken from NCX -->

     <strong>&lt;docTitle&gt;</strong><br /><strong>Description:</strong> The title of the

        book, presented as text and, optionally, in audio or image renderings, for presentation to the reader. <br />

     <strong>Declaration:</strong>

           <code>&lt;!ELEMENT docTitle (text, audio?, img?)&gt;</code><br />

     <strong>Syntax:</strong>

        <code>&lt;docTitle</code> ...attributes... <code>&gt; </code>...content...

        <code>&lt;/docTitle&gt;</code><br /><strong>Attributes:</strong><br />

     <ul id="ul_132a">

         <li id="li_495b"><strong>xml:lang (NMTOKEN, IMPLIED):</strong> Specifies the <a href="#RFC3066">[RFC 3066]</a> language code of the language of the title. </li>

     </ul>

     <strong>Valid inside:</strong> <code>&lt;book&gt;</code><br />

      <br /></li>





    <li id="li_495c">

<!-- jp, 2004-04-26 Added docAuthor; language taken from NCX -->

     <strong>&lt;docAuthor&gt;</strong><br /><strong>Description:</strong>  An author of

  the book, presented as text and, optionally, in audio or image renderings, for presentation to the reader. <br /><strong>Declaration:</strong>

<br />

     <strong>Declaration:</strong>

           <code>&lt;!ELEMENT docAuthor (text, audio?, img?)&gt;</code><br />

     <strong>Syntax:</strong>

            <code>&lt;docAuthor</code>

  ...attributes...<code>&gt;</code>...content...<code>&lt;/docAuthor&gt;</code><br />

     <ul id="ul_132b">

         <li id="li_495d"><strong>xml:lang (NMTOKEN, IMPLIED):</strong> Specifies the <a href="#RFC3066">[RFC 3066]</a> language code of the language of the title.

  </li></ul><strong>Valid inside:</strong> <code>&lt;book&gt;</code><br />

      <br /></li>





    <li id="li_496"><strong>&lt;changeMsg&gt;</strong><br />

      <strong>Description:</strong> Contains text and/or audio versions of a custom message

      to be read when a new disk is requested by the reading system.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT changeMsg ((text, audio?) | audio)&gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;changeMsg</code>...attributes...<code>&gt;</code>...content...<code>&lt;/changeMsg&gt;</code><br />

      <strong>Attributes:</strong> <ul id="ul_133">

    <li id="li_497"><strong>mediaRef (CDATA, REQUIRED):</strong> Identifies the media unit that this

      message (e.g.,"Insert disc 2") specifies. Player invokes the correct <code>&lt;changeMsg&gt;</code>

      by matching its <code>mediaRef</code> attribute to the <code>mediaRef</code>

      attribute of the selected <code>&lt;smilRef&gt;</code>. In the format "x:y", where

      x is the sequence number of the specified media unit, and y is the total

      number of media pieces in the distribution of this book. </li>

    <li id="li_498"><!-- 2004-04-02 TM - changed lang to xml:lang; changed RFC1766 to RFC3066 --><strong>xml:lang (NMTOKEN, IMPLIED):</strong> Specifies the <a href="#RFC3066">[RFC 3066]</a> language code of the language in which the message is presented.

    </li>

  </ul>

  <strong>Valid inside:</strong> <code>&lt;book&gt;</code><br />

  <br /></li>



    <li id="li_498a">

<!-- jp, 2004-04-26 Added fileSet -->

      <strong>&lt;fileSet&gt;</strong><br />

      <strong>Description:</strong> Contains a list of all files in the distribution. <br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT fileSet (file+) &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;fileSet&gt;</code>...content...<code>&lt;/fileSet&gt;</code><br />

    <strong>Attributes:</strong> None<br />

      <strong>Valid inside:</strong> <code>&lt;distInfo&gt;</code><br />

  <br /></li>



    <li id="li_498b">

<!-- jp, 2004-04-26 Added file -->

      <strong>&lt;file&gt;</strong><br />

      <strong>Description:</strong> A file in the distribution.<br />

      <strong>Declaration:</strong> <code>&lt;!ELEMENT file EMPTY &gt;</code><br />

      <strong>Syntax:</strong> <code>&lt;file</code>...attributes...<code>/&gt;</code><br />

      <strong>Attributes:</strong>

      <ul id="ul_133a">

        <li id="li_498c"><strong>fileRef (CDATA, REQUIRED):</strong> The URI of the file.

        </li>

        <li id="li_498d"><strong>mediaRef (CDATA, IMPLIED):</strong> Identifies the media unit on which

          the given file resides, in the format "x:y", where x is the sequence

          number of that media unit, and y is the total number of media pieces

          in the distribution of this book. </li>

      </ul>

      <strong>Valid inside:</strong> <code>&lt;fileSet&gt;</code><br />

    <br />



    </li>



  <li id="li_499">

<!-- jp, 2004-04-26 Changed description to generalize usage -->

<!-- jp, 2004-04-26 Added docTitle/docAuthor to "Valid inside" -->

  <strong>&lt;text&gt;</strong><br />

    <strong>Description:</strong> Contains text of title, author, or media change message.<br />

    <strong>Declaration:</strong> <code>&lt;!ELEMENT text (#PCDATA) &gt;</code><br />

    <strong>Syntax:</strong><code> &lt;text&gt;</code>...content...<code>&lt;/text&gt;</code><br />

    <strong>Attributes:</strong> None<br />

    <strong>Valid inside:</strong> <code>&lt;changeMsg&gt;</code>,

                         <code>&lt;docTitle&gt;</code>,

                         <code>&lt;docAuthor&gt;</code><br />

    <br />

  </li>

  <li id="li_500">

<!-- jp, 2004-04-26 Changed description to generalize usage -->

<!-- jp, 2004-04-26 Added docTitle/docAuthor to "Valid inside" -->

  <strong>&lt;audio&gt;</strong><br />

    <strong>Description:</strong> Pointer to audio clip of title, author, or media change message.<br />

    <strong>Declaration:</strong> <code>&lt;!ELEMENT audio EMPTY&gt;</code><br />

    <strong>Syntax:</strong><code> &lt;audio</code>...attributes...<code>/&gt;</code><br />

    <strong>Attributes:</strong>

    <ul id="ul_134">

      <li id="li_501">

<!-- jp, 2004-04-26 Bug fix:  @src is REQUIRED in DTD -->

        <strong>src (%URI, REQUIRED):</strong> URI of audio content of media change message.</li>

            <li id="li_501a">

<!-- jp, 2004-04-26 @clipBegin now REQUIRED -->

         <strong>clipBegin (CDATA, REQUIRED):</strong> Specifies the beginning of a segment

        of a continuous audio file as a time offset from the start of the audio

        file. The value syntax is defined by the SMIL 2.0 Timing and Synchronization

        Module <a href="#ref-SMIL">[SMIL].</a>

        See section 7.7, "<a href="#Clock">Media Clipping and Clock Values.</a>" </li>

      <li id="li_501b">

<!-- jp, 2004-04-26 @clipEnd now REQUIRED -->

        <strong>clipEnd (CDATA, REQUIRED):</strong> Specifies the end of a segment of a

        continuous audio file as a time offset from the start of the audio file.

        It uses the same attribute value syntax as <code>clipBegin</code>. </li>

    </ul>

    <strong>Valid inside:</strong> <code>&lt;changeMsg&gt;</code>,

                         <code>&lt;docTitle&gt;</code>,

                         <code>&lt;docAuthor&gt;</code><br />

    <br />

  </li>



  <li id="li_501c">

<!-- jp, 2004-04-26 Added img (language from NCX) -->

  <strong>&lt;img&gt;</strong><br />

        <strong>Description:</strong> Contains a pointer to graphical content associated with a <code>&lt;docTitle&gt;</code>

or <code>&lt;docAuthor&gt;</code>.

  <br /><strong>Declaration:</strong><code> &lt;!ELEMENT img

  EMPTY&gt;</code><br /><strong>Syntax:</strong> <code>&lt;img</code>...attributes...

  <code>/&gt;</code><br /><strong>Attributes:</strong> <br />

  <ul id="ul_134a">

    <li id="li_501d"><strong>src (CDATA, REQUIRED):</strong> The URI of the media object.

    </li></ul>



    <strong>Valid inside:</strong> <code>&lt;docTitle&gt;</code>,

    <code>&lt;docAuthor&gt;</code><br /><br /></li>

</ul>



<h2 id="h2_46">11.4 <a name="DistEx">Examples</a></h2>

<p class="sstatus">(This section is informative.)</p>



<p id="para_191">Example 11.1 shows the distInfo File for the first disk of a book that spans

  three CD-ROMs. The <code>book</code> element identifies the book through the <code>uid</code>

  attribute, points to the package file via <code>pkgRef</code>, and indicates

  in the <code>media</code> attribute that this disk is the first of three. Players

  would parse the package file to obtain book metadata, etc. The <code>distMap</code>

  element contains a <code>smilRef</code> for each SMIL file in the book (there are

  10 in this particular case). The <code>file</code> attribute gives the name of each

  individual SMIL file. The <code>mediaRef</code> attribute indicates which disk that

  particular SMIL file (and all audio/text/image files referenced by it) resides

  upon.</p>



<p id="para_192">Players would refer to this map when a particular SMIL file is targeted for

  playback; if the file is not present on the current disk, the <code>changeMsg</code>

  whose <code>mediaRef</code> attribute matches that of the selected <code>smilRef</code>

  element would be played.</p>



<p id="para_193">

<!-- 2004-04-02 TM - fixed example per changes to version and xmlns -->

<!-- jp, 2004-04-26 Revised example to include docTitle/docAuthor, plus different SMIL

     clock value syntax (just for the heck of it)

-->

Example 11.1: </p><pre><samp id="smp_20">

&lt;?xml version="1.0"  encoding="UTF-8"?&gt;

&lt;!DOCTYPE distInfo PUBLIC "-//NISO//DTD distInfo 2005-1//EN"

  "http://www.daisy.org/z3986/2005/distInfo-2005-1.dtd"&gt;

&lt;distInfo version="2005-1" xmlns="http://www.daisy.org/z3986/2005/distInfo/"&gt;



  &lt;book uid="us-rfbd-tbfz284" pkgRef="./FZ284.opf" media="1:3"&gt;

        &lt;docTitle&gt;

            &lt;text&gt;Development through the lifespan&lt;/text&gt;

            &lt;audio src="FZ284_1098.mp3" clipBegin="0s"

            clipEnd="3.087s" /&gt;

        &lt;/docTitle&gt;

        &lt;docAuthor&gt;

            &lt;text&gt;Laura E. Berk&lt;/text&gt;

            &lt;audio src="FZ284_1098.mp3" clipBegin="3.5s"

            clipEnd="5.28s" /&gt;

        &lt;/docAuthor&gt;



    &lt;distMap&gt;

      &lt;smilRef file="FZ284_0001d.smil" mediaRef="1:3"/&gt;

      &lt;smilRef file="FZ284_0002d.smil" mediaRef="1:3"/&gt;

      &lt;smilRef file="FZ284_0003d.smil" mediaRef="1:3"/&gt;

      &lt;smilRef file="FZ284_0004d.smil" mediaRef="1:3"/&gt;

      &lt;smilRef file="FZ284_0005d.smil" mediaRef="2:3"/&gt;

      &lt;smilRef file="FZ284_0006d.smil" mediaRef="2:3"/&gt;

      &lt;smilRef file="FZ284_0007d.smil" mediaRef="2:3"/&gt;

      &lt;smilRef file="FZ284_0008d.smil" mediaRef="2:3"/&gt;

      &lt;smilRef file="FZ284_0009d.smil" mediaRef="2:3"/&gt;

      &lt;smilRef file="FZ284_0010d.smil" mediaRef="3:3"/&gt;

    &lt;/distMap&gt;



    &lt;changeMsg mediaRef="1:3"&gt;

       &lt;text&gt;Insert disc one.&lt;/text&gt;

       &lt;audio src="insert.wav" clipBegin="0s"

       clipEnd="2.256s" /&gt;

    &lt;/changeMsg&gt;

    &lt;changeMsg mediaRef="2:3"&gt;

       &lt;text&gt;Insert disc two.&lt;/text&gt;

       &lt;audio src="insert.wav" clipBegin="3s"

       clipEnd="5.881s" /&gt;

    &lt;/changeMsg&gt;

    &lt;changeMsg mediaRef="3:3"&gt;

       &lt;text&gt;Insert disc three.&lt;/text&gt;

       &lt;audio src="insert.wav" clipBegin="6.901s"

       clipEnd="10s" /&gt;

    &lt;/changeMsg&gt;

  &lt;/book&gt;

&lt;/distInfo&gt;



</samp></pre>



<p id="para_194">

<!-- jp, 2004-04-26 Rewrote description to match new example -->

In Example 11.2, a sample distInfo File is presented for a case where two books are included on one CD-ROM. The file contains pointers to two book package files.  Both books are complete on this one media unit so the <code>media</code> attribute is omitted.

This distInfo file also includes the optional <code>&lt;fileSet&gt;</code> element, which

lists all the files in the two books, plus some non-DTB "extras".</p>



<p id="para_195">

<!-- 2004-04-02 TM - fixed example per changes to version and xmlns -->

<!-- jp, 2004-04-26 Revised example to include docTitle/docAuthor, plus fileSet -->

Example 11.2:</p><pre><samp id="smp_21">

&lt;?xml version="1.0"  encoding="UTF-8"?&gt;

&lt;!DOCTYPE distInfo PUBLIC "-//NISO//DTD distInfo 2005-1//EN"

  "http://www.daisy.org/z3986/2005/distInfo-2005-1.dtd"&gt;

&lt;distInfo version="2005-1" xmlns="http://www.daisy.org/z3986/2005/distInfo/"&gt;

    &lt;book uid="us-nls-db00001" pkgRef="./book1/AllAboutDogs.opf" &gt;

        &lt;docTitle&gt;

            &lt;text&gt;All About Dogs:  Everything you wanted to know about

                  canines, but were afraid to ask&lt;/text&gt;

            &lt;audio src="distAudioClips.mp3" clipBegin="00:00"

            clipEnd="00:09.632" /&gt;

            &lt;img src="./book1/cover.jpg" /&gt;

        &lt;/docTitle&gt;

        &lt;docAuthor&gt;

            &lt;text&gt;George Kerscher&lt;/text&gt;

            &lt;audio src="distAudioClips.mp3" clipBegin="00:10"

            clipEnd="00:13.109" /&gt;

        &lt;/docAuthor&gt;

        &lt;docAuthor&gt;

            &lt;text&gt;Nesbit Kerscher&lt;/text&gt;

            &lt;audio src="distAudioClips.mp3" clipBegin="00:14"

            clipEnd="00:15.53" /&gt;

        &lt;/docAuthor&gt;

    &lt;/book&gt;



    &lt;book uid="us-nls-db98765" pkgRef="./book2/AllAboutCats.opf" &gt;

        &lt;docTitle&gt;

            &lt;text&gt;All About Cats:  Everything you wanted to know about

                  felines, but were afraid to ask&lt;/text&gt;

            &lt;audio src="distAudioClips.mp3" clipBegin="00:20"

            clipEnd="00:24.87" /&gt;

            &lt;img src="./book2/cover.jpg" /&gt;

        &lt;/docTitle&gt;

        &lt;docAuthor&gt;

            &lt;text&gt;Frances White&lt;/text&gt;

            &lt;audio src="distAudioClips.mp3" clipBegin="00:26"

            clipEnd="00:27.45" /&gt;

        &lt;/docAuthor&gt;

        &lt;docAuthor&gt;

            &lt;text&gt;Isabel White&lt;/text&gt;

            &lt;audio src="distAudioClips.mp3" clipBegin="00:28"

            clipEnd="00:29.71" /&gt;

        &lt;/docAuthor&gt;

    &lt;/book&gt;



    &lt;fileSet&gt;

        &lt;file fileRef="./book1/AllAboutDogs.opf" /&gt;

        &lt;file fileRef="./book1/AllAboutDogs.ncx" /&gt;

        &lt;file fileRef="./book1/AllAboutDogs.smil" /&gt;

        &lt;file fileRef="./book1/db00001_1.mp4" /&gt;

        &lt;file fileRef="./book1/db00001_2.mp4" /&gt;

        &lt;file fileRef="./book1/db00001_3.mp4" /&gt;

        &lt;file fileRef="./book1/cover.jpg" /&gt;

        &lt;file fileRef="./book1/NLS.res" /&gt;

        &lt;file fileRef="./book1/NLSres.mp4" /&gt;

        &lt;file fileRef="./book2/AllAboutCats.opf" /&gt;

        &lt;file fileRef="./book2/AllAboutCats.ncx" /&gt;

        &lt;file fileRef="./book2/AllAboutCats.smil" /&gt;

        &lt;file fileRef="./book1/db98765_1.mp4" /&gt;

        &lt;file fileRef="./book1/db98765_2.mp4" /&gt;

        &lt;file fileRef="./book1/db98765_3.mp4" /&gt;

        &lt;file fileRef="./book1/db98765_4.mp4" /&gt;

        &lt;file fileRef="./book2/cover.jpg" /&gt;

        &lt;file fileRef="./book2/NLS.res" /&gt;

        &lt;file fileRef="./book2/NLSres.mp4" /&gt;

        &lt;file fileRef="./extras/Guide_Dogs.mov" /&gt;

        &lt;file fileRef="./extras/Attack_Cats.mov" /&gt;

        &lt;file fileRef="distAudioClips.mp3" /&gt;

        &lt;file fileRef="distInfo.dinf" /&gt;

    &lt;/fileSet&gt;

&lt;/distInfo&gt;



</samp></pre>



<p id="para_195n"><a href="#toc">Contents</a></p>



<h1 id="h1_15">12. <a name="Style">Presentation Styles</a></h1>

<h2 id="h2_47">12.1 <a name="StyleIntro">Introduction</a></h2>

<p class="sstatus">(This section is informative.)</p>

<p id="para_196">The W3C has defined mechanisms for separating content from presentation

called the Cascading Style Sheet <a href="#CSS">[CSS]</a> and Extensible Style

Language <a href="#XSL">[XSL]</a>. CSS (for which two levels of functionality

are currently defined, <a href="#CSS1">Level 1 [CSS1]</a> and <a href="#CSS2">Level

2 [CSS2]</a>) and XSL allow specific formatting rules for mark-up to be defined

and stored independent of the actual content. Default rules are normally applied

by the specific playback or rendering system. The CSS <em>Cascade</em> provides

a defined mechanism in which style rules can also be applied by the content

producer as well as by the user. Producer-supplied style sheets are particularly

important for complex documents with formatting or presentational requirements

that would not be met by a player's or user's default styles.</p>

<p id="para_197">CSS or XSL files may be provided by the content producer to control visual

formatting of textual content when a DTB is played on a system that incorporates

a visual display and supports CSS or XSL.</p>

<p id="para_198">If a refreshable Braille display is connected to a DTB player, a Braille style

  sheet can control formatting so that the document is more easily navigable.</p>

<p id="para_199">Audio CSS (ACSS, part of CSS2) and XSL also support the aural equivalent of

visual formatting, and allow for audio cues to be associated with textual

content mark-up. For example, chapter starts or page breaks can be indicated

with a specific audio cue.</p>



<h2 id="h2_48">12.2 <a name="ImpStyles">Implementing Style Sheets for DTBs</a></h2>

<p class="sstatus">(This section is normative.)</p>

<p id="para_200">Style sheets are optional components of DTBs and DTB distribution systems. DTB producers may choose to supply default visual, Braille, or audio style sheets.</p>

<p id="para_201">Style sheets must not be written in such a way as to prevent users from overriding

  them. DTBs referencing style sheets must do so using standard W3C mechanisms

  to link an XML source to its style sheet (see <a href="#XML-Style">[XML-Style]</a>).

  All style sheet processing instructions must include the <em>media</em> attribute

  specifying which medium the style sheet applies to. Acceptable values are: all

  (for all media), aural (for audio presentations), braille (for refreshable Braille

  displays), embossed (for embossed Braille), handheld (for devices with small

  monochrome screens), print (for visual formatting of printed output), and screen

  (for color computer screens). For example:<br /><br />

<samp id="smp_22">&lt;?xml-stylesheet href="brstyle.css" type="text/css"

media="braille"?&gt;</samp></p>

<p id="para_202">Playback systems that use common PC-based browsers should support

presentation styles at least to the extent the browser itself does. However, it

is strongly recommended that any DTB player incorporating a visual display

implement at least CSS1. Portable players will not generally provide full

support for style sheets but may implement a subset of CSS or XSL sufficient for

DTB use and the media presented on the player. For example, an audio-only player

that is aware of the textual content might support only the audio styles

described above.</p>

<p id="para_203">Developers of playback systems may implement user interface features that

support local control of style sheets, thereby allowing the user to define styles that supersede default player- or producer-defined

styles. It is strongly recommended that players implementing style sheets

support user control of presentation styles.</p>

<p id="para_204">When multiple style sheets are present for the content being rendered, user-defined styles, if present,

shall take precedence, followed by producer-defined and player-defined styles,

in that order.</p>



<p id="para_204n"><a href="#toc">Contents</a></p>



<h1 id="h1_16">13. <a name="Render"><!-- jp 2004-03-10

[Removed subsections 13.1 and 13.2; promoted section 13.3; changed dtb:multimediaType to dtb:multimediaContent]-->



Content Rendering</a></h1>

<p class="sstatus">(This section is normative.)</p>

<p id="para_207">Players must determine how to render content from the types of

files present. If only a textual content file is found, a synthetic speech

rendering and output to a Braille display and/or a visual display may be

presented, according to the user's preferences and the features provided on

the playback system. If only an audio file is present, straight audio playback shall be

initiated. A player that supports only a subset of the media included in DTBs

must, when encountering an unsupported medium, ignore the unsupported files and

correctly render those it does support. In addition, if the playback system

cannot render any of the media in the DTB, based on the value of

<code>dtb:multimediaContent</code> in the package file metadata, it must report

this fact to the user.</p>



<p id="para_207n"><a href="#toc">Contents</a></p>



<h1 id="h1_17">14. <a name="DRM">Digital Rights Management</a></h1>

<p class="sstatus">(This section is informative.)</p>



<p id="para_208">Protection of intellectual property will continue to be an important issue

  for national libraries and other agencies serving people with print disabilities.

  How this responsibility is met in Digital Talking Book distribution programs,

  however, will vary from country to country due to differences in the legal environment

  surrounding the distribution of alternative format materials. It will also vary

  by item depending on whether the material is under copyright or in the public

  domain. When applicable, however, it is critical that agencies use reasonable

  administrative and technical measures to protect copyright holders' rights.

  It is equally important, though, that agencies ensure access to alternative

  format materials by their target populations. Thus, DTB producers and distributors

  that implement <a href="#d-drm">DRM</a> systems must do so in a manner that

  does not limit or prevent access to compliant DTBs by eligible users.</p>



<p id="para_208n"><a href="#toc">Contents</a></p>



<h1 id="h1_18">15. <a name="TSM">Time-Scale Modification</a></h1>

<p class="sstatus">(This section is normative.)</p>



<p id="para_209">It is strongly recommended that playback systems implement Time-Scale Modification

  (<a href="#d-tsm">TSM</a>) to enable user control of playback speed.  Playback rates continuously variable from one-third

  to three times normal speed are recommended.  It is also recommended that players allow users the option of disabling pitch correction during TSM operation.</p>



<p id="para_210">All time offsets in a DTB (e.g., SMIL and NCX <code>clipBegin</code>/<code>clipEnd</code>,

  bookmark <code>timeOffset</code>s, etc.), are based on normal play speed. In

  order to maintain synchronization, a player must process time offsets independently

  of actual playback speed.</p>



<p id="para_210n"><a href="#toc">Contents</a></p>



<h1 id="h1_19">16. <a name="Conform">Conformance</a></h1>

<p class="sstatus">(This section is normative.)</p>



<p id="para_211"><!--MG 30 March, 2004  Changed "standard" to "fie conformance" in last sentence.-->This standard defines two kinds of conformance: file conformance and player conformance. Conformant Digital Talking Books and DTB playback systems must meet all of the applicable requirements specified in the normative sections of this standard. Requirements will vary depending on the media included in a DTB and the functions supported by a DTB player.  It should be noted that while many aspects of file conformance can be enforced through the DTDs included in this standard, others cannot, and must be enforced through other means.</p>





<h2 id="h2_109_2"><!--MG 30 March, 2004 New section-->16.1 <a name="FileConform">General File Conformance Requirements</a></h2>

<p class="sstatus">(This section is normative.)</p>



<p id="para_211_2">

This specification allows DTB playback devices to make use of <a href="#ValNon-Val">validating and non-validating XML processors</a>. For all XML documents in the DTB file set, the following grammatical rules and file conformance requirements are incorporated to allow this flexibility:</p>



<ul id="nonval_req">

<li>all document grammars use an attribute named <code>id</code> as the singular ID token</li>

<li>all attributes declared as #FIXED in the respective DTD are required to be explicitly specified in the document instance</li>

<li>all entity declarations must occur in the internal DTD subset</li>

</ul>



<p id="para_211n"><a href="#toc">Contents</a></p>



<h1 id="h1_20">17. <a name="Ref">References to Other Specifications/Documents</a></h1>

<p id="para_212">The following standards, recommendations, and guidelines are referenced by this standard:</p>



<h2 id="h2_51a">17.1 <a name="Norm-Ref">Normative References</a></h2>

<p class="sstatus">(This section is normative.)</p>

<dl id="dl_5">

  <dt id="dt_137"><a name="CSS1">CSS1</a></dt>

  <dd id="dd_137">Cascading Style Sheets, Level 1: <a href="http://www.w3.org/TR/REC-CSS1">http://www.w3.org/TR/REC-CSS1</a></dd>

  <dt id="dt_138"><a name="CSS2">CSS2</a></dt>

  <dd id="dd_138">Cascading Style Sheets, Level 2: <a href="http://www.w3.org/TR/REC-CSS2/">http://www.w3.org/TR/REC-CSS2/</a></dd>

  <dt id="dt_140"><a name="DC">Dublin Core</a></dt>

  <dd id="dd_140">Dublin Core Metadata Initiative: <a href="http://dublincore.org/">http://dublincore.org/</a></dd>

  <dt id="dt_141"><a name="DC-Type">DC-Type</a></dt>

  <dd id="dd_141">Dublin Core Type Vocabulary: <a href="http://dublincore.org/documents/dcmi-type-vocabulary/">

    http://dublincore.org/documents/dcmi-type-vocabulary/</a></dd>

  <dt id="dt_145"><a name="ISO3166">ISO 3166</a></dt>

  <dd id="dd_145">ISO 3166 - Codes for the Representation of Names of Countries and their

    Subdivisions: <a href="http://www.iso.ch/iso/en/ISOOnline.openerpage">http://www.iso.ch/iso/en/ISOOnline.openerpage</a></dd>

  <dt id="dt_146"><a name="ISO8601">ISO 8601</a></dt>

  <dd id="dd_146">W3C Profile of ISO8601 - Representation of Dates and Times: <a href="http://www.w3.org/TR/NOTE-datetime.html">

    http://www.w3.org/TR/NOTE-datetime.html</a></dd>

  <dt id="dt_147"><a name="ISO8859-1">ISO 8859-1</a></dt>

  <dd id="dd_147">ISO 8859-1 - 8-bit single-byte coded graphic character sets -- Part 1: Latin

    alphabet No. 1 (HTML character set): <a href="http://www.iso.ch/iso/en/ISOOnline.openerpage">http://www.iso.ch/iso/en/ISOOnline.openerpage</a></dd>

  <dt id="dt_148"><a name="ISO10646">ISO/IEC 10646</a></dt>

  <dd id="dd_148">ISO/IEC 10646 - Universal Multiple-Octet Coded Character Set: <a href="http://www.unicode.org">http://www.unicode.org</a></dd>

  <dt id="dt_149"><a name="JPEG">JPEG</a></dt>

  <dd id="dd_149">JPEG JFIF V1.02: <a href="http://www.jpeg.org/public/jfif.pdf">http://www.jpeg.org/public/jfif.pdf</a></dd>

  <dt id="dt_150"><a name="MPEG">MPEG</a></dt>

  <dd id="dd_150">Copies of these MPEG standards:

    <ul id="ul_135">

      <li id="li_502">MPEG-1 Audio, ISO/IEC 11172-3</li>

      <li id="li_503">MPEG-4 Audio, ISO/IEC 14496-3</li>

    </ul>

    can be obtained from the International Organization for Standardization homepage:

    <a   name="ISO" href="http://www.iso.ch/iso/en/ISOOnline.openerpage">http://www.iso.ch/iso/en/ISOOnline.openerpage</a> or from your

    national standards body. In the United States, this is the American National

    Standards Institute: <a name="ANSI"   href="http://www.ansi.org">http://www.ansi.org</a></dd>

  <dt id="dt_152"><a name="ref-NameSpaces">NS</a></dt>

  <dd id="dd_152">XML NameSpaces: <a href="http://www.w3.org/TR/REC-xml-names/">http://www.w3.org/TR/REC-xml-names/</a></dd>

  <dt id="dt_153"><a name="OEBF">OEBF</a></dt>

  <dd id="dd_153">The Open eBook Forum Publication Structure, version 1.2: <a href="http://www.openebook.org">http://www.openebook.org</a></dd>

  <dt id="dt_155a"><a name="RFC2046"><!-- jp - 2004-03-29 New reference-->RFC 2046</a></dt>

  <dd id="dd_155a">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types: <a

  href="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</a></dd>

  <dt id="dt_156"><a name="RFC2083">RFC 2083</a></dt>

  <dd id="dd_156">Portable Network Graphics, Version 1: <a href="http://www.ietf.org/rfc/rfc2083.txt">http://www.ietf.org/rfc/rfc2083.txt</a></dd>

    <dt id="dt_156a"><a name="RFC2396">RFC 2396</a></dt>

  <dd id="dd_156a">Uniform Resource Identifiers (URI): Generic Syntax: <a href="http://www.ietf.org/rfc/rfc2396.txt">http://www.ietf.org/rfc/rfc2396.txt</a></dd>

  <dt id="dt_155"><a name="RFC3066">RFC 3066</a></dt>

  <dd id="dd_155"><!-- Replaces RFC 1766. April 3, 2004 George Kerscher -->Tags for the Identification of Languages: <a href="http://www.ietf.org/rfc/rfc3066.txt">

    http://www.ietf.org/rfc/rfc3066.txt</a></dd>

  <dt id="dt_157"><a name="RIFFWAV">RIFFWAV</a></dt>

  <dd id="dd_157">RIFF WAV format information: <a href="ftp://ftp.cwi.nl/pub/audio/RIFF-format">ftp://ftp.cwi.nl/pub/audio/RIFF-format

    </a></dd>

  <dt id="dt_158"><a name="ref-SMIL">SMIL</a></dt>

  <dd id="dd_158">SMIL 2.0 W3C Recommendation [Second Edition] 07 January 2005: <a href="http://www.w3.org/TR/2005/REC-SMIL2-20050107/">http://www.w3.org/TR/2005/REC-SMIL2-20050107/</a></dd>

  <dt id="dt_163"><a name="SVG">SVG</a></dt>

  <dd id="dd_163">Scalable Vector Graphics:

  <a href="http://www.w3.org/TR/2001/REC-SVG-20010904/">http://www.w3.org/TR/2001/REC-SVG-20010904/</a></dd>

  <dt id="dt_166"><a name="XML">XML</a></dt>

  <dd id="dd_166">XML Version 1.0: <a href="http://www.w3.org/TR/REC-xml/">http://www.w3.org/TR/REC-xml/</a></dd>

 <dt id="dt_166a"><a name="XMLNamespaces">XML-Namespaces</a> </dt>

  <dd id="dd_166a">Namespaces in XML: <a href="http://www.w3.org/TR/REC-xml-names/">http://www.w3.org/TR/REC-xml-names/</a></dd>

  <dt id="dt_167"><a name="XML-Style">XML-Style</a></dt>

  <dd id="dd_167">Associating Style Sheets with XML Documents 1.0: <a href="http://www.w3.org/TR/xml-stylesheet/">http://www.w3.org/TR/xml-stylesheet/</a></dd>

  <dt id="dt_167a"><a name="XPath10">XPath10</a></dt>

  <dd id="dd_167a">XML Path Language (XPath) Version 1.0: <a href="http://www.w3.org/TR/xpath">http://www.w3.org/TR/xpath</a></dd>

  <dt id="dt_168"><a name="XSL">XSL</a></dt>

  <dd id="dd_168">Extensible Stylesheet Language (XSL) Version 1.0: <a href="http://www.w3.org/TR/xsl/">http://www.w3.org/TR/xsl/</a></dd>

</dl>



<h2 id="h2_51b">17.2 <a name="Inform-Ref">Informative References</a></h2>

<p class="sstatus">(This section is informative.)</p>

<dl id="dl_5a">

  <dt id="dt_135"><a name="ATAG"> ATAG</a></dt>

  <dd id="dd_135">Authoring Tool Accessibility Guidelines: <a href="http://www.w3.org/TR/WAI-AUTOOLS/">http://www.w3.org/TR/WAI-AUTOOLS/</a></dd>

  <dt id="dt_136"><a name="CSS">CSS</a></dt>

  <dd id="dd_136">Cascading Style Sheets: <a href="http://www.w3.org/Style/CSS/">http://www.w3.org/Style/CSS/</a></dd>

  <dt id="dt_139"><a name="DAISY">DAISY</a></dt>

  <dd id="dd_139">The DAISY Consortium: <a href="http://www.daisy.org/">http://www.daisy.org/</a></dd>

  <dt id="dt_142"><a name="Dtbookhtm">DTBook HTML</a></dt>

<!--

  <dd id="dd_142">HTML version of expanded DTBook DTD: <a href="http://www.loc.gov/nls/z3986/2005/dtbook122doc.htm">

    http://www.loc.gov/nls/z3986/2005/dtbook122doc.htm</a></dd>

-->

  <dd id="dd_142">HTML version of expanded DTBook DTD:

  <a href="http://www.daisy.org/z3986/2005/dtbook/dtbookdoc.html">

    http://www.daisy.org/z3986/2005/dtbook/dtbookdoc.html</a></dd>



  <dt id="dt_143"><a name="Theory">DTBook Theory</a></dt>

  <dd id="dd_143">Theory behind the DTBook DTD: <a href="http://www.daisy.org/publications/docs/theory_dtbook/theory_dtbook.html">

    http://www.daisy.org/publications/docs/theory_dtbook/theory_dtbook.html</a></dd>

  <dt id="dt_151"><a name="Navfeat">Navigation Features</a></dt>

  <dd id="dd_151">Document Navigation Features List: <a href="http://www.loc.gov/nls/z3986/background/navigation.htm">

    http://www.loc.gov/nls/z3986/background/navigation.htm</a></dd>

  <dt id="dt_154"><a name="Playfeat">Player Features</a></dt>

  <dd id="dd_154">Playback Device Features List: <a href="http://www.loc.gov/nls/z3986/background/features.htm">

    http://www.loc.gov/nls/z3986/background/features.htm</a></dd>

  <dt id="dt_154a"><a name="RFC2048"><!-- jp - 2004-03-29 New reference-->RFC 2048</a></dt>

  <dd id="dd_154a">Multipurpose Internet Mail Extensions (MIME) Part Four:  Registration Procedures <a

  href="http://www.ietf.org/rfc/rfc2048.txt">http://www.ietf.org/rfc/rfc2048.txt</a></dd>

  <dt id="dt_154b"><a name="RFC3023"><!-- jp - 2004-03-29 New reference-->RFC 3023</a></dt>

  <dd id="dd_154b">XML Media Types <a

  href="http://www.ietf.org/rfc/rfc3023.txt">http://www.ietf.org/rfc/rfc3023.txt</a></dd>

  <dt id="dt_162"><a name="StructGuide">StructGuide</a></dt>

  <dd id="dd_162">Structure Guidelines: <a href="http://www.daisy.org/publications/guidelines/sg-daisy3/structguide.htm">

    http://www.daisy.org/publications/guidelines/sg-daisy3/structguide.htm</a></dd>

  <dt id="dt_164"><a name="UAAG">UAAG</a></dt>

  <dd id="dd_164">User Agent Accessibility Guidelines: <a href="http://www.w3.org/TR/UAAG10/">http://www.w3.org/TR/UAAG10/</a></dd>

<dt id="dt_164_2"><!--MG 30 March, 2004 New reference--><a name="ValNon-Val">Validating and Non-Validating Processors</a></dt>

<dd id="dd_164_2">XML 1.0 Specification (Third Edition), section 5.1: <a href="http://www.w3.org/TR/2004/REC-xml-20040204/#proc-types">http://www.w3.org/TR/2004/REC-xml-20040204/#proc-types</a></dd>

<dt id="dt_165"><a name="WCAG">WCAG</a></dt>

  <dd id="dd_165">Web Content Accessibility Guidelines: <a href="http://www.w3.org/TR/WAI-WEBCONTENT/">http://www.w3.org/TR/WAI-WEBCONTENT/</a></dd>

    <dt id="dt_169"><a name="XSLT">XSLT</a></dt>

  <dd id="dd_169">XSL Transformations (XSLT) Version 1.0: <a href="http://www.w3.org/TR/xslt">http://www.w3.org/TR/xslt</a></dd>

</dl>



<p id="para_212n"><a href="#toc">Contents</a></p>





<h1 id="h1_21"><!-- See change list in DTD. --><a name="DTBookDTD">Appendix 1 - Document Type Definitions (DTDs)

</a></h1>

<p class="sstatus">(This section is normative.)</p>

<p>The following DTDs are available in plain-text form from the maintenance agency

  at <a href="http://www.daisy.org/z3986/">http://www.daisy.org/z3986/</a>:</p>



<ul>

	<li>DTBook DTD</li>

	<li>DTB-Specific SMIL DTD</li>

	<li>NCX DTD</li>

	<li>DTD for Portable Bookmarks/Highlights</li>

	<li>DTD for Resource File</li>

	<li>Distribution Information DTD</li>

</ul>





<p id="para_212t"><a href="#toc">Contents</a></p>



<h1 id="h1_27"><a name="MaintDes">Appendix 2 - Designation of Maintenance Agency</a></h1>



<p id="para_213">(This Appendix is not part of American National Standard Z39.86-2005,

Specifications for the Digital Talking Book.  It is included for information only.)</p>



<!-- Editorial revision April 21, 2007 by KK

   Verbage changed to reference using Contact Us form on DAISY Web site

-->

<p id="para_214">The functions assigned to the maintenance agency as specified

  in section 1.7 will be administered by the DAISY Consortium. Questions concerning

  the implementation of this standard and requests for information should be

  sent to the staff of the DAISY Consortium using the &quot;Contact Us&quot; form at <a href="http://www.daisy.org/">http://www.daisy.org/</a>,

  specifying  subject 

"Z3986 Standard".</p>



<p id="para_215"><a href="#toc">Contents</a></p>

</body>

</html>







